import "simpleitk"

img = ReadImage("tests/data/chris_t1.nii.gz")
mm = MinimumMaximum(img)
lo = index(mm,0)
hi = index(mm,1)

// Build 100 fractional thresholds linearly spaced between lo and hi (inclusive).
idxs = range(0,100)
thresholds = lo + (hi-lo) * (idxs / 99)

// BinaryThreshold semantics:
// keep voxel if lower <= intensity <= upper
// Here upper=hi, so increasing lower keeps only brighter voxels.
mk_mask(th) = BinaryThreshold(img, th, hi, 255, 0)

// Keep the sweep symbolic and side-effect free.
masks = map(mk_mask, thresholds)
