(function(){"use strict";var nn=Array.isArray,ri=Array.prototype.indexOf,xr=Array.prototype.includes,an=Array.from,ni=Object.defineProperty,sr=Object.getOwnPropertyDescriptor,ha=Object.getOwnPropertyDescriptors,ai=Object.prototype,si=Array.prototype,Mn=Object.getPrototypeOf,ga=Object.isExtensible;const ii=()=>{};function li(e){return e()}function Ln(e){for(var t=0;t<e.length;t++)e[t]()}function ma(){var e,t,r=new Promise((a,s)=>{e=a,t=s});return{promise:r,resolve:e,reject:t}}const he=2,jr=4,Dr=8,ba=1<<24,Nt=16,it=32,ir=64,Fn=128,Ge=512,de=1024,ye=2048,We=4096,De=8192,Rt=16384,lr=32768,Sr=65536,ya=1<<17,wa=1<<18,kr=1<<19,xa=1<<20,Pt=1<<25,or=65536,On=1<<21,jn=1<<22,Gt=1<<23,Ct=Symbol("$state"),oi=Symbol("legacy props"),ur=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Dn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function ui(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ci(e,t,r){throw new Error("https://svelte.dev/e/each_key_duplicate")}function fi(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function di(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function vi(e){throw new Error("https://svelte.dev/e/effect_orphan")}function _i(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function pi(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function hi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function gi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function mi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function bi(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const yi=1,wi=2,Sa=4,xi=8,Si=16,ki=1,Ei=2,$i=4,Ti=8,Ni=16,Ri=1,Pi=2,ge=Symbol(),ka="http://www.w3.org/1999/xhtml";function Ci(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Ii(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Ea(e){return e===this.v}function Ai(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function $a(e){return!Ai(e,this.v)}let Er=!1,cc=!1;function Mi(){Er=!0}let ne=null;function $r(e){ne=e}function It(e,t=!1,r){ne={p:ne,i:!1,c:null,e:null,s:e,x:null,l:Er&&!t?{s:null,u:null,$:[]}:null}}function At(e){var t=ne,r=t.e;if(r!==null){t.e=null;for(var a of r)Ka(a)}return e!==void 0&&(t.x=e),t.i=!0,ne=t.p,e??{}}function zr(){return!Er||ne!==null&&ne.l===null}let cr=[];function Ta(){var e=cr;cr=[],Ln(e)}function Mt(e){if(cr.length===0&&!Vr){var t=cr;queueMicrotask(()=>{t===cr&&Ta()})}cr.push(e)}function Li(){for(;cr.length>0;)Ta()}function Na(e){var t=Z;if(t===null)return W.f|=Gt,e;if((t.f&lr)===0&&(t.f&jr)===0)throw e;Wt(e,t)}function Wt(e,t){for(;t!==null;){if((t.f&Fn)!==0){if((t.f&lr)===0)throw e;try{t.b.error(e);return}catch(r){e=r}}t=t.parent}throw e}const Fi=-7169;function ie(e,t){e.f=e.f&Fi|t}function zn(e){(e.f&Ge)!==0||e.deps===null?ie(e,de):ie(e,We)}function Ra(e){if(e!==null)for(const t of e)(t.f&he)===0||(t.f&or)===0||(t.f^=or,Ra(t.deps))}function Pa(e,t,r){(e.f&ye)!==0?t.add(e):(e.f&We)!==0&&r.add(e),Ra(e.deps),ie(e,de)}const sn=new Set;let Y=null,ln=null,lt=null,Ce=[],on=null,Vn=!1,Vr=!1;class Kt{current=new Map;previous=new Map;#t=new Set;#l=new Set;#e=0;#i=0;#n=null;#s=new Set;#r=new Set;#a=new Map;is_fork=!1;#o=!1;#c(){return this.is_fork||this.#i>0}skip_effect(t){this.#a.has(t)||this.#a.set(t,{d:[],m:[]})}unskip_effect(t){var r=this.#a.get(t);if(r){this.#a.delete(t);for(var a of r.d)ie(a,ye),ot(a);for(a of r.m)ie(a,We),ot(a)}}process(t){Ce=[],this.apply();var r=[],a=[];for(const s of t)this.#u(s,r,a);if(this.#c()){this.#f(a),this.#f(r);for(const[s,i]of this.#a)La(s,i)}else{for(const s of this.#t)s();this.#t.clear(),this.#e===0&&this.#v(),ln=this,Y=null,Ia(a),Ia(r),this.#s.clear(),this.#r.clear(),ln=null,this.#n?.resolve()}lt=null}#u(t,r,a){t.f^=de;for(var s=t.first;s!==null;){var i=s.f,c=(i&(it|ir))!==0,l=c&&(i&de)!==0,o=l||(i&De)!==0||this.#a.has(s);if(!o&&s.fn!==null){c?s.f^=de:(i&jr)!==0?r.push(s):Pr(s)&&((i&Nt)!==0&&this.#r.add(s),pr(s));var v=s.first;if(v!==null){s=v;continue}}for(;s!==null;){var h=s.next;if(h!==null){s=h;break}s=s.parent}}}#f(t){for(var r=0;r<t.length;r+=1)Pa(t[r],this.#s,this.#r)}capture(t,r){r!==ge&&!this.previous.has(t)&&this.previous.set(t,r),(t.f&Gt)===0&&(this.current.set(t,t.v),lt?.set(t,t.v))}activate(){Y=this,this.apply()}deactivate(){Y===this&&(Y=null,lt=null)}flush(){if(this.activate(),Ce.length>0){if(Ca(),Y!==null&&Y!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#l)t(this);this.#l.clear()}#v(){if(sn.size>1){this.previous.clear();var t=lt,r=!0;for(const s of sn){if(s===this){r=!1;continue}const i=[];for(const[l,o]of this.current){if(s.current.has(l))if(r&&o!==s.current.get(l))s.current.set(l,o);else continue;i.push(l)}if(i.length===0)continue;const c=[...s.current.keys()].filter(l=>!this.current.has(l));if(c.length>0){var a=Ce;Ce=[];const l=new Set,o=new Map;for(const v of i)Aa(v,c,l,o);if(Ce.length>0){Y=s,s.apply();for(const v of Ce)s.#u(v,[],[]);s.deactivate()}Ce=a}}Y=null,lt=t}this.#a.clear(),sn.delete(this)}increment(t){this.#e+=1,t&&(this.#i+=1)}decrement(t){this.#e-=1,t&&(this.#i-=1),!this.#o&&(this.#o=!0,Mt(()=>{this.#o=!1,this.#c()?Ce.length>0&&this.flush():this.revive()}))}revive(){for(const t of this.#s)this.#r.delete(t),ie(t,ye),ot(t);for(const t of this.#r)ie(t,We),ot(t);this.flush()}oncommit(t){this.#t.add(t)}ondiscard(t){this.#l.add(t)}settled(){return(this.#n??=ma()).promise}static ensure(){if(Y===null){const t=Y=new Kt;sn.add(Y),Vr||Mt(()=>{Y===t&&t.flush()})}return Y}apply(){}}function Oi(e){var t=Vr;Vr=!0;try{for(var r;;){if(Li(),Ce.length===0&&(Y?.flush(),Ce.length===0))return on=null,r;Ca()}}finally{Vr=t}}function Ca(){Vn=!0;var e=null;try{for(var t=0;Ce.length>0;){var r=Kt.ensure();if(t++>1e3){var a,s;ji()}r.process(Ce),Qt.clear()}}finally{Ce=[],Vn=!1,on=null}}function ji(){try{_i()}catch(e){Wt(e,on)}}let Lt=null;function Ia(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var a=e[r++];if((a.f&(Rt|De))===0&&Pr(a)&&(Lt=new Set,pr(a),a.deps===null&&a.first===null&&a.nodes===null&&a.teardown===null&&a.ac===null&&Za(a),Lt?.size>0)){Qt.clear();for(const s of Lt){if((s.f&(Rt|De))!==0)continue;const i=[s];let c=s.parent;for(;c!==null;)Lt.has(c)&&(Lt.delete(c),i.push(c)),c=c.parent;for(let l=i.length-1;l>=0;l--){const o=i[l];(o.f&(Rt|De))===0&&pr(o)}}Lt.clear()}}Lt=null}}function Aa(e,t,r,a){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const s of e.reactions){const i=s.f;(i&he)!==0?Aa(s,t,r,a):(i&(jn|Nt))!==0&&(i&ye)===0&&Ma(s,t,a)&&(ie(s,ye),ot(s))}}function Ma(e,t,r){const a=r.get(e);if(a!==void 0)return a;if(e.deps!==null)for(const s of e.deps){if(xr.call(t,s))return!0;if((s.f&he)!==0&&Ma(s,t,r))return r.set(s,!0),!0}return r.set(e,!1),!1}function ot(e){var t=on=e,r=t.b;if(r?.is_pending&&(e.f&(jr|Dr|ba))!==0&&(e.f&lr)===0){r.defer_effect(e);return}for(;t.parent!==null;){t=t.parent;var a=t.f;if(Vn&&t===Z&&(a&Nt)!==0&&(a&wa)===0&&(a&lr)!==0)return;if((a&(ir|it))!==0){if((a&de)===0)return;t.f^=de}}Ce.push(t)}function La(e,t){if(!((e.f&it)!==0&&(e.f&de)!==0)){(e.f&ye)!==0?t.d.push(e):(e.f&We)!==0&&t.m.push(e),ie(e,de);for(var r=e.first;r!==null;)La(r,t),r=r.next}}function Di(e){let t=0,r=fr(0),a;return()=>{Jn()&&(n(r),Ur(()=>(t===0&&(a=y(()=>e(()=>Br(r)))),t+=1,()=>{Mt(()=>{t-=1,t===0&&(a?.(),a=void 0,Br(r))})})))}}var zi=Sr|kr;function Vi(e,t,r,a){new Bi(e,t,r,a)}class Bi{parent;is_pending=!1;transform_error;#t;#l=null;#e;#i;#n;#s=null;#r=null;#a=null;#o=null;#c=0;#u=0;#f=!1;#v=new Set;#_=new Set;#d=null;#b=Di(()=>(this.#d=fr(this.#c),()=>{this.#d=null}));constructor(t,r,a,s){this.#t=t,this.#e=r,this.#i=i=>{var c=Z;c.b=this,c.f|=Fn,a(i)},this.parent=Z.b,this.transform_error=s??this.parent?.transform_error??(i=>i),this.#n=Gn(()=>{this.#g()},zi)}#y(){try{this.#s=Ke(()=>this.#i(this.#t))}catch(t){this.error(t)}}#w(t){const r=this.#e.failed;r&&(this.#a=Ke(()=>{r(this.#t,()=>t,()=>()=>{})}))}#x(){const t=this.#e.pending;t&&(this.is_pending=!0,this.#r=Ke(()=>t(this.#t)),Mt(()=>{var r=this.#o=document.createDocumentFragment(),a=Ft();r.append(a),this.#s=this.#h(()=>(Kt.ensure(),Ke(()=>this.#i(a)))),this.#u===0&&(this.#t.before(r),this.#o=null,dr(this.#r,()=>{this.#r=null}),this.#p())}))}#g(){try{if(this.is_pending=this.has_pending_snippet(),this.#u=0,this.#c=0,this.#s=Ke(()=>{this.#i(this.#t)}),this.#u>0){var t=this.#o=document.createDocumentFragment();ts(this.#s,t);const r=this.#e.pending;this.#r=Ke(()=>r(this.#t))}else this.#p()}catch(r){this.error(r)}}#p(){this.is_pending=!1;for(const t of this.#v)ie(t,ye),ot(t);for(const t of this.#_)ie(t,We),ot(t);this.#v.clear(),this.#_.clear()}defer_effect(t){Pa(t,this.#v,this.#_)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#e.pending}#h(t){var r=Z,a=W,s=ne;bt(this.#n),Qe(this.#n),$r(this.#n.ctx);try{return t()}catch(i){return Na(i),null}finally{bt(r),Qe(a),$r(s)}}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#u+=t,this.#u===0&&(this.#p(),this.#r&&dr(this.#r,()=>{this.#r=null}),this.#o&&(this.#t.before(this.#o),this.#o=null))}update_pending_count(t){this.#m(t),this.#c+=t,!(!this.#d||this.#f)&&(this.#f=!0,Mt(()=>{this.#f=!1,this.#d&&Tr(this.#d,this.#c)}))}get_effect_pending(){return this.#b(),n(this.#d)}error(t){var r=this.#e.onerror;let a=this.#e.failed;if(!r&&!a)throw t;this.#s&&(Ae(this.#s),this.#s=null),this.#r&&(Ae(this.#r),this.#r=null),this.#a&&(Ae(this.#a),this.#a=null);var s=!1,i=!1;const c=()=>{if(s){Ii();return}s=!0,i&&bi(),this.#a!==null&&dr(this.#a,()=>{this.#a=null}),this.#h(()=>{Kt.ensure(),this.#g()})},l=o=>{try{i=!0,r?.(o,c),i=!1}catch(v){Wt(v,this.#n&&this.#n.parent)}a&&(this.#a=this.#h(()=>{Kt.ensure();try{return Ke(()=>{var v=Z;v.b=this,v.f|=Fn,a(this.#t,()=>o,()=>c)})}catch(v){return Wt(v,this.#n.parent),null}}))};Mt(()=>{var o;try{o=this.transform_error(t)}catch(v){Wt(v,this.#n&&this.#n.parent);return}o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(l,v=>Wt(v,this.#n&&this.#n.parent)):l(o)})}}function qi(e,t,r,a){const s=zr()?un:Ie;var i=e.filter(w=>!w.settled);if(r.length===0&&i.length===0){a(t.map(s));return}var c=Z,l=Ui(),o=i.length===1?i[0].promise:i.length>1?Promise.all(i.map(w=>w.promise)):null;function v(w){l();try{a(w)}catch(g){(c.f&Rt)===0&&Wt(g,c)}Bn()}if(r.length===0){o.then(()=>v(t.map(s)));return}function h(){l(),Promise.all(r.map(w=>Hi(w))).then(w=>v([...t.map(s),...w])).catch(w=>Wt(w,c))}o?o.then(h):h()}function Ui(){var e=Z,t=W,r=ne,a=Y;return function(i=!0){bt(e),Qe(t),$r(r),i&&a?.activate()}}function Bn(e=!0){bt(null),Qe(null),$r(null),e&&Y?.deactivate()}function Ji(){var e=Z.b,t=Y,r=e.is_rendered();return e.update_pending_count(1),t.increment(r),()=>{e.update_pending_count(-1),t.decrement(r)}}function un(e){var t=he|ye,r=W!==null&&(W.f&he)!==0?W:null;return Z!==null&&(Z.f|=kr),{ctx:ne,deps:null,effects:null,equals:Ea,f:t,fn:e,reactions:null,rv:0,v:ge,wv:0,parent:r??Z,ac:null}}function Hi(e,t,r){Z===null&&ui();var s=void 0,i=fr(ge),c=!W,l=new Map;return sl(()=>{var o=ma();s=o.promise;try{Promise.resolve(e()).then(o.resolve,o.reject).finally(Bn)}catch(g){o.reject(g),Bn()}var v=Y;if(c){var h=Ji();l.get(v)?.reject(ur),l.delete(v),l.set(v,o)}const w=(g,S=void 0)=>{if(v.activate(),S)S!==ur&&(i.f|=Gt,Tr(i,S));else{(i.f&Gt)!==0&&(i.f^=Gt),Tr(i,g);for(const[x,P]of l){if(l.delete(x),x===v)break;P.reject(ur)}}h&&h()};o.promise.then(w,g=>w(null,g||"unknown"))}),dn(()=>{for(const o of l.values())o.reject(ur)}),new Promise(o=>{function v(h){function w(){h===s?o(i):v(s)}h.then(w,w)}v(s)})}function Ie(e){const t=un(e);return t.equals=$a,t}function Gi(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)Ae(t[r])}}function Wi(e){for(var t=e.parent;t!==null;){if((t.f&he)===0)return(t.f&Rt)===0?t:null;t=t.parent}return null}function qn(e){var t,r=Z;bt(Wi(e));try{e.f&=~or,Gi(e),t=ls(e)}finally{bt(r)}return t}function Fa(e){var t=qn(e);if(!e.equals(t)&&(e.wv=ss(),(!Y?.is_fork||e.deps===null)&&(e.v=t,e.deps===null))){ie(e,de);return}Zt||(lt!==null?(Jn()||Y?.is_fork)&&lt.set(e,t):zn(e))}function Ki(e){if(e.effects!==null)for(const t of e.effects)(t.teardown||t.ac)&&(t.teardown?.(),t.ac?.abort(ur),t.teardown=ii,t.ac=null,Jr(t,0),Wn(t))}function Oa(e){if(e.effects!==null)for(const t of e.effects)t.teardown&&pr(t)}let Un=new Set;const Qt=new Map;let ja=!1;function fr(e,t){var r={f:0,v:e,reactions:null,equals:Ea,rv:0,wv:0};return r}function Yt(e,t){const r=fr(e);return ol(r),r}function N(e,t=!1,r=!0){const a=fr(e);return t||(a.equals=$a),Er&&r&&ne!==null&&ne.l!==null&&(ne.l.s??=[]).push(a),a}function ht(e,t){return f(e,y(()=>n(e))),t}function f(e,t,r=!1){W!==null&&(!ut||(W.f&ya)!==0)&&zr()&&(W.f&(he|Nt|jn|ya))!==0&&(Ye===null||!xr.call(Ye,e))&&mi();let a=r?Nr(t):t;return Tr(e,a)}function Tr(e,t){if(!e.equals(t)){var r=e.v;Zt?Qt.set(e,t):Qt.set(e,r),e.v=t;var a=Kt.ensure();if(a.capture(e,r),(e.f&he)!==0){const s=e;(e.f&ye)!==0&&qn(s),zn(s)}e.wv=ss(),Da(e,ye),zr()&&Z!==null&&(Z.f&de)!==0&&(Z.f&(it|ir))===0&&(Ze===null?ul([e]):Ze.push(e)),!a.is_fork&&Un.size>0&&!ja&&Qi()}return t}function Qi(){ja=!1;for(const e of Un)(e.f&de)!==0&&ie(e,We),Pr(e)&&pr(e);Un.clear()}function Br(e){f(e,e.v+1)}function Da(e,t){var r=e.reactions;if(r!==null)for(var a=zr(),s=r.length,i=0;i<s;i++){var c=r[i],l=c.f;if(!(!a&&c===Z)){var o=(l&ye)===0;if(o&&ie(c,t),(l&he)!==0){var v=c;lt?.delete(v),(l&or)===0&&(l&Ge&&(c.f|=or),Da(v,We))}else o&&((l&Nt)!==0&&Lt!==null&&Lt.add(c),ot(c))}}}function Nr(e){if(typeof e!="object"||e===null||Ct in e)return e;const t=Mn(e);if(t!==ai&&t!==si)return e;var r=new Map,a=nn(e),s=Yt(0),i=_r,c=l=>{if(_r===i)return l();var o=W,v=_r;Qe(null),as(i);var h=l();return Qe(o),as(v),h};return a&&r.set("length",Yt(e.length)),new Proxy(e,{defineProperty(l,o,v){(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&hi();var h=r.get(o);return h===void 0?c(()=>{var w=Yt(v.value);return r.set(o,w),w}):f(h,v.value,!0),!0},deleteProperty(l,o){var v=r.get(o);if(v===void 0){if(o in l){const h=c(()=>Yt(ge));r.set(o,h),Br(s)}}else f(v,ge),Br(s);return!0},get(l,o,v){if(o===Ct)return e;var h=r.get(o),w=o in l;if(h===void 0&&(!w||sr(l,o)?.writable)&&(h=c(()=>{var S=Nr(w?l[o]:ge),x=Yt(S);return x}),r.set(o,h)),h!==void 0){var g=n(h);return g===ge?void 0:g}return Reflect.get(l,o,v)},getOwnPropertyDescriptor(l,o){var v=Reflect.getOwnPropertyDescriptor(l,o);if(v&&"value"in v){var h=r.get(o);h&&(v.value=n(h))}else if(v===void 0){var w=r.get(o),g=w?.v;if(w!==void 0&&g!==ge)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return v},has(l,o){if(o===Ct)return!0;var v=r.get(o),h=v!==void 0&&v.v!==ge||Reflect.has(l,o);if(v!==void 0||Z!==null&&(!h||sr(l,o)?.writable)){v===void 0&&(v=c(()=>{var g=h?Nr(l[o]):ge,S=Yt(g);return S}),r.set(o,v));var w=n(v);if(w===ge)return!1}return h},set(l,o,v,h){var w=r.get(o),g=o in l;if(a&&o==="length")for(var S=v;S<w.v;S+=1){var x=r.get(S+"");x!==void 0?f(x,ge):S in l&&(x=c(()=>Yt(ge)),r.set(S+"",x))}if(w===void 0)(!g||sr(l,o)?.writable)&&(w=c(()=>Yt(void 0)),f(w,Nr(v)),r.set(o,w));else{g=w.v!==ge;var P=c(()=>Nr(v));f(w,P)}var b=Reflect.getOwnPropertyDescriptor(l,o);if(b?.set&&b.set.call(h,v),!g){if(a&&typeof o=="string"){var $=r.get("length"),V=Number(o);Number.isInteger(V)&&V>=$.v&&f($,V+1)}Br(s)}return!0},ownKeys(l){n(s);var o=Reflect.ownKeys(l).filter(w=>{var g=r.get(w);return g===void 0||g.v!==ge});for(var[v,h]of r)h.v!==ge&&!(v in l)&&o.push(v);return o},setPrototypeOf(){gi()}})}function za(e){try{if(e!==null&&typeof e=="object"&&Ct in e)return e[Ct]}catch{}return e}function Yi(e,t){return Object.is(za(e),za(t))}var Va,Ba,qa,Ua;function Zi(){if(Va===void 0){Va=window,Ba=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;qa=sr(t,"firstChild").get,Ua=sr(t,"nextSibling").get,ga(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),ga(r)&&(r.__t=void 0)}}function Ft(e=""){return document.createTextNode(e)}function cn(e){return qa.call(e)}function qr(e){return Ua.call(e)}function d(e,t){return cn(e)}function ze(e,t=!1){{var r=cn(e);return r instanceof Comment&&r.data===""?qr(r):r}}function _(e,t=1,r=!1){let a=e;for(;t--;)a=qr(a);return a}function Xi(e){e.textContent=""}function Ja(){return!1}function el(e,t,r){return document.createElementNS(ka,e,void 0)}let Ha=!1;function tl(){Ha||(Ha=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function fn(e){var t=W,r=Z;Qe(null),bt(null);try{return e()}finally{Qe(t),bt(r)}}function Ga(e,t,r,a=r){e.addEventListener(t,()=>fn(r));const s=e.__on_r;s?e.__on_r=()=>{s(),a(!0)}:e.__on_r=()=>a(!0),tl()}function Wa(e){Z===null&&(W===null&&vi(),di()),Zt&&fi()}function rl(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function gt(e,t,r){var a=Z;a!==null&&(a.f&De)!==0&&(e|=De);var s={ctx:ne,deps:null,nodes:null,f:e|ye|Ge,first:null,fn:t,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{pr(s)}catch(l){throw Ae(s),l}else t!==null&&ot(s);var i=s;if(r&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&kr)===0&&(i=i.first,(e&Nt)!==0&&(e&Sr)!==0&&i!==null&&(i.f|=Sr)),i!==null&&(i.parent=a,a!==null&&rl(i,a),W!==null&&(W.f&he)!==0&&(e&ir)===0)){var c=W;(c.effects??=[]).push(i)}return s}function Jn(){return W!==null&&!ut}function dn(e){const t=gt(Dr,null,!1);return ie(t,de),t.teardown=e,t}function Hn(e){Wa();var t=Z.f,r=!W&&(t&it)!==0&&(t&lr)===0;if(r){var a=ne;(a.e??=[]).push(e)}else return Ka(e)}function Ka(e){return gt(jr|xa,e,!1)}function nl(e){return Wa(),gt(Dr|xa,e,!0)}function al(e){Kt.ensure();const t=gt(ir|kr,e,!0);return(r={})=>new Promise(a=>{r.outro?dr(t,()=>{Ae(t),a(void 0)}):(Ae(t),a(void 0))})}function Qa(e){return gt(jr,e,!1)}function mt(e,t){var r=ne,a={effect:null,ran:!1,deps:e};r.l.$.push(a),a.effect=Ur(()=>{e(),!a.ran&&(a.ran=!0,y(t))})}function Rr(){var e=ne;Ur(()=>{for(var t of e.l.$){t.deps();var r=t.effect;(r.f&de)!==0&&r.deps!==null&&ie(r,We),Pr(r)&&pr(r),t.ran=!1}})}function sl(e){return gt(jn|kr,e,!0)}function Ur(e,t=0){return gt(Dr|t,e,!0)}function G(e,t=[],r=[],a=[]){qi(a,t,r,s=>{gt(Dr,()=>e(...s.map(n)),!0)})}function Gn(e,t=0){var r=gt(Nt|t,e,!0);return r}function Ke(e){return gt(it|kr,e,!0)}function Ya(e){var t=e.teardown;if(t!==null){const r=Zt,a=W;rs(!0),Qe(null);try{t.call(null)}finally{rs(r),Qe(a)}}}function Wn(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const s=r.ac;s!==null&&fn(()=>{s.abort(ur)});var a=r.next;(r.f&ir)!==0?r.parent=null:Ae(r,t),r=a}}function il(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&it)===0&&Ae(t),t=r}}function Ae(e,t=!0){var r=!1;(t||(e.f&wa)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(ll(e.nodes.start,e.nodes.end),r=!0),Wn(e,t&&!r),Jr(e,0),ie(e,Rt);var a=e.nodes&&e.nodes.t;if(a!==null)for(const i of a)i.stop();Ya(e);var s=e.parent;s!==null&&s.first!==null&&Za(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function ll(e,t){for(;e!==null;){var r=e===t?null:qr(e);e.remove(),e=r}}function Za(e){var t=e.parent,r=e.prev,a=e.next;r!==null&&(r.next=a),a!==null&&(a.prev=r),t!==null&&(t.first===e&&(t.first=a),t.last===e&&(t.last=r))}function dr(e,t,r=!0){var a=[];Xa(e,a,!0);var s=()=>{r&&Ae(e),t&&t()},i=a.length;if(i>0){var c=()=>--i||s();for(var l of a)l.out(c)}else s()}function Xa(e,t,r){if((e.f&De)===0){e.f^=De;var a=e.nodes&&e.nodes.t;if(a!==null)for(const l of a)(l.is_global||r)&&t.push(l);for(var s=e.first;s!==null;){var i=s.next,c=(s.f&Sr)!==0||(s.f&it)!==0&&(e.f&Nt)!==0;Xa(s,t,c?r:!1),s=i}}}function Kn(e){es(e,!0)}function es(e,t){if((e.f&De)!==0){e.f^=De,(e.f&de)===0&&(ie(e,ye),ot(e));for(var r=e.first;r!==null;){var a=r.next,s=(r.f&Sr)!==0||(r.f&it)!==0;es(r,s?t:!1),r=a}var i=e.nodes&&e.nodes.t;if(i!==null)for(const c of i)(c.is_global||t)&&c.in()}}function ts(e,t){if(e.nodes)for(var r=e.nodes.start,a=e.nodes.end;r!==null;){var s=r===a?null:qr(r);t.append(r),r=s}}let vn=!1,Zt=!1;function rs(e){Zt=e}let W=null,ut=!1;function Qe(e){W=e}let Z=null;function bt(e){Z=e}let Ye=null;function ol(e){W!==null&&(Ye===null?Ye=[e]:Ye.push(e))}let Me=null,Ve=0,Ze=null;function ul(e){Ze=e}let ns=1,vr=0,_r=vr;function as(e){_r=e}function ss(){return++ns}function Pr(e){var t=e.f;if((t&ye)!==0)return!0;if(t&he&&(e.f&=~or),(t&We)!==0){for(var r=e.deps,a=r.length,s=0;s<a;s++){var i=r[s];if(Pr(i)&&Fa(i),i.wv>e.wv)return!0}(t&Ge)!==0&&lt===null&&ie(e,de)}return!1}function is(e,t,r=!0){var a=e.reactions;if(a!==null&&!(Ye!==null&&xr.call(Ye,e)))for(var s=0;s<a.length;s++){var i=a[s];(i.f&he)!==0?is(i,t,!1):t===i&&(r?ie(i,ye):(i.f&de)!==0&&ie(i,We),ot(i))}}function ls(e){var t=Me,r=Ve,a=Ze,s=W,i=Ye,c=ne,l=ut,o=_r,v=e.f;Me=null,Ve=0,Ze=null,W=(v&(it|ir))===0?e:null,Ye=null,$r(e.ctx),ut=!1,_r=++vr,e.ac!==null&&(fn(()=>{e.ac.abort(ur)}),e.ac=null);try{e.f|=On;var h=e.fn,w=h();e.f|=lr;var g=e.deps,S=Y?.is_fork;if(Me!==null){var x;if(S||Jr(e,Ve),g!==null&&Ve>0)for(g.length=Ve+Me.length,x=0;x<Me.length;x++)g[Ve+x]=Me[x];else e.deps=g=Me;if(Jn()&&(e.f&Ge)!==0)for(x=Ve;x<g.length;x++)(g[x].reactions??=[]).push(e)}else!S&&g!==null&&Ve<g.length&&(Jr(e,Ve),g.length=Ve);if(zr()&&Ze!==null&&!ut&&g!==null&&(e.f&(he|We|ye))===0)for(x=0;x<Ze.length;x++)is(Ze[x],e);if(s!==null&&s!==e){if(vr++,s.deps!==null)for(let P=0;P<r;P+=1)s.deps[P].rv=vr;if(t!==null)for(const P of t)P.rv=vr;Ze!==null&&(a===null?a=Ze:a.push(...Ze))}return(e.f&Gt)!==0&&(e.f^=Gt),w}catch(P){return Na(P)}finally{e.f^=On,Me=t,Ve=r,Ze=a,W=s,Ye=i,$r(c),ut=l,_r=o}}function cl(e,t){let r=t.reactions;if(r!==null){var a=ri.call(r,e);if(a!==-1){var s=r.length-1;s===0?r=t.reactions=null:(r[a]=r[s],r.pop())}}if(r===null&&(t.f&he)!==0&&(Me===null||!xr.call(Me,t))){var i=t;(i.f&Ge)!==0&&(i.f^=Ge,i.f&=~or),zn(i),Ki(i),Jr(i,0)}}function Jr(e,t){var r=e.deps;if(r!==null)for(var a=t;a<r.length;a++)cl(e,r[a])}function pr(e){var t=e.f;if((t&Rt)===0){ie(e,de);var r=Z,a=vn;Z=e,vn=!0;try{(t&(Nt|ba))!==0?il(e):Wn(e),Ya(e);var s=ls(e);e.teardown=typeof s=="function"?s:null,e.wv=ns;var i}finally{vn=a,Z=r}}}async function fl(){await Promise.resolve(),Oi()}function n(e){var t=e.f,r=(t&he)!==0;if(W!==null&&!ut){var a=Z!==null&&(Z.f&Rt)!==0;if(!a&&(Ye===null||!xr.call(Ye,e))){var s=W.deps;if((W.f&On)!==0)e.rv<vr&&(e.rv=vr,Me===null&&s!==null&&s[Ve]===e?Ve++:Me===null?Me=[e]:Me.push(e));else{(W.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[W]:xr.call(i,W)||i.push(W)}}}if(Zt&&Qt.has(e))return Qt.get(e);if(r){var c=e;if(Zt){var l=c.v;return((c.f&de)===0&&c.reactions!==null||us(c))&&(l=qn(c)),Qt.set(c,l),l}var o=(c.f&Ge)===0&&!ut&&W!==null&&(vn||(W.f&Ge)!==0),v=(c.f&lr)===0;Pr(c)&&(o&&(c.f|=Ge),Fa(c)),o&&!v&&(Oa(c),os(c))}if(lt?.has(e))return lt.get(e);if((e.f&Gt)!==0)throw e.v;return e.v}function os(e){if(e.f|=Ge,e.deps!==null)for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&he)!==0&&(t.f&Ge)===0&&(Oa(t),os(t))}function us(e){if(e.v===ge)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Qt.has(t)||(t.f&he)!==0&&us(t))return!0;return!1}function y(e){var t=ut;try{return ut=!0,e()}finally{ut=t}}function X(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ct in e)Qn(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&Ct in r&&Qn(r)}}}function Qn(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let a in e)try{Qn(e[a],t)}catch{}const r=Mn(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const a=ha(r);for(let s in a){const i=a[s].get;if(i)try{i.call(e)}catch{}}}}}const dl=["touchstart","touchmove"];function vl(e){return dl.includes(e)}const _n=Symbol("events"),_l=new Set,cs=new Set;function pl(e,t,r,a={}){function s(i){if(a.capture||Yn.call(t,i),!i.cancelBubble)return fn(()=>r?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Mt(()=>{t.addEventListener(e,s,a)}):t.addEventListener(e,s,a),s}function te(e,t,r,a,s){var i={capture:a,passive:s},c=pl(e,t,r,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&dn(()=>{t.removeEventListener(e,c,i)})}let fs=null;function Yn(e){var t=this,r=t.ownerDocument,a=e.type,s=e.composedPath?.()||[],i=s[0]||e.target;fs=e;var c=0,l=fs===e&&e[_n];if(l){var o=s.indexOf(l);if(o!==-1&&(t===document||t===window)){e[_n]=t;return}var v=s.indexOf(t);if(v===-1)return;o<=v&&(c=o)}if(i=s[c]||e.target,i!==t){ni(e,"currentTarget",{configurable:!0,get(){return i||r}});var h=W,w=Z;Qe(null),bt(null);try{for(var g,S=[];i!==null;){var x=i.assignedSlot||i.parentNode||i.host||null;try{var P=i[_n]?.[a];P!=null&&(!i.disabled||e.target===i)&&P.call(i,e)}catch(b){g?S.push(b):g=b}if(e.cancelBubble||x===t||x===null)break;i=x}if(g){for(let b of S)queueMicrotask(()=>{throw b});throw g}}finally{e[_n]=t,delete e.currentTarget,Qe(h),bt(w)}}}const hl=globalThis?.window?.trustedTypes&&globalThis.window.trustedTypes.createPolicy("svelte-trusted-html",{createHTML:e=>e});function gl(e){return hl?.createHTML(e)??e}function ml(e){var t=el("template");return t.innerHTML=gl(e.replaceAll("<!>","<!---->")),t.content}function pn(e,t){var r=Z;r.nodes===null&&(r.nodes={start:e,end:t,a:null,t:null})}function z(e,t){var r=(t&Ri)!==0,a=(t&Pi)!==0,s,i=!e.startsWith("<!>");return()=>{s===void 0&&(s=ml(i?e:"<!>"+e),r||(s=cn(s)));var c=a||Ba?document.importNode(s,!0):s.cloneNode(!0);if(r){var l=cn(c),o=c.lastChild;pn(l,o)}else pn(c,c);return c}}function bl(e=""){{var t=Ft(e+"");return pn(t,t),t}}function Xe(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Ft();return e.append(t,r),pn(t,r),e}function I(e,t){e!==null&&e.before(t)}function E(e,t){var r=t==null?"":typeof t=="object"?`${t}`:t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=`${r}`)}function yl(e,t){return wl(e,t)}const hn=new Map;function wl(e,{target:t,anchor:r,props:a={},events:s,context:i,intro:c=!0,transformError:l}){Zi();var o=void 0,v=al(()=>{var h=r??t.appendChild(Ft());Vi(h,{pending:()=>{}},S=>{It({});var x=ne;i&&(x.c=i),s&&(a.$$events=s),o=e(S,a)||{},At()},l);var w=new Set,g=S=>{for(var x=0;x<S.length;x++){var P=S[x];if(!w.has(P)){w.add(P);var b=vl(P);for(const C of[t,document]){var $=hn.get(C);$===void 0&&($=new Map,hn.set(C,$));var V=$.get(P);V===void 0?(C.addEventListener(P,Yn,{passive:b}),$.set(P,1)):$.set(P,V+1)}}}};return g(an(_l)),cs.add(g),()=>{for(var S of w)for(const b of[t,document]){var x=hn.get(b),P=x.get(S);--P==0?(b.removeEventListener(S,Yn),x.delete(S),x.size===0&&hn.delete(b)):x.set(S,P)}cs.delete(g),h!==r&&h.parentNode?.removeChild(h)}});return xl.set(o,v),o}let xl=new WeakMap;class Sl{anchor;#t=new Map;#l=new Map;#e=new Map;#i=new Set;#n=!0;constructor(t,r=!0){this.anchor=t,this.#n=r}#s=()=>{var t=Y;if(this.#t.has(t)){var r=this.#t.get(t),a=this.#l.get(r);if(a)Kn(a),this.#i.delete(r);else{var s=this.#e.get(r);s&&(this.#l.set(r,s.effect),this.#e.delete(r),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),a=s.effect)}for(const[i,c]of this.#t){if(this.#t.delete(i),i===t)break;const l=this.#e.get(c);l&&(Ae(l.effect),this.#e.delete(c))}for(const[i,c]of this.#l){if(i===r||this.#i.has(i))continue;const l=()=>{if(Array.from(this.#t.values()).includes(i)){var v=document.createDocumentFragment();ts(c,v),v.append(Ft()),this.#e.set(i,{effect:c,fragment:v})}else Ae(c);this.#i.delete(i),this.#l.delete(i)};this.#n||!a?(this.#i.add(i),dr(c,l,!1)):l()}}};#r=t=>{this.#t.delete(t);const r=Array.from(this.#t.values());for(const[a,s]of this.#e)r.includes(a)||(Ae(s.effect),this.#e.delete(a))};ensure(t,r){var a=Y,s=Ja();if(r&&!this.#l.has(t)&&!this.#e.has(t))if(s){var i=document.createDocumentFragment(),c=Ft();i.append(c),this.#e.set(t,{effect:Ke(()=>r(c)),fragment:i})}else this.#l.set(t,Ke(()=>r(this.anchor)));if(this.#t.set(a,t),s){for(const[l,o]of this.#l)l===t?a.unskip_effect(o):a.skip_effect(o);for(const[l,o]of this.#e)l===t?a.unskip_effect(o.effect):a.skip_effect(o.effect);a.oncommit(this.#s),a.ondiscard(this.#r)}else this.#s()}}function le(e,t,r=!1){var a=new Sl(e),s=r?Sr:0;function i(c,l){a.ensure(c,l)}Gn(()=>{var c=!1;t((l,o=0)=>{c=!0,i(o,l)}),c||i(!1,null)},s)}function et(e,t){return t}function kl(e,t,r){for(var a=[],s=t.length,i,c=t.length,l=0;l<s;l++){let w=t[l];dr(w,()=>{if(i){if(i.pending.delete(w),i.done.add(w),i.pending.size===0){var g=e.outrogroups;Zn(an(i.done)),g.delete(i),g.size===0&&(e.outrogroups=null)}}else c-=1},!1)}if(c===0){var o=a.length===0&&r!==null;if(o){var v=r,h=v.parentNode;Xi(h),h.append(v),e.items.clear()}Zn(t,!o)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function Zn(e,t=!0){for(var r=0;r<e.length;r++)Ae(e[r],t)}var ds;function tt(e,t,r,a,s,i=null){var c=e,l=new Map,o=(t&Sa)!==0;if(o){var v=e;c=v.appendChild(Ft())}var h=null,w=Ie(()=>{var $=r();return nn($)?$:$==null?[]:an($)}),g,S=!0;function x(){b.fallback=h,El(b,g,c,t,a),h!==null&&(g.length===0?(h.f&Pt)===0?Kn(h):(h.f^=Pt,Gr(h,null,c)):dr(h,()=>{h=null}))}var P=Gn(()=>{g=n(w);for(var $=g.length,V=new Set,C=Y,F=Ja(),B=0;B<$;B+=1){var R=g[B],L=a(R,B),A=S?null:l.get(L);A?(A.v&&Tr(A.v,R),A.i&&Tr(A.i,B),F&&C.unskip_effect(A.e)):(A=$l(l,S?c:ds??=Ft(),R,L,B,s,t,r),S||(A.e.f|=Pt),l.set(L,A)),V.add(L)}if($===0&&i&&!h&&(S?h=Ke(()=>i(c)):(h=Ke(()=>i(ds??=Ft())),h.f|=Pt)),$>V.size&&ci(),!S)if(F){for(const[ae,U]of l)V.has(ae)||C.skip_effect(U.e);C.oncommit(x),C.ondiscard(()=>{})}else x();n(w)}),b={effect:P,items:l,outrogroups:null,fallback:h};S=!1}function Hr(e){for(;e!==null&&(e.f&it)===0;)e=e.next;return e}function El(e,t,r,a,s){var i=(a&xi)!==0,c=t.length,l=e.items,o=Hr(e.effect.first),v,h=null,w,g=[],S=[],x,P,b,$;if(i)for($=0;$<c;$+=1)x=t[$],P=s(x,$),b=l.get(P).e,(b.f&Pt)===0&&(b.nodes?.a?.measure(),(w??=new Set).add(b));for($=0;$<c;$+=1){if(x=t[$],P=s(x,$),b=l.get(P).e,e.outrogroups!==null)for(const U of e.outrogroups)U.pending.delete(b),U.done.delete(b);if((b.f&Pt)!==0)if(b.f^=Pt,b===o)Gr(b,null,r);else{var V=h?h.next:o;b===e.effect.last&&(e.effect.last=b.prev),b.prev&&(b.prev.next=b.next),b.next&&(b.next.prev=b.prev),Xt(e,h,b),Xt(e,b,V),Gr(b,V,r),h=b,g=[],S=[],o=Hr(h.next);continue}if((b.f&De)!==0&&(Kn(b),i&&(b.nodes?.a?.unfix(),(w??=new Set).delete(b))),b!==o){if(v!==void 0&&v.has(b)){if(g.length<S.length){var C=S[0],F;h=C.prev;var B=g[0],R=g[g.length-1];for(F=0;F<g.length;F+=1)Gr(g[F],C,r);for(F=0;F<S.length;F+=1)v.delete(S[F]);Xt(e,B.prev,R.next),Xt(e,h,B),Xt(e,R,C),o=C,h=R,$-=1,g=[],S=[]}else v.delete(b),Gr(b,o,r),Xt(e,b.prev,b.next),Xt(e,b,h===null?e.effect.first:h.next),Xt(e,h,b),h=b;continue}for(g=[],S=[];o!==null&&o!==b;)(v??=new Set).add(o),S.push(o),o=Hr(o.next);if(o===null)continue}(b.f&Pt)===0&&g.push(b),h=b,o=Hr(b.next)}if(e.outrogroups!==null){for(const U of e.outrogroups)U.pending.size===0&&(Zn(an(U.done)),e.outrogroups?.delete(U));e.outrogroups.size===0&&(e.outrogroups=null)}if(o!==null||v!==void 0){var L=[];if(v!==void 0)for(b of v)(b.f&De)===0&&L.push(b);for(;o!==null;)(o.f&De)===0&&o!==e.fallback&&L.push(o),o=Hr(o.next);var A=L.length;if(A>0){var ae=(a&Sa)!==0&&c===0?r:null;if(i){for($=0;$<A;$+=1)L[$].nodes?.a?.measure();for($=0;$<A;$+=1)L[$].nodes?.a?.fix()}kl(e,L,ae)}}i&&Mt(()=>{if(w!==void 0)for(b of w)b.nodes?.a?.apply()})}function $l(e,t,r,a,s,i,c,l){var o=(c&yi)!==0?(c&Si)===0?N(r,!1,!1):fr(r):null,v=(c&wi)!==0?fr(s):null;return{v:o,i:v,e:Ke(()=>(i(t,o??r,v??s,l),()=>{e.delete(a)}))}}function Gr(e,t,r){if(e.nodes)for(var a=e.nodes.start,s=e.nodes.end,i=t&&(t.f&Pt)===0?t.nodes.start:r;a!==null;){var c=qr(a);if(i.before(a),a===s)return;a=c}}function Xt(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}function vs(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=vs(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function Tl(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=vs(e))&&(a&&(a+=" "),a+=t);return a}function _s(e){return typeof e=="object"?Tl(e):e??""}function Nl(e,t,r){var a=e==null?"":""+e;return a===""?null:a}function Rl(e,t){return e==null?null:String(e)}function rt(e,t,r,a,s,i){var c=e.__className;if(c!==r||c===void 0){var l=Nl(r);l==null?e.removeAttribute("class"):e.className=l,e.__className=r}return i}function Pl(e,t,r,a){var s=e.__style;if(s!==t){var i=Rl(t);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}return a}function ps(e,t,r=!1){if(e.multiple){if(t==null)return;if(!nn(t))return Ci();for(var a of e.options)a.selected=t.includes(Wr(a));return}for(a of e.options){var s=Wr(a);if(Yi(s,t)){a.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Cl(e){var t=new MutationObserver(()=>{ps(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),dn(()=>{t.disconnect()})}function gn(e,t,r=t){var a=new WeakSet,s=!0;Ga(e,"change",i=>{var c=i?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(c),Wr);else{var o=e.querySelector(c)??e.querySelector("option:not([disabled])");l=o&&Wr(o)}r(l),Y!==null&&a.add(Y)}),Qa(()=>{var i=t();if(e===document.activeElement){var c=ln??Y;if(a.has(c))return}if(ps(e,i,s),s&&i===void 0){var l=e.querySelector(":checked");l!==null&&(i=Wr(l),r(i))}e.__value=i,s=!1}),Cl(e)}function Wr(e){return"__value"in e?e.__value:e.value}const Il=Symbol("is custom element"),Al=Symbol("is html");function hs(e,t,r,a){var s=Ml(e);s[t]!==(s[t]=r)&&(r==null?e.removeAttribute(t):typeof r!="string"&&Ll(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Ml(e){return e.__attributes??={[Il]:e.nodeName.includes("-"),[Al]:e.namespaceURI===ka}}var gs=new Map;function Ll(e){var t=e.getAttribute("is")||e.nodeName,r=gs.get(t);if(r)return r;gs.set(t,r=[]);for(var a,s=e,i=Element.prototype;i!==s;){a=ha(s);for(var c in a)a[c].set&&r.push(c);s=Mn(s)}return r}function ms(e,t,r=t){var a=new WeakSet;Ga(e,"input",async s=>{var i=s?e.defaultValue:e.value;if(i=Xn(e)?ea(i):i,r(i),Y!==null&&a.add(Y),await fl(),i!==(i=t())){var c=e.selectionStart,l=e.selectionEnd,o=e.value.length;if(e.value=i??"",l!==null){var v=e.value.length;c===l&&l===o&&v>o?(e.selectionStart=v,e.selectionEnd=v):(e.selectionStart=c,e.selectionEnd=Math.min(l,v))}}}),y(t)==null&&e.value&&(r(Xn(e)?ea(e.value):e.value),Y!==null&&a.add(Y)),Ur(()=>{var s=t();if(e===document.activeElement){var i=ln??Y;if(a.has(i))return}Xn(e)&&s===ea(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function Xn(e){var t=e.type;return t==="number"||t==="range"}function ea(e){return e===""?null:+e}function bs(e,t,r){var a=sr(e,t);a&&a.set&&(e[t]=r,dn(()=>{e[t]=null}))}function ys(e,t){return e===t||e?.[Ct]===t}function Cr(e={},t,r,a){return Qa(()=>{var s,i;return Ur(()=>{s=i,i=[],y(()=>{e!==r(...i)&&(t(e,...i),s&&ys(r(...s),e)&&t(null,...s))})}),()=>{Mt(()=>{i&&ys(r(...i),e)&&t(null,...i)})}}),e}function er(e=!1){const t=ne,r=t.l.u;if(!r)return;let a=()=>X(t.s);if(e){let s=0,i={};const c=un(()=>{let l=!1;const o=t.s;for(const v in o)o[v]!==i[v]&&(i[v]=o[v],l=!0);return l&&s++,s});a=()=>n(c)}r.b.length&&nl(()=>{ws(t,a),Ln(r.b)}),Hn(()=>{const s=y(()=>r.m.map(li));return()=>{for(const i of s)typeof i=="function"&&i()}}),r.a.length&&Hn(()=>{ws(t,a),Ln(r.a)})}function ws(e,t){if(e.l.s)for(const r of e.l.s)n(r);t()}let mn=!1;function Fl(e){var t=mn;try{return mn=!1,[e(),mn]}finally{mn=t}}function ke(e,t,r,a){var s=!Er||(r&Ei)!==0,i=(r&Ti)!==0,c=(r&Ni)!==0,l=a,o=!0,v=()=>(o&&(o=!1,l=c?y(a):a),l),h;if(i){var w=Ct in e||oi in e;h=sr(e,t)?.set??(w&&t in e?C=>e[t]=C:void 0)}var g,S=!1;i?[g,S]=Fl(()=>e[t]):g=e[t],g===void 0&&a!==void 0&&(g=v(),h&&(s&&pi(),h(g)));var x;if(s?x=()=>{var C=e[t];return C===void 0?v():(o=!0,C)}:x=()=>{var C=e[t];return C!==void 0&&(l=void 0),C===void 0?l:C},s&&(r&$i)===0)return x;if(h){var P=e.$$legacy;return(function(C,F){return arguments.length>0?((!s||!F||P||S)&&h(F?x():C),C):x()})}var b=!1,$=((r&ki)!==0?un:Ie)(()=>(b=!1,x()));i&&n($);var V=Z;return(function(C,F){if(arguments.length>0){const B=F?n($):s&&i?Nr(C):C;return f($,B),b=!0,l!==void 0&&(l=B),C}return Zt&&b||(V.f&Rt)!==0?$.v:n($)})}function hr(e){ne===null&&Dn(),Er&&ne.l!==null?Dl(ne).m.push(e):Hn(()=>{const t=y(e);if(typeof t=="function")return t})}function xs(e){ne===null&&Dn(),hr(()=>()=>y(e))}function Ol(e,t,{bubbles:r=!1,cancelable:a=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:a})}function jl(){const e=ne;return e===null&&Dn(),(t,r,a)=>{const s=e.s.$$events?.[t];if(s){const i=nn(s)?s.slice():[s],c=Ol(t,r,a);for(const l of i)l.call(e.x,c);return!c.defaultPrevented}return!0}}function Dl(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const zl="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(zl),Mi();const Vl=(e,t,r)=>r&&typeof r=="object"?typeof r.message=="string"?r.message:typeof r.code=="string"?r.code:JSON.stringify(r):typeof r=="string"&&r.trim()?r:`${e} ${t}`,ue=async(e,t={})=>{const r=await fetch(e,t),a=await r.text(),s=a?JSON.parse(a):{};if(!r.ok)throw new Error(Vl(r.status,r.statusText,s?.detail));return s},Bl=()=>ue("/api/v1/capabilities"),ql=()=>ue("/api/v1/version"),Ul=()=>ue("/api/v1/playground/files"),Jl=e=>ue(`/api/v1/playground/files/${io(e)}`),Hl=e=>ue("/api/v1/playground/symbols",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({program:e})}),Gl=e=>ue("/api/v1/playground/jobs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({program:e,execute:!0,execution_strategy:"dask"})}),Wl=()=>ue("/api/v1/playground/jobs"),Ss=e=>ue(`/api/v1/playground/jobs/${encodeURIComponent(e)}`),ks=e=>ue(`/api/v1/playground/jobs/${encodeURIComponent(e)}`,{method:"DELETE"}),Kl=({program:e,nodeId:t="",variable:r="",path:a="",enqueue:s=!0})=>{const i={program:e,execution_strategy:"dask",variable:r,path:a,enqueue:s};return!r&&t&&(i.node_id=t),ue("/api/v1/playground/value",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})},Ql=({program:e,nodeId:t="",variable:r="",path:a="",offset:s=0,limit:i=64,enqueue:c=!0})=>{const l={program:e,execution_strategy:"dask",variable:r,path:a,offset:Math.max(0,Number(s||0)),limit:Math.max(1,Number(i||64)),enqueue:c};return!r&&t&&(l.node_id=t),ue("/api/v1/playground/value/page",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})},Yl=({limit:e=200,statusFilter:t="",nodeFilter:r=""}={})=>{const a=new URLSearchParams;return a.set("limit",`${e}`),t&&a.set("status_filter",t),r&&a.set("node_filter",r),ue(`/api/v1/results/store?${a.toString()}`)},Zl=(e,t="")=>{const r=t?`?path=${encodeURIComponent(t)}`:"";return ue(`/api/v1/results/store/${encodeURIComponent(e)}${r}`)},Xl=({nodeId:e,path:t="",offset:r=0,limit:a=64})=>{const s=new URLSearchParams;return t&&s.set("path",t),s.set("offset",`${Math.max(0,Number(r||0))}`),s.set("limit",`${Math.max(1,Number(a||64))}`),ue(`/api/v1/results/store/${encodeURIComponent(e)}/page?${s.toString()}`)},eo=()=>ue("/api/v1/docs/gallery"),to=()=>ue("/api/v1/testing/report"),ro=()=>ue("/api/v1/testing/jobs"),no=e=>ue(`/api/v1/testing/jobs/${encodeURIComponent(e)}`),ao=({profile:e,includePerf:t})=>ue("/api/v1/testing/jobs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:e,include_perf:t})}),Es=e=>ue(`/api/v1/testing/jobs/${encodeURIComponent(e)}`,{method:"DELETE"}),so=()=>ue("/api/v1/storage/stats"),io=e=>String(e||"").split("/").map(t=>encodeURIComponent(t)).join("/"),nt=e=>Number.isFinite(e)?e<.001?`${(e*1e3).toFixed(2)} ms`:`${e.toFixed(3)} s`:"-",$s=e=>Number.isFinite(e)?`${(e*100).toFixed(1)}%`:"-",Ee=e=>{if(!Number.isFinite(e)||e<0)return"-";const t=["B","KB","MB","GB","TB"];let r=e,a=0;for(;r>=1024&&a<t.length-1;)r/=1024,a+=1;return`${r.toFixed(a===0?0:2)} ${t[a]}`},ta=e=>{const t=e.filter(a=>Number.isFinite(a)).sort((a,s)=>a-s);if(!t.length)return NaN;const r=Math.floor(t.length/2);return t.length%2===1?t[r]:(t[r-1]+t[r])/2},Ts=e=>{const t=String(e||"idle").toLowerCase();return["running","completed","failed","killed"].includes(t)?t:"neutral"},Ns=e=>{const t=[],r=String(e||"").split(/\r?\n/).map(a=>a.trim()).filter(Boolean);for(const a of r){try{const s=JSON.parse(a);if(s&&typeof s=="object"){t.push(s);continue}}catch{}t.push({event:"raw",message:a})}return t},lo=(e,t)=>{const r=Array.isArray(e)?e:[],a={queued:0,running:0,completed:0,failed:0,killed:0,other:0,total:r.length};for(const l of r){const o=String(l?.status||"").toLowerCase();o in a?a[o]+=1:o==="success"?a.completed+=1:a.other+=1}const i=Ns(t?.log_tail||"").filter(l=>l&&l.event==="playground.node").slice(-360).map(l=>({status:String(l.status||"unknown"),cache_source:String(l.cache_source||"-"),duration_s:Number(l.duration_s||0),operator:String(l.operator||"-"),node_id:String(l.node_id||"")})),c=r.slice(0,36).map(l=>({id:String(l.job_id||""),status:String(l.status||"unknown"),created_at:String(l.created_at||""),started_at:String(l.started_at||""),finished_at:String(l.finished_at||""),wall_time_s:Number(l?.metrics?.wall_time_s||0),strategy:String(l?.request?.execution_strategy||"dask"),kind:String(l?.request?.job_kind||"run")}));return{generated_at:Date.now(),counts:a,jobs:c,node_events:i,active_job_id:t?.job_id?String(t.job_id):""}},ra=e=>{const a=((e?.result||{})?.execution||{}).cache_summary||{},s=String(e?.log_tail||""),i=Ns(s),c=i.filter(v=>v.event==="playground.node"),l=c.length?c:i.filter(v=>v.event!=="raw"),o=`computed ${Number(a.computed||0)} | cached(store) ${Number(a.cached_store||0)} | cached(local) ${Number(a.cached_local||0)} | failed ${Number(a.failed||0)} | events ${Number(a.events_stored||c.length)}/${Number(a.events_total||c.length)}`;return{raw:s,summaryText:o,rows:l.slice(-220).reverse()}},oo=({precomputedPrintTargets:e=[],latestGoalResults:t=[],precomputedSymbolTable:r={},latestSymbolTable:a={}})=>{const s=[],i=new Set,c=o=>{const v=`${o.kind}:${o.label}:${o.nodeId}`;i.has(v)||(i.add(v),s.push(o))};for(const o of e)o?.node_id&&c({kind:"print",label:String(o.name||"print"),nodeId:String(o.node_id)});for(const o of t)!o||o.operation!=="print"||!o.node_id||c({kind:"print",label:String(o.name||"print"),nodeId:String(o.node_id)});const l=Object.keys(r||{}).length>0?r:a;for(const[o,v]of Object.entries(l||{}))!v||typeof v!="string"||c({kind:"variable",label:String(o),nodeId:v});return s},Rs=e=>{const t=e&&typeof e=="object"?e.execution_errors:null;if(t&&typeof t=="object")return t;const r=e?.diagnostics?.execution_errors;return r&&typeof r=="object"?r:{}},uo=e=>{const t=e&&typeof e=="object"?e.execution_error_details:null;if(t&&typeof t=="object")return t;const r=e?.diagnostics?.execution_error_details;return r&&typeof r=="object"?r:{}},Ps=e=>{const t=Object.entries(e||{});return t.length?t.map(([r,a])=>`${String(r).slice(0,12)}: ${String(a)}`).join(`
`):"none"},co=(e,t)=>{const r=Object.entries(e||{});if(!r.length)return"";const a=(s,i=120)=>{const c=String(s??"");return c.length<=i?c:`${c.slice(0,i)}...`};return r.map(([s,i])=>{const c=i?.operator?String(i.operator):"unknown",l=Array.isArray(i?.args)?i.args.map(b=>a(b)).join(", "):"",o=i&&typeof i.kwargs=="object"&&i.kwargs?Object.entries(i.kwargs).map(([b,$])=>`${String(b)}=${a($)}`).join(", "):"",v=i&&typeof i.attrs=="object"&&i.attrs?a(JSON.stringify(i.attrs)):"",h=i?.kind?` kind=${String(i.kind)}`:"",w=i?.output_kind?` output=${String(i.output_kind)}`:"",g=t?.[s]?String(t[s]):"",S=o?`${c}(${l}${l?", ":""}${o})`:`${c}(${l})`,x=v&&v!=="{}"?` attrs=${v}`:"",P=g?` error=${g}`:"";return`${String(s).slice(0,12)}: ${S}${x}${h}${w}${P}`}).join(`
`)},fo=(e,t)=>{const r=String(e.node_id||t.nodeId||""),a=e.path||t.path||"",s=String(e.compute_status||e.status||"failed"),i=[`node: ${r||"-"}`,`path: ${a||"/"}`,`status: ${s}`],c=String(e.store_status||e?.diagnostics?.store_status||"missing");i.push(`store: ${c}`),e.error&&i.push(`error: ${String(e.error)}`),e.job_error&&i.push(`job_error: ${String(e.job_error)}`),e.store_error&&i.push(`store_error: ${String(e.store_error)}`);const l=e?.diagnostics;l&&typeof l=="object"&&(l.job_error&&!e.job_error&&i.push(`job_error: ${String(l.job_error)}`),l.store_error&&!e.store_error&&i.push(`store_error: ${String(l.store_error)}`));const o=Rs(e);Object.keys(o).length&&(i.push("execution_errors:"),i.push(Ps(o)));const v=co(uo(e),o);return v&&(i.push("failed_operations:"),i.push(v)),i.join(`
`)},vo=e=>{if(!e||typeof e!="object")return"value available";const t=String(e.vox_type||"value"),r=e.summary&&typeof e.summary=="object"?e.summary:{};return["integer","number","boolean"].includes(t)?`${t}: ${r.value}`:t==="string"?`string(${r.length||0}): ${r?.value||""}`:t==="ndarray"?`ndarray ${(r.shape||[]).join("x")} ${r.dtype||""}`.trim():["image2d","volume3d"].includes(t)?`${t} ${(r.size||[]).join("x")} ${r.pixel_id||""}`.trim():t==="sequence"?`sequence length=${r.length||0}`:t==="mapping"?`mapping length=${r.length||0}`:t},bn=/[A-Za-z0-9_.$+\-*/<>=!?~^%:&|]/,_o=(e,t)=>{if(!e||!Number.isInteger(t)||t<0)return"";const r=Math.max(0,Math.min(t,e.length));let a=r,s=r;for(;a>0&&bn.test(e[a-1]);)a-=1;for(;s<e.length&&bn.test(e[s]);)s+=1;return e.slice(a,s).trim().replace(/^[^A-Za-z0-9_.$+\-*/<>=!?~^%:&|]+|[^A-Za-z0-9_.$+\-*/<>=!?~^%:&|]+$/g,"")},po=(e,t)=>{if(!e||!Number.isInteger(t)||t<0)return{token:"",start:0,end:0};const r=Math.max(0,Math.min(t,e.length));let a=r,s=r;for(;a>0&&bn.test(e[a-1]);)a-=1;for(;s<e.length&&bn.test(e[s]);)s+=1;return{token:e.slice(a,s).trim().replace(/^[^A-Za-z0-9_.$+\-*/<>=!?~^%:&|]+|[^A-Za-z0-9_.$+\-*/<>=!?~^%:&|]+$/g,""),start:a,end:s}},ho=e=>e?!/[A-Za-z0-9_$]/.test(e):!1,go=(e,t)=>{const r=Math.max(0,Math.min(Number(t||0),e.length));let a=r,s=r;for(;a>0&&e[a-1]!==`
`;)a-=1;for(;s<e.length&&e[s]!==`
`;)s+=1;const i=e.slice(a,s).trim();return i?i.length<=140?i:`${i.slice(0,137)}...`:""},mo=(e,t,r)=>{const a=e.value||"",s=e.getBoundingClientRect();if(t<s.left||t>s.right||r<s.top||r>s.bottom)return null;const i=window.getComputedStyle(e),c=i.font||`${i.fontSize} ${i.fontFamily}`,l=Number.parseFloat(i.lineHeight)||Number.parseFloat(i.fontSize)*1.5,o=Number.parseFloat(i.paddingLeft)||0,v=Number.parseFloat(i.paddingTop)||0,h=document.createElement("span");h.style.position="absolute",h.style.visibility="hidden",h.style.whiteSpace="pre",h.style.font=c,h.textContent="MMMMMMMMMM",document.body.appendChild(h);const w=Math.max(1,h.getBoundingClientRect().width/10);h.remove();const g=t-s.left+e.scrollLeft-o,S=r-s.top+e.scrollTop-v,x=Math.max(0,Math.floor(S/l)),P=Math.max(0,Math.floor(g/w)),b=a.split(`
`),$=Math.min(x,Math.max(0,b.length-1));let V=0;for(let C=0;C<$;C+=1)V+=b[C].length+1;return V+=Math.min(P,b[$].length),Math.min(V,a.length)},bo=(e,t,r,a)=>{if(!e)return"";const s=[];let i=0;for(;i<e.length;){const c=e[i];if(/[A-Za-z_.$]/.test(c)){let l=i+1;for(;l<e.length&&/[A-Za-z0-9_.$]/.test(e[l]);)l+=1;const o=e.slice(i,l);if(t(o)){const v=encodeURIComponent(o);s.push(`<button type="button" class="editor-token-hit" data-token="${a(v)}" tabindex="-1" title="Inspect ${a(o)}">${r(o)}</button>`)}else s.push(r(o));i=l;continue}s.push(r(c)),i+=1}return s.join("")},yo=e=>String(e).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;"),wo=e=>String(e).replaceAll("&","&amp;").replaceAll('"',"&quot;").replaceAll("'","&#39;").replaceAll("<","&lt;").replaceAll(">","&gt;");var xo=z("<span> </span>");function Cs(e,t){It(t,!1);let r=ke(t,"value",8,"idle"),a=ke(t,"extraClass",8,"");er();var s=xo(),i=d(s);G((c,l)=>{rt(s,1,c),E(i,l)},[()=>_s((X(Ts),X(r()),X(a()),y(()=>`chip ${Ts(r())} ${a()}`.trim()))),()=>(X(r()),y(()=>String(r()||"idle").toLowerCase()))]),I(e,s),At()}var So=z("<option> </option>"),ko=z("<option> </option>"),Eo=z('<div id="programDiagnostics" class="inline-error"> </div>'),$o=z('<div id="runError" class="inline-error"> </div>'),To=z('<div class="muted"> </div>'),No=z('<div class="muted">No jobs executed yet.</div>'),Ro=z('<button type="button"> </button>'),Po=z("<span> </span>"),Co=z('<button class="btn btn-danger btn-small" type="button">Kill</button>'),Io=z('<article class="job-item"><div class="job-row"><strong> </strong> <!></div> <div class="job-row"><span> </span> <span> </span></div> <div class="job-row"><span> </span> <div class="row gap-s"><button class="btn btn-ghost btn-small" type="button">Open</button> <!></div></div></article>'),Ao=z("<option>No print labels or variables available</option>"),Mo=z("<option> </option>"),Lo=z('<div class="muted">No node events available yet. Raw log is shown below.</div>'),Fo=z('<article class="table-like-row"><div class="name"><span class="mini-chip"> </span> </div> <div class="detail"> <!></div></article>'),Oo=z('<article class="table-like-row"><div class="name"> </div> <div class="detail"> </div></article>'),jo=z(`<section id="tab-playground"><div class="grid-two"><article class="card editor-card"><div class="card-header"><h2>Interactive Playground</h2> <div class="row gap-s"><label class="inline-control" for="executionStrategy">Strategy</label> <select id="executionStrategy" class="select" disabled=""><option selected="">dask</option></select></div></div> <div id="editorShell" class="editor-shell"><textarea id="programInput" class="code-input" spellcheck="false"></textarea> <pre class="editor-token-overlay" aria-hidden="true"></pre></div> <div class="row controls"><label class="inline-control" for="programLibrarySelect">Program Library</label> <select id="programLibrarySelect" class="select"><!></select> <button id="loadProgramFileBtn" class="btn btn-ghost btn-small" type="button">Load from Library</button></div> <p id="programLibraryMeta" class="muted"> </p> <p class="muted">Variables are directly clickable in the editor. Hover changes appearance, click resolves on demand with
        priority even when no full run has been launched.</p> <div id="editorHoverPreview" class="editor-hover-preview muted"> </div> <!> <div class="row controls"><button id="runProgramBtn" class="btn btn-primary hidden" type="button">Run Program</button> <button id="killProgramBtn" class="btn btn-danger" type="button">Kill Running Job</button> <button id="clearOutputBtn" class="btn btn-ghost" type="button">Clear Output</button> <!></div> <!></article> <article class="card telemetry-card"><div class="card-header"><h2>Runtime Telemetry</h2> <button id="refreshJobsBtn" class="btn btn-ghost btn-small" type="button">Refresh</button></div> <div class="stats-grid"><div class="stat"><span class="label">Wall Time</span><strong id="metricWall"> </strong></div> <div class="stat"><span class="label">CPU Time</span><strong id="metricCpu"> </strong></div> <div class="stat"><span class="label">CPU Util.</span><strong id="metricCpuUtil"> </strong></div> <div class="stat"><span class="label">Peak Python Heap</span><strong id="metricHeapPeak"> </strong></div> <div class="stat"><span class="label">RSS Delta</span><strong id="metricRssDelta"> </strong></div> <div class="stat"><span class="label">Current Job</span><strong id="metricJobId"> </strong></div></div> <h3 class="subheading">Recent Jobs</h3> <div id="recentJobs" class="job-list"><!></div> <h3 class="subheading">Dask Queue Flux</h3> <div id="daskQueueViz" class="dask-queue-viz"></div> <h3 class="subheading">Focused Result</h3> <div class="row gap-s controls"><label class="inline-control" for="playResultSelector">Target</label> <select id="playResultSelector" class="select"><!></select></div> <p id="playResultMeta" class="muted"> </p> <div id="playResultInspector" class="result-inspector compact"></div> <h3 class="subheading">Execution Log</h3> <p id="playExecSummary" class="muted"> </p> <div id="playExecLog" class="table-like muted"><!></div> <pre id="playExecRaw" class="mono-scroll compact-log"> </pre></article></div> <div class="grid-two"><article class="card"><h2>Execution Result</h2> <pre id="executionOutput" class="mono-scroll"> </pre></article> <article class="card"><h2>Task Graph (Text)</h2> <pre id="taskGraphOutput" class="mono-scroll"> </pre></article></div></section>`);function Do(e,t){It(t,!1);const r=N();let a=ke(t,"active",8,!1),s=ke(t,"capabilities",24,()=>({}));const i="brats_flair_mean_threshold.imgql";let l=N(`import "simpleitk"

dataset_root = "tests/data/datasets/BraTS_2019_HGG"

// Recursively discover all BRaTS FLAIR volumes.
flair_paths = dir(dataset_root, "*_flair.nii.gz", true, true)

// Threshold each image at the midpoint between its min and max intensity.
mk_mask(path) =
  let img = ReadImage(path) in
  let mm = MinimumMaximum(img) in
  let lo = index(mm, 0) in
  let hi = index(mm, 1) in
  BinaryThreshold(img, (lo + hi) / 2, hi, 255, 0)

// Sequence of binary masks, one per discovered FLAIR image.
masks = map(mk_mask, flair_paths)`),o=N([]),v=N(""),h=N(""),w=!1,g=!1,S=N([]),x={},P=[],b=[],$={},V=0,C=null,F=N(""),B=N("idle"),R="",L=null,A=N([]),ae=N("-"),U=N("-"),we=N("-"),Le=N("-"),Be=N("-"),$e=N("-"),Te=N(""),Fe=N(""),pe=N("Click inspect on a variable to resolve it on demand."),re=N([]),se=N(-1),xe=N("No execution trace yet."),Se=N(""),ve=N([]),Ne=N(""),j=N("Hover a variable to see cached value status, or hover an operator to inspect expression context."),O="",D="",oe=0,K=N(""),me=N(null),Re=N(),ee=N(),Oe=N(),ct=N(),_e=null,qe=null,yt=null,wt=null,ft=null,Ot=null;const Ir=u=>{const p=Array.isArray(u)?u:[];return p.length?p.map(m=>{const M=m?.code?`[${m.code}] `:"",k=m?.message?String(m.message):"Static error",q=m?.symbol?` (symbol: ${m.symbol})`:"",H=m?.location?` @ ${m.location}`:"";return`${M}${k}${q}${H}`}).join(`
`):""},xt=u=>{const p=u?.metrics||{};f(ae,nt(Number(p.wall_time_s))),f(U,nt(Number(p.cpu_time_s))),f(we,$s(Number(p.cpu_utilization))),f(Le,Ee(Number(p.python_heap_peak_bytes))),f(Be,Ee(Number(p.ru_maxrss_delta_bytes))),f($e,u?.job_id?String(u.job_id).slice(0,12):"-")},dt=u=>{f(B,String(u||"idle").toLowerCase())},Ar=()=>{f(F,"")},vt=()=>{yt&&(clearInterval(yt),yt=null)},Ue=()=>{wt&&(clearInterval(wt),wt=null),ft=null},gr=()=>{const u=n(re)[n(se)];if(f(re,oo({precomputedPrintTargets:P,latestGoalResults:b,precomputedSymbolTable:x,latestSymbolTable:$})),!n(re).length){f(se,-1);return}if(u){const p=n(re).findIndex(m=>m.kind===u.kind&&m.label===u.label&&m.nodeId===u.nodeId);f(se,p>=0?p:0);return}f(se,0)},Kr=()=>{if(_e||!n(Oe))return;const u=window.VoxResultViewer?.ResultViewer;if(typeof u=="function"){_e=new u(n(Oe),{onNavigate:p=>{const m=n(re)[n(se)];m?.nodeId&&Mr(m.nodeId,p||"",{variable:m.kind==="variable"?m.label:""})},fetchPage:({nodeId:p,path:m,offset:M,limit:k})=>{const q=n(re)[n(se)],H=q?.kind==="variable"?q.label:"";return Ql({program:n(l),nodeId:p||q?.nodeId||"",variable:H,path:m||"",offset:Number(M||0),limit:Number(k||64),enqueue:!0})},onStatusClick:p=>{!p||p.status!=="failed"&&p.status!=="killed"||Yr(p,{nodeId:p.node_id||"",path:p.path||""})}});return}_e={setLoading:p=>{ht(Oe,n(Oe).textContent=p||"Loading...")},setError:p=>{ht(Oe,n(Oe).textContent=p||"Viewer error")},renderRecord:p=>{ht(Oe,n(Oe).textContent=JSON.stringify(p||{},null,2))}}},wn=()=>{if(qe||!n(ct))return;const u=window.VoxDaskQueueViz?.DaskQueueVisualizer;if(typeof u=="function"){qe=new u(n(ct));return}qe={render:p=>{const m=p?.counts||{};ht(ct,n(ct).textContent=`queue: queued ${Number(m.queued||0)} | running ${Number(m.running||0)} | completed ${Number(m.completed||0)} | failed ${Number(m.failed||0)}`)}}},jt=()=>{wn(),qe&&qe.render(lo(n(A),L))},xn=async u=>{const p=u?.result||{};f(Te,JSON.stringify(p,null,2)),f(Fe,p.task_graph||"(no task graph in payload)"),Array.isArray(p.goal_results)&&(b=p.goal_results),p.symbol_table&&typeof p.symbol_table=="object"&&($=p.symbol_table);const{raw:m,summaryText:M,rows:k}=ra(u);if(f(Se,m),f(xe,M),f(ve,k),gr(),n(re).length&&n(se)>=0){const q=n(re)[n(se)];await Mr(q.nodeId,"",{variable:q.kind==="variable"?q.label:""})}jt()},Sn=async()=>{if(s().playground_program_library===!1){f(o,[]),f(v,""),f(h,"Program library endpoint unavailable on this backend.");return}try{const u=await Ul();if(!u.available){f(o,[]),f(v,""),f(h,u.error||"Program library unavailable.");return}if(f(o,u.files||[]),!n(o).length){f(v,""),g=!0,f(h,`${u.load_dir} | 0 files`);return}const p=n(o).find(m=>{const M=String(m?.path||"");return M===i||M.endsWith(`/${i}`)});g?(!n(v)||!n(o).some(m=>m.path===n(v)))&&f(v,p?.path||n(o)[0].path):(f(v,p?.path||n(o)[0].path),g=!0),f(h,`${u.load_dir} | ${n(o).length} file(s)`)}catch(u){f(o,[]),f(v,""),f(h,`Unable to load library: ${u.message}`)}},kn=async()=>{if(n(v))try{const u=await Jl(n(v));f(l,u.content||""),f(h,`${u.path} | ${Ee(Number(u.bytes||0))}`),b=[],$={},qt(),await _t(),Ar()}catch(u){f(h,`Unable to load ${n(v)}: ${u.message}`)}},_t=async()=>{if(s().playground_symbols===!1)return;const u=V+1;if(V=u,!String(n(l)||"").trim()){x={},P=[],f(S,[]),gr(),qt();return}try{const p=await Hl(n(l));if(u!==V)return;const m=p?.available!==!1;x=m?p.symbol_table||{}:{},P=m?p.print_targets||[]:[],f(S,p?.diagnostics||[]),gr(),qt()}catch(p){if(u!==V)return;x={},P=[],f(S,[{code:"E_SYMBOLS",message:`Unable to refresh symbols: ${p.message}`}]),gr(),qt()}},na=()=>{C&&clearTimeout(C),C=setTimeout(()=>{_t()},260)},Qr=({nodeId:u="",variable:p="",path:m="",enqueue:M=!0})=>Kl({program:n(l),nodeId:u,variable:p,path:m,enqueue:M}),Yr=(u,p)=>{const m=String(u.node_id||p.nodeId||""),M=u.path||p.path||"",q=String(u.compute_status||u.status||"failed").toLowerCase()==="killed"?"killed":"failed",H=fo(u,p),be=String(u.error||"Value inspection failed.");if(_e.renderRecord({available:!1,node_id:m,status:q,runtime_version:u.runtime_version||"runtime",updated_at:u.updated_at||new Date().toISOString(),path:M,error:be,log_tail:u.log_tail||"",execution_errors:Rs(u),descriptor:{vox_type:"string",format_version:"voxpod/1",summary:{value:H,length:H.length,truncated:!1},navigation:{path:M||"",pageable:!1,can_descend:!1,default_page_size:64,max_page_size:512}},diagnostics:u.diagnostics||{}}),f(pe,`Unable to inspect ${m.slice(0,12)}${M?` @ ${M}`:""}: ${be}`),u.log_tail){const{raw:Et,summaryText:je,rows:$t}=ra({log_tail:u.log_tail,result:{execution:{cache_summary:u?.cache_summary||u?.diagnostics?.cache_summary||{}}}});f(Se,Et),f(xe,je),f(ve,$t);return}f(Se,""),f(xe,"No execution log available for this failure."),f(ve,[])},En=(u,p)=>{const m=String(u.materialization||""),M=String(u.compute_status||""),k=String(u.status||""),q=String(u.node_id||p.nodeId||""),H=u.path||p.path||"",be=u.job_id?String(u.job_id):"",Et=u?.descriptor&&typeof u.descriptor=="object"?String(u.descriptor.vox_type||""):"",je=u?.descriptor&&Et&&Et!=="unavailable"&&Et!=="error";if((m==="cached"||m==="computed"||k==="materialized")&&je){Ue(),_e.renderRecord(u),f(pe,`Inspecting ${q.slice(0,12)}${H?` @ ${H}`:""} | ${m||"materialized"} | status=${M||"materialized"}`);return}if(m==="failed"||M==="failed"||M==="killed"||k==="failed"){Ue(),Yr(u,p);return}if(m==="pending"||M==="queued"||M==="running"||M==="persisting"){je&&(M==="persisting"||m==="pending")?(_e.renderRecord({...u,available:!0,node_id:q,status:u.status||"materialized",runtime_version:u.runtime_version||"runtime",updated_at:u.updated_at||new Date().toISOString(),path:H}),f(pe,`Live preview ${q.slice(0,12)}${H?` @ ${H}`:""} | ${M||"pending"}${be?` | job ${be.slice(0,12)}`:""}`)):(_e.setLoading(`Value ${q.slice(0,12)} ${H||""} is ${M||"pending"}...`),f(pe,`Waiting for ${q.slice(0,12)}${H?` @ ${H}`:""} | ${M||"pending"}${be?` | job ${be.slice(0,12)}`:""}`)),wt||(ft={nodeId:q,variable:p.variable||"",path:H},wt=setInterval(async()=>{if(ft)try{const Tt=await Qr({nodeId:ft.nodeId,variable:ft.variable,path:ft.path,enqueue:!0});En(Tt,ft)}catch(Tt){_e.setError(`Polling value failed: ${Tt.message}`),Ue()}},900));return}Ue();const Ht=u.error||(m==="missing"?"Value is not materialized yet.":`Unable to inspect value (${m||M||"unknown"}).`);Yr({...u,error:Ht,compute_status:M||"failed",status:u.status||"failed"},p)},Mr=async(u,p="",m={})=>{Kr(),Ue();const M=String(m.variable||"");_e.setLoading(`Loading value for ${u} ...`);try{const k=await Qr({nodeId:u,variable:M,path:p,enqueue:m.enqueue!==!1});En(k,{nodeId:u,variable:M,path:p})}catch(k){Ue(),_e.setError(`Value lookup failed: ${k.message}`),f(pe,`Unable to inspect ${u.slice(0,12)}: ${k.message}`)}},Dt=async()=>{try{const u=await Wl();f(A,u.jobs||[]),f(Ne,""),!L&&n(A).length&&(L=n(A)[0]),jt()}catch(u){f(A,[]),f(Ne,`Failed to load jobs: ${u.message}`),jt()}},Zr=async u=>{L=u||null,dt(u?.status),xt(u),await xn(u),f(F,u?.error||""),await Dt()},mr=async()=>{if(R)try{const u=await Ss(R);L=u||null,dt(u.status),xt(u);const{raw:p,summaryText:m,rows:M}=ra(u);if(f(Se,p),f(xe,m),f(ve,M),jt(),u.status==="running")return;vt(),await Zr(u)}catch(u){vt(),dt("failed"),f(F,`Polling failed: ${u.message}`)}},Xr=async()=>{if(Ar(),await _t(),n(S).length){f(F,"Static diagnostics must be fixed before execution can start.");return}try{dt("running"),Ue(),f(Te,""),f(Fe,""),f(Se,""),f(ve,[]),f(xe,"Execution started. Waiting for log events..."),xt(null);const u=await Gl(n(l));R=u.job_id,f($e,String(u.job_id||"").slice(0,12)),vt(),yt=setInterval(mr,800),await mr()}catch(u){dt("failed"),f(F,u.message)}},aa=()=>{f(Te,""),f(Fe,""),f(F,""),xt(null),f(xe,"No execution log yet."),f(Se,""),f(ve,[]),b=[],$={},L=null,Ue(),f(pe,"Click inspect on a variable to resolve it on demand."),Kr(),_e.renderRecord(null),gr(),f(se,n(re).length?0:-1),jt()},sa=async()=>{if(R)try{const u=await ks(R);vt(),await Zr(u)}catch(u){f(F,`Kill failed: ${u.message}`)}},$n=async u=>{if(u)try{const p=await Ss(u);R=u,L=p||null,dt(p.status),xt(p),await xn(p),p.status==="running"&&(vt(),yt=setInterval(mr,800));const m=p?.result?.execution?.errors;(p.status==="failed"||p.status==="killed")&&m&&typeof m=="object"?f(F,[p.error||"Execution failed",Ps(m)].filter(Boolean).join(`
`)):f(F,p.error||"")}catch(p){f(F,`Unable to open ${u}: ${p.message}`)}},ia=async u=>{try{await ks(u),R===u&&(vt(),dt("killed")),await Dt()}catch(p){f(F,`Unable to kill ${u}: ${p.message}`)}},la=async()=>{const u=Number(n(se));if(!Number.isFinite(u)||(f(se,u),n(se)<0||n(se)>=n(re).length))return;const p=n(re)[n(se)];await Mr(p.nodeId,"",{variable:p.kind==="variable"?p.label:""})},zt=u=>x[u]||$[u]||"",Tn=()=>{!n(ee)||!n(Re)||(ht(ee,n(ee).scrollTop=n(Re).scrollTop),ht(ee,n(ee).scrollLeft=n(Re).scrollLeft))},en=u=>{if(!n(ee))return;const p=encodeURIComponent(String(u||""));n(ee).querySelectorAll(".editor-token-hit").forEach(m=>{m instanceof HTMLElement&&(u&&m.dataset.token===p?m.classList.add("is-active"):m.classList.remove("is-active"))})},Vt=u=>{f(j,u||"")},Bt=()=>{O="",D="",en(""),Vt("Hover a variable to see cached value status, or hover an operator to inspect expression context.")},tn=u=>{O=u||"",en(u||"")},qt=()=>{n(ee)&&(ht(ee,n(ee).innerHTML=bo(String(n(l)||""),zt,yo,wo)),Tn(),O&&en(O))},oa=async u=>{const p=zt(u);if(!p)return;Bt();const m=n(re).findIndex(M=>M.kind==="variable"&&M.label===u);m>=0&&f(se,m),await Mr(p,"",{variable:u})},Nn=async u=>{const p=oe+1;oe=p,Vt(`var ${u}: checking cache...`);try{const m=await Qr({variable:u,enqueue:!1});if(p!==oe||O!==u)return;const M=String(m.materialization||"");if(m.descriptor&&(M==="cached"||M==="computed")){Vt(`var ${u}: ${vo(m.descriptor)} (${M})`);return}if(M==="pending"||m.compute_status==="running"||m.compute_status==="queued"||m.compute_status==="persisting"){Vt(`var ${u}: running (${m.compute_status}). Click to focus/inspect.`);return}Vt(`var ${u}: not materialized yet. Click to compute on demand.`)}catch{if(p!==oe||O!==u)return;Vt(`var ${u}: click to compute on demand.`)}},ua=u=>{a()&&(n(me)&&(clearTimeout(n(me)),f(me,null)),f(me,setTimeout(()=>{const p=mo(n(Re),u.clientX,u.clientY);if(!Number.isInteger(p)){Bt();return}const m=po(n(l)||"",p);if(!m.token){Bt();return}const M=zt(m.token);if(!M&&!ho(m.token)){Bt();return}if(f(K,m.token),M){tn(m.token),D!==m.token&&(D=m.token,Nn(m.token));return}tn(""),D=m.token;const k=go(n(l)||"",m.start);Vt(k?`operator '${m.token}' in: ${k}`:`operator '${m.token}'`)},140)))},T=async u=>{if(!u)return!1;let p=zt(u)?u:"";if(!p){await _t();const m=_o(n(l)||"",Number(n(Re)?.selectionStart||0));p=zt(u)?u:zt(m)?m:"",!p&&n(K)&&zt(n(K))&&(p=n(K))}return p?(f(K,p),await oa(p),!0):!1},J=()=>{$={},b=[],qt(),na(),Bt()},ce=()=>{if(!n(ee))return;const u=k=>{k.target instanceof Element&&k.target.closest(".editor-token-hit")&&k.preventDefault()},p=k=>{const q=k.target instanceof Element?k.target.closest(".editor-token-hit"):null;if(!q)return;const H=decodeURIComponent(String(q.getAttribute("data-token")||""));H&&(f(K,H),tn(H),D!==H&&(D=H,Nn(H)))},m=k=>{!(k.target instanceof Element&&k.target.closest(".editor-token-hit"))||k.relatedTarget instanceof Element&&k.relatedTarget.closest(".editor-token-hit")||(f(K,""),Bt())},M=async k=>{const q=k.target instanceof Element?k.target.closest(".editor-token-hit"):null;if(!q)return;k.preventDefault();const H=decodeURIComponent(String(q.getAttribute("data-token")||""));H&&(await T(H),n(Re)?.focus({preventScroll:!0}))};return n(ee).addEventListener("mousedown",u),n(ee).addEventListener("mouseover",p),n(ee).addEventListener("mouseout",m),n(ee).addEventListener("click",M),()=>{n(ee).removeEventListener("mousedown",u),n(ee).removeEventListener("mouseover",p),n(ee).removeEventListener("mouseout",m),n(ee).removeEventListener("click",M)}},fe=async u=>{await $n(u)},Q=()=>{Ot||(Ot=setInterval(()=>{a()&&(Dt(),_t(),mr())},15e3))},Pe=()=>{Ot&&(clearInterval(Ot),Ot=null)};async function Je(u,p=!1){f(l,String(u||"")),$={},b=[],qt(),await _t(),p&&await Xr()}async function pt(){await Xr()}hr(()=>{Kr(),wn(),jt();const u=ce();return qt(),(async()=>(await Sn(),!w&&n(v)&&(w=!0,await kn()),await Promise.all([Dt(),_t()])))(),()=>{u?.()}}),xs(()=>{vt(),Ue(),Pe(),C&&clearTimeout(C),n(me)&&clearTimeout(n(me)),qe&&typeof qe.destroy=="function"&&qe.destroy(),_e&&typeof _e.destroy=="function"&&_e.destroy()}),mt(()=>n(S),()=>{f(r,Ir(n(S)))}),mt(()=>X(a()),()=>{a()?(Dt(),_t(),Q()):Pe()}),mt(()=>X(s()),()=>{s().playground_program_library===!1&&f(h,"Program library endpoint unavailable on this backend.")}),Rr();var Ut={loadProgram:Je,runCurrentProgram:pt};er();var at=jo(),tr=d(at),rr=d(tr),Jt=d(rr),nr=_(d(Jt),2),ar=_(d(nr),2),St=d(ar);St.value=St.__value="dask";var Rn=_(Jt,2),kt=d(Rn);Cr(kt,u=>f(Re,u),()=>n(Re));var ca=_(kt,2);Cr(ca,u=>f(ee,u),()=>n(ee));var Pn=_(Rn,2),Lr=_(d(Pn),2),br=d(Lr);{var Cn=u=>{var p=So(),m=d(p);p.value=p.__value="",G(()=>E(m,(X(s()),y(()=>s().playground_program_library===!1?"unavailable":"no .imgql files found")))),I(u,p)},mu=u=>{var p=Xe(),m=ze(p);tt(m,1,()=>n(o),et,(M,k)=>{var q=ko(),H=d(q),be={};G(()=>{E(H,(n(k),y(()=>n(k).path))),be!==(be=(n(k),y(()=>n(k).path)))&&(q.value=(q.__value=(n(k),y(()=>n(k).path)))??"")}),I(M,q)}),I(u,p)};le(br,u=>{n(o),y(()=>!n(o).length)?u(Cn):u(mu,!1)})}var As=_(Lr,2),Ms=_(Pn,2),bu=d(Ms),Ls=_(Ms,4),yu=d(Ls),Fs=_(Ls,2);{var wu=u=>{var p=Eo(),m=d(p);G(()=>E(m,n(r))),I(u,p)};le(Fs,u=>{n(r)&&u(wu)})}var Os=_(Fs,2),js=d(Os),fa=_(js,2),Ds=_(fa,2),xu=_(Ds,2);Cs(xu,{get value(){return n(B)}});var Su=_(Os,2);{var ku=u=>{var p=$o(),m=d(p);G(()=>E(m,n(F))),I(u,p)};le(Su,u=>{n(F)&&u(ku)})}var Eu=_(rr,2),zs=d(Eu),$u=_(d(zs),2),Vs=_(zs,2),Bs=d(Vs),Tu=_(d(Bs)),Nu=d(Tu),qs=_(Bs,2),Ru=_(d(qs)),Pu=d(Ru),Us=_(qs,2),Cu=_(d(Us)),Iu=d(Cu),Js=_(Us,2),Au=_(d(Js)),Mu=d(Au),Hs=_(Js,2),Lu=_(d(Hs)),Fu=d(Lu),Ou=_(Hs,2),ju=_(d(Ou)),Du=d(ju),Gs=_(Vs,4),zu=d(Gs);{var Vu=u=>{var p=To(),m=d(p);G(()=>E(m,n(Ne))),I(u,p)},Bu=u=>{var p=No();I(u,p)},qu=u=>{var p=Xe(),m=ze(p);tt(m,1,()=>n(A),et,(M,k)=>{const q=Ie(()=>(n(k),y(()=>String(n(k).status||"unknown")))),H=Ie(()=>n(q)==="failed"||n(q)==="killed");var be=Io(),Et=d(be),je=d(Et),$t=d(je),Ht=_(je,2);{var Tt=st=>{var He=Ro(),pa=d(He);G(()=>{rt(He,1,`chip ${n(q)} chip-clickable`),E(pa,n(q))}),te("click",He,()=>fe(n(k).job_id)),I(st,He)},rn=st=>{var He=Po(),pa=d(He);G(()=>{rt(He,1,`chip ${n(q)}`),E(pa,n(q))}),I(st,He)};le(Ht,st=>{n(H)?st(Tt):st(rn,!1)})}var Fr=_(Et,2),Or=d(Fr),An=d(Or),da=_(Or,2),va=d(da),yr=_(Fr,2),wr=d(yr),_a=d(wr),ic=_(wr,2),ti=d(ic),lc=_(ti,2);{var oc=st=>{var He=Co();te("click",He,()=>ia(n(k).job_id)),I(st,He)};le(lc,st=>{n(q)==="running"&&st(oc)})}G((st,He)=>{E($t,st),E(An,(n(k),y(()=>n(k)?.request?.execution_strategy||"dask"))),E(va,He),E(_a,(n(k),y(()=>n(k).created_at||"-")))},[()=>(n(k),y(()=>String(n(k).job_id||"").slice(0,12))),()=>(X(nt),n(k),y(()=>nt(Number(n(k)?.metrics?.wall_time_s))))]),te("click",ti,()=>$n(n(k).job_id)),I(M,be)}),I(u,p)};le(zu,u=>{n(Ne)?u(Vu):(n(A),y(()=>!n(A).length)?u(Bu,1):u(qu,!1))})}var Ws=_(Gs,4);Cr(Ws,u=>f(ct,u),()=>n(ct));var Ks=_(Ws,4),In=_(d(Ks),2),Uu=d(In);{var Ju=u=>{var p=Ao();p.value=p.__value="",I(u,p)},Hu=u=>{var p=Xe(),m=ze(p);tt(m,1,()=>n(re),et,(M,k,q)=>{var H=Mo(),be=d(H);H.value=H.__value=q,G(()=>E(be,(n(k),y(()=>n(k).kind==="print"?`print: ${n(k).label}`:`var: ${n(k).label}`)))),I(M,H)}),I(u,p)};le(Uu,u=>{n(re),y(()=>!n(re).length)?u(Ju):u(Hu,!1)})}var Qs=_(Ks,2),Gu=d(Qs),Ys=_(Qs,2);Cr(Ys,u=>f(Oe,u),()=>n(Oe));var Zs=_(Ys,4),Wu=d(Zs),Xs=_(Zs,2),Ku=d(Xs);{var Qu=u=>{var p=Lo();I(u,p)},Yu=u=>{var p=Xe(),m=ze(p);tt(m,1,()=>n(ve),et,(M,k)=>{var q=Xe(),H=ze(q);{var be=je=>{var $t=Fo(),Ht=d($t),Tt=d(Ht),rn=d(Tt),Fr=_(Tt),Or=_(Ht,2),An=d(Or),da=_(An);{var va=yr=>{var wr=bl();G(_a=>E(wr,`| ${_a??""}`),[()=>(n(k),y(()=>String(n(k).error)))]),I(yr,wr)};le(da,yr=>{n(k),y(()=>n(k).error)&&yr(va)})}G((yr,wr)=>{E(rn,(n(k),y(()=>n(k).status||"unknown"))),E(Fr,` ${n(k),y(()=>n(k).operator||"-")??""}`),E(An,`node=${yr??""} | source=${n(k),y(()=>n(k).cache_source||"-")??""} |
                  duration=${wr??""} ms `)},[()=>(n(k),y(()=>String(n(k).node_id||"").slice(0,12))),()=>(n(k),y(()=>(Number(n(k).duration_s||0)*1e3).toFixed(2)))]),I(je,$t)},Et=je=>{var $t=Oo(),Ht=d($t),Tt=d(Ht),rn=_(Ht,2),Fr=d(rn);G(Or=>{E(Tt,(n(k),y(()=>n(k).event||"event"))),E(Fr,Or)},[()=>(n(k),y(()=>n(k).message||n(k).error||JSON.stringify(n(k)).slice(0,180)))]),I(je,$t)};le(H,je=>{n(k),y(()=>n(k).event==="playground.node")?je(be):je(Et,!1)})}I(M,q)}),I(u,p)};le(Ku,u=>{n(ve),y(()=>!n(ve).length)?u(Qu):u(Yu,!1)})}var Zu=_(Xs,2),Xu=d(Zu),ec=_(tr,2),ei=d(ec),tc=_(d(ei),2),rc=d(tc),nc=_(ei,2),ac=_(d(nc),2),sc=d(ac);return G(()=>{rt(at,1,`panel ${a()?"active":""}`),Lr.disabled=(n(o),y(()=>!n(o).length)),As.disabled=(n(o),y(()=>!n(o).length)),E(bu,n(h)),E(yu,n(j)),fa.disabled=n(B)!=="running",E(Nu,n(ae)),E(Pu,n(U)),E(Iu,n(we)),E(Mu,n(Le)),E(Fu,n(Be)),E(Du,n($e)),In.disabled=(n(re),y(()=>!n(re).length)),E(Gu,n(pe)),E(Wu,n(xe)),E(Xu,n(Se)),E(rc,n(Te)),E(sc,n(Fe))}),ms(kt,()=>n(l),u=>f(l,u)),te("input",kt,J),te("mousemove",kt,ua),te("mouseleave",kt,()=>{f(K,""),Bt(),n(me)&&(clearTimeout(n(me)),f(me,null))}),te("scroll",kt,Tn),gn(Lr,()=>n(v),u=>f(v,u)),te("click",As,kn),te("click",js,Xr),te("click",fa,sa),te("click",Ds,aa),te("click",$u,Dt),gn(In,()=>n(se),u=>f(se,u)),te("change",In,la),I(e,at),bs(t,"loadProgram",Je),bs(t,"runCurrentProgram",pt),At(Ut)}var zo=z('<div class="inline-error"> </div>'),Vo=z('<div class="muted">No stored results found for current runtime.</div>'),Bo=z('<article><div class="job-row"><strong> </strong> <span> </span></div> <div class="job-row"><span> </span> <span> </span></div> <div class="job-row"><span> </span> <button class="btn btn-ghost btn-small" type="button">Inspect</button></div></article>'),qo=z('<section id="tab-results"><div class="grid-two"><article class="card"><div class="card-header"><h2>Stored Results</h2> <button id="refreshResultsBtn" class="btn btn-ghost btn-small" type="button">Refresh</button></div> <div class="row gap-s controls"><label class="inline-control" for="resultStatusFilter">Status</label> <select id="resultStatusFilter" class="select"><option>all</option><option>materialized</option><option>failed</option></select> <input id="resultSearchInput" class="input" type="search" placeholder="Filter by node id"/></div> <p id="resultListMeta" class="muted"> </p> <!> <div id="resultList" class="job-list"><!></div></article> <article class="card"><h2>Result Inspector</h2> <p class="muted">View values only from persisted store entries. Server-side save/export is intentionally disabled.</p> <div id="resultInspector" class="result-inspector"></div></article></div></section>');function Uo(e,t){It(t,!1);let r=ke(t,"active",8,!1),a=ke(t,"capabilities",24,()=>({})),s=N(""),i=N(""),c=N([]),l=N(""),o=N(""),v=N(""),h="",w=N(),g=null,S=null;const x=()=>{if(g)return;const j=window.VoxResultViewer?.ResultViewer;if(typeof j=="function"){g=new j(n(w),{onNavigate:O=>{n(v)&&P(n(v),O||"")},fetchPage:({nodeId:O,path:D,offset:oe,limit:K})=>Xl({nodeId:O||n(v),path:D||"",offset:Number(oe||0),limit:Number(K||64)}),onStatusClick:O=>{if(!O||O.status!=="failed"&&O.status!=="killed")return;const D=[`node: ${O.node_id||"-"}`,`path: ${O.path||"/"}`,`status: ${O.status||"failed"}`,O.error?`error: ${O.error}`:""].filter(Boolean);g.setError(D.join(`
`))}});return}g={setLoading:O=>{ht(w,n(w).textContent=O||"Loading...")},setError:O=>{ht(w,n(w).textContent=O||"Viewer error")},renderRecord:O=>{ht(w,n(w).textContent=JSON.stringify(O||{},null,2))}}},P=async(j,O="")=>{x(),f(v,j),h=O,g.setLoading(`Loading ${j}${O||""} ...`);try{const D=await Zl(j,O);g.renderRecord(D),f(o,"")}catch(D){g.setError(`Failed loading result ${j}: ${D.message}`)}},b=async()=>{if(x(),a().store_results_viewer===!1){f(c,[]),f(l,"Store results viewer unavailable on this backend."),f(o,""),g.setError("Store results endpoint unavailable.");return}try{const j=await Yl({limit:200,statusFilter:n(s),nodeFilter:n(i).trim()});if(!j.available){f(c,[]),f(l,j.error||"Store results unavailable."),g.setError(j.error||"Store results unavailable.");return}f(c,j.records||[]);const O=j.summary||{};if(f(l,`${Number(O.total||0)} total | ${Number(O.materialized||0)} materialized | ${Number(O.failed||0)} failed`),f(o,""),n(v)&&n(c).some(D=>D.node_id===n(v))){await P(n(v),h);return}n(c).length?await P(n(c)[0].node_id,""):(f(v,""),h="",g.renderRecord(null))}catch(j){f(c,[]),f(l,`Unable to load results: ${j.message}`),f(o,""),g.setError(`Unable to load result list: ${j.message}`)}},$=()=>{S&&clearTimeout(S),S=setTimeout(()=>{b()},260)},V=j=>{j.key==="Enter"&&b()};hr(()=>(x(),b(),()=>{S&&clearTimeout(S),g&&typeof g.destroy=="function"&&g.destroy()})),mt(()=>X(r()),()=>{r()&&b()}),Rr(),er();var C=qo(),F=d(C),B=d(F),R=d(B),L=_(d(R),2),A=_(R,2),ae=_(d(A),2),U=d(ae);U.value=U.__value="";var we=_(U);we.value=we.__value="materialized";var Le=_(we);Le.value=Le.__value="failed";var Be=_(ae,2),$e=_(A,2),Te=d($e),Fe=_($e,2);{var pe=j=>{var O=zo(),D=d(O);G(()=>E(D,n(o))),I(j,O)};le(Fe,j=>{n(o)&&j(pe)})}var re=_(Fe,2),se=d(re);{var xe=j=>{var O=Vo();I(j,O)},Se=j=>{var O=Xe(),D=ze(O);tt(D,1,()=>n(c),et,(oe,K)=>{var me=Bo(),Re=d(me),ee=d(Re),Oe=d(ee),ct=_(ee,2),_e=d(ct),qe=_(Re,2),yt=d(qe),wt=d(yt),ft=_(yt,2),Ot=d(ft),Ir=_(qe,2),xt=d(Ir),dt=d(xt),Ar=_(xt,2);G((vt,Ue)=>{rt(me,1,(n(v),n(K),y(()=>`job-item result-item ${n(v)===n(K).node_id?"active":""}`))),E(Oe,vt),rt(ct,1,(n(K),y(()=>`chip ${n(K).status}`))),E(_e,(n(K),y(()=>n(K).status))),E(wt,(n(K),y(()=>n(K).runtime_version||"-"))),E(Ot,Ue),E(dt,(n(K),y(()=>n(K).updated_at||"-")))},[()=>(n(K),y(()=>n(K).node_id.slice(0,16))),()=>(X(Ee),n(K),y(()=>Ee(Number(n(K).payload_bytes||0))))]),te("click",Ar,()=>P(n(K).node_id,"")),I(oe,me)}),I(j,O)};le(se,j=>{n(c),y(()=>!n(c).length)?j(xe):j(Se,!1)})}var ve=_(B,2),Ne=_(d(ve),4);Cr(Ne,j=>f(w,j),()=>n(w)),G(()=>{rt(C,1,`panel ${r()?"active":""}`),E(Te,n(l))}),te("click",L,b),gn(ae,()=>n(s),j=>f(s,j)),te("change",ae,b),ms(Be,()=>n(i),j=>f(i,j)),te("input",Be,$),te("keydown",Be,V),I(e,C),At()}var Jo=z("<option> </option>"),Ho=z('<div class="muted"> </div>'),Go=z('<div class="muted">No examples for selected module.</div>'),Wo=z('<article class="gallery-item"><h3> </h3> <div class="gallery-meta"><span class="mini-chip"> </span> <span class="mini-chip"> </span> <span class="mini-chip"> </span></div> <p class="muted"> </p> <pre class="gallery-code"> </pre> <div class="row gap-s"><button class="btn btn-primary btn-small" type="button">Load</button> <button class="btn btn-ghost btn-small" type="button">Run</button></div></article>'),Ko=z('<section id="tab-gallery"><article class="card"><div class="card-header"><h2>Progressive Example Gallery</h2> <div class="row gap-s"><label class="inline-control" for="moduleFilter">Module</label> <select id="moduleFilter" class="select"></select></div></div> <p class="muted">Gallery cards are generated from markdown directives in <code>doc/user/language-gallery.md</code> using <code>&lt;!-- vox:playground ... --&gt;</code> comments.</p> <div id="galleryCards" class="gallery-grid"><!></div></article></section>');function Qo(e,t){It(t,!1);const r=N();let a=ke(t,"active",8,!1);const s=jl();let i=N([]),c=N(["all"]),l=N("all"),o=N("");const v=async()=>{try{const R=await eo();f(i,R.examples||[]),f(c,["all",...R.modules||[]]),n(c).includes(n(l))||f(l,"all"),f(o,"")}catch(R){f(i,[]),f(c,["all"]),f(o,`Unable to load gallery: ${R.message}`)}},h=R=>{s("load",{code:R.code,run:!1})},w=R=>{s("load",{code:R.code,run:!0})};hr(()=>{v()}),mt(()=>(n(i),n(l)),()=>{f(r,n(i).filter(R=>n(l)==="all"||R.module===n(l)))}),mt(()=>X(a()),()=>{a()&&v()}),Rr(),er();var g=Ko(),S=d(g),x=d(S),P=_(d(x),2),b=_(d(P),2);tt(b,5,()=>n(c),et,(R,L)=>{var A=Jo(),ae=d(A),U={};G(()=>{E(ae,n(L)),U!==(U=n(L))&&(A.value=(A.__value=n(L))??"")}),I(R,A)});var $=_(x,4),V=d($);{var C=R=>{var L=Ho(),A=d(L);G(()=>E(A,n(o))),I(R,L)},F=R=>{var L=Go();I(R,L)},B=R=>{var L=Xe(),A=ze(L);tt(A,1,()=>n(r),et,(ae,U)=>{var we=Wo(),Le=d(we),Be=d(Le),$e=_(Le,2),Te=d($e),Fe=d(Te),pe=_(Te,2),re=d(pe),se=_(pe,2),xe=d(se),Se=_($e,2),ve=d(Se),Ne=_(Se,2),j=d(Ne),O=_(Ne,2),D=d(O),oe=_(D,2);G(()=>{E(Be,(n(U),y(()=>n(U).title))),E(Fe,(n(U),y(()=>n(U).module))),E(re,(n(U),y(()=>n(U).level))),E(xe,(n(U),y(()=>n(U).strategy||"dask"))),E(ve,(n(U),y(()=>n(U).description||""))),E(j,(n(U),y(()=>n(U).code)))}),te("click",D,()=>h(n(U))),te("click",oe,()=>w(n(U))),I(ae,we)}),I(R,L)};le(V,R=>{n(o)?R(C):(n(r),y(()=>!n(r).length)?R(F,1):R(B,!1))})}G(()=>rt(g,1,`panel ${a()?"active":""}`)),gn(b,()=>n(l),R=>f(l,R)),I(e,g),At()}var Yo=z('<div class="muted"> </div>'),Zo=z('<div class="bar-row"><div class="meta"><span> </span> <strong> </strong></div> <div class="bar-bg"><div class="bar-fill"></div></div></div>');function yn(e,t){It(t,!1);const r=N();let a=ke(t,"items",24,()=>[]),s=ke(t,"valueField",8,"value"),i=ke(t,"labelField",8,"label"),c=ke(t,"formatter",8,g=>`${g}`),l=ke(t,"emptyMessage",8,"No data yet.");mt(()=>(X(a()),X(s())),()=>{f(r,Math.max(1,...a().map(g=>Number(g?.[s()]||0))))}),Rr(),er();var o=Xe(),v=ze(o);{var h=g=>{var S=Yo(),x=d(S);G(()=>E(x,l())),I(g,S)},w=g=>{var S=Xe(),x=ze(S);tt(x,1,a,et,(P,b)=>{const $=Ie(()=>(n(b),X(s()),y(()=>Number(n(b)?.[s()]||0)))),V=Ie(()=>n($)/n(r)*100);var C=Zo(),F=d(C),B=d(F),R=d(B),L=_(B,2),A=d(L),ae=_(F,2),U=d(ae);G((we,Le)=>{E(R,(n(b),X(i()),y(()=>n(b)?.[i()]))),E(A,we),Pl(U,Le)},[()=>(X(c()),X(n($)),y(()=>c()(n($)))),()=>(X(n(V)),y(()=>`width: ${n(V).toFixed(2)}%`))]),I(P,C)}),I(g,S)};le(v,g=>{X(a()),y(()=>!a().length)?g(h):g(w,!1)})}I(e,o),At()}var Xo=z('<img id="perfChart" class="perf-chart" alt="Performance comparison chart"/>'),eu=z('<img id="primitivePerfChart" class="perf-chart" alt="Primitive benchmark histogram"/>'),tu=z('<div class="muted"> </div>'),ru=z('<div class="muted"> </div>'),nu=z('<div class="muted">No test jobs started from UI yet.</div>'),au=z('<button class="btn btn-danger btn-small" type="button">Kill</button>'),su=z('<article class="job-item"><div class="job-row"><strong> </strong> <span> </span></div> <div class="job-row"><span> </span> <span> </span></div> <div class="job-row"><span> </span> <!></div></article>'),iu=z('<div class="muted">No junit report loaded.</div>'),lu=z('<article class="table-like-row"><div class="name"> </div> <div class="detail"> </div></article>'),ou=z('<div class="muted">No failures in current report.</div>'),uu=z('<article class="table-like-row"><div class="name"> </div> <div class="detail"> </div></article>'),cu=z('<section id="tab-quality"><div class="grid-two"><article class="card"><div class="card-header"><h2>Test &amp; Coverage Overview</h2> <div class="row gap-s"><button id="refreshQualityBtn" class="btn btn-ghost btn-small" type="button">Refresh</button> <!></div></div> <div class="row controls"><button id="runQuickTestsBtn" class="btn btn-ghost btn-small" type="button">Run Quick</button> <button id="runFullTestsBtn" class="btn btn-primary btn-small" type="button">Run Full</button> <button id="runPerfTestsBtn" class="btn btn-ghost btn-small" type="button">Run Perf</button> <button id="killTestRunBtn" class="btn btn-danger btn-small" type="button">Kill Test Run</button></div> <div class="stats-grid"><div class="stat"><span class="label">Total Tests</span><strong id="qTotalTests"> </strong></div> <div class="stat"><span class="label">Passed</span><strong id="qPassed"> </strong></div> <div class="stat"><span class="label">Failed</span><strong id="qFailed"> </strong></div> <div class="stat"><span class="label">Skipped</span><strong id="qSkipped"> </strong></div> <div class="stat"><span class="label">Duration</span><strong id="qDuration"> </strong></div> <div class="stat"><span class="label">Line Coverage</span><strong id="qCoverage"> </strong></div></div> <h3 class="subheading">Lowest Coverage Packages</h3> <div id="coverageBars" class="bars"><!></div></article> <article class="card"><h2>VoxLogicA-1 vs VoxLogicA-2 Performance</h2> <!> <div id="perfSummary" class="muted"> </div> <h3 class="subheading">Primitive Benchmark Histogram</h3> <!> <div id="primitivePerfBars" class="bars"><!></div></article></div> <div class="grid-two"><article class="card"><h2>Test Run Logs</h2> <pre id="testRunLog" class="mono-scroll"> </pre> <h3 class="subheading">Recent Test Jobs</h3> <div id="recentTestJobs" class="job-list"><!></div></article> <article class="card"><h2>Test Titles</h2> <div id="testTitles" class="table-like muted"><!></div></article></div> <article class="card"><h2>Failing Test Cases</h2> <div id="failedCases" class="table-like muted"><!></div></article></section>');function fu(e,t){It(t,!1);let r=ke(t,"active",8,!1),a=ke(t,"capabilities",24,()=>({})),s=N("idle"),i=N(!1),c="",l=N(""),o=N([]),v=N(""),h=N({}),w=N({}),g=N([]),S=N([]),x=N([]),P=N("No performance report yet."),b=N(""),$=N(""),V=N([]),C=N("No primitive benchmark report yet."),F=null,B=null;const R=T=>{f(i,!1),f(s,"unavailable"),f(l,T)},L=async()=>{try{const T=await to(),J=T?.junit||{},ce=T?.coverage||{},fe=T?.performance||{};if(f(h,J.summary||{}),f(w,ce.summary||{}),f(g,ce.lowest_modules||[]),f(S,J.failed_cases||[]),f(x,J.test_cases||[]),fe.available){const Q=Number(fe.speed_ratio||0),Pe=Number(fe.vox1_median_s||0),Je=Number(fe.vox2_median_s||0),pt=Number(fe.vox1_cpu_median_s||0),Ut=Number(fe.vox2_cpu_median_s||0),at=Number(fe.vox1_ru_maxrss_delta_median_bytes||0),tr=Number(fe.vox2_ru_maxrss_delta_median_bytes||0);let rr="";const Jt=fe.test_metrics||{};if(Jt.available){const ar=Jt.tests||[];rr=` | perf tests: ${Number(Jt.count||ar.length)} | median util: ${$s(ta(ar.map(St=>Number(St.cpu_utilization))))} | median heap: ${Ee(ta(ar.map(St=>Number(St.python_heap_peak_bytes))))} | median rss delta: ${Ee(ta(ar.map(St=>Number(St.ru_maxrss_delta_bytes))))}`}f(P,`vox1 median: ${nt(Pe)} (cpu ${nt(pt)}, rss ${Ee(at)}) | vox2 median: ${nt(Je)} (cpu ${nt(Ut)}, rss ${Ee(tr)}) | ratio vox1/vox2: ${Q.toFixed(2)}x${rr}`),f(b,`/api/v1/testing/performance/chart?t=${Date.now()}`);const nr=fe.primitive_benchmarks||{};nr.available?(f(V,nr.cases||[]),f(C,""),f($,nr.svg_available?`/api/v1/testing/performance/primitive-chart?t=${Date.now()}`:"")):(f(V,[]),f(C,nr.reason||"No primitive benchmark report yet."),f($,""))}else f(P,"No performance report yet. Run `./tests/run-tests.sh` with perf tests enabled."),f(b,""),f($,""),f(V,[]),f(C,"No primitive benchmark report yet.")}catch(T){f(P,`Failed loading report: ${T.message}`)}},A=async()=>{try{const T=await ro();f(o,T.jobs||[]),f(v,"")}catch(T){f(o,[]),f(v,`Failed to load test jobs: ${T.message}`)}},ae=async()=>{if(c)try{const T=await no(c);if(f(s,T.status),f(l,T.log_tail||""),T.status==="running")return;f(i,!1),B&&(clearInterval(B),B=null),await Promise.all([L(),A()])}catch(T){f(i,!1),f(s,"failed"),f(l,`Unable to poll test job: ${T.message}`),B&&(clearInterval(B),B=null)}},U=async(T,J)=>{if(a().testing_jobs===!1){R("Testing jobs API unavailable. Restart `./voxlogica serve` from latest code.");return}try{f(i,!0),f(s,"running"),f(l,"");const ce=await ao({profile:T,includePerf:J});c=ce.job_id,f(l,ce.log_tail||""),B&&clearInterval(B),B=setInterval(ae,1200),await Promise.all([ae(),A()])}catch(ce){f(i,!1),f(s,"failed"),f(l,`Unable to start test run: ${ce.message}`)}},we=async()=>{if(c)try{const T=await Es(c);f(i,!1),f(s,T.status),f(l,T.log_tail||""),B&&(clearInterval(B),B=null),await A()}catch(T){f(l,`Unable to kill current test job: ${T.message}`)}},Le=async T=>{try{await Es(T),c===T&&(c="",f(i,!1),f(s,"killed")),await A()}catch(J){f(v,`Unable to kill ${T}: ${J.message}`)}},Be=()=>{F&&(clearInterval(F),F=null),F=setInterval(()=>{r()&&(L(),A(),ae())},15e3)},$e=async()=>{await Promise.all([L(),A()])};hr(async()=>{await $e(),Be()}),xs(()=>{F&&clearInterval(F),B&&clearInterval(B)}),mt(()=>X(r()),()=>{r()&&($e(),Be())}),mt(()=>X(a()),()=>{a().testing_jobs===!1&&R("This backend does not expose testing jobs. Restart server from latest commit.")}),Rr(),er();var Te=cu(),Fe=d(Te),pe=d(Fe),re=d(pe),se=_(d(re),2),xe=d(se),Se=_(xe,2);Cs(Se,{get value(){return n(s)}});var ve=_(re,2),Ne=d(ve),j=_(Ne,2),O=_(j,2),D=_(O,2),oe=_(ve,2),K=d(oe),me=_(d(K)),Re=d(me),ee=_(K,2),Oe=_(d(ee)),ct=d(Oe),_e=_(ee,2),qe=_(d(_e)),yt=d(qe),wt=_(_e,2),ft=_(d(wt)),Ot=d(ft),Ir=_(wt,2),xt=_(d(Ir)),dt=d(xt),Ar=_(Ir,2),vt=_(d(Ar)),Ue=d(vt),gr=_(oe,4),Kr=d(gr);yn(Kr,{get items(){return n(g)},valueField:"line_percent",labelField:"name",formatter:T=>`${Number(T).toFixed(2)}%`});var wn=_(pe,2),jt=_(d(wn),2);{var xn=T=>{var J=Xo();G(()=>hs(J,"src",n(b))),I(T,J)};le(jt,T=>{n(b)&&T(xn)})}var Sn=_(jt,2),kn=d(Sn),_t=_(Sn,4);{var na=T=>{var J=eu();G(()=>hs(J,"src",n($))),I(T,J)};le(_t,T=>{n($)&&T(na)})}var Qr=_(_t,2),Yr=d(Qr);{var En=T=>{yn(T,{get items(){return n(V)},valueField:"speed_ratio",labelField:"name",formatter:J=>`${Number(J).toFixed(3)}x`})},Mr=T=>{var J=tu(),ce=d(J);G(()=>E(ce,n(C))),I(T,J)};le(Yr,T=>{n(V),y(()=>n(V).length)?T(En):T(Mr,!1)})}var Dt=_(Fe,2),Zr=d(Dt),mr=_(d(Zr),2),Xr=d(mr),aa=_(mr,4),sa=d(aa);{var $n=T=>{var J=ru(),ce=d(J);G(()=>E(ce,n(v))),I(T,J)},ia=T=>{var J=nu();I(T,J)},la=T=>{var J=Xe(),ce=ze(J);tt(ce,1,()=>n(o),et,(fe,Q)=>{var Pe=su(),Je=d(Pe),pt=d(Je),Ut=d(pt),at=_(pt,2),tr=d(at),rr=_(Je,2),Jt=d(rr),nr=d(Jt),ar=_(Jt,2),St=d(ar),Rn=_(rr,2),kt=d(Rn),ca=d(kt),Pn=_(kt,2);{var Lr=br=>{var Cn=au();te("click",Cn,()=>Le(n(Q).job_id)),I(br,Cn)};le(Pn,br=>{n(Q),y(()=>n(Q).status==="running")&&br(Lr)})}G(br=>{E(Ut,br),rt(at,1,(n(Q),y(()=>`chip ${n(Q).status}`))),E(tr,(n(Q),y(()=>n(Q).status))),E(nr,(n(Q),y(()=>n(Q).profile))),E(St,(n(Q),y(()=>n(Q).include_perf?"with perf":"no perf"))),E(ca,(n(Q),y(()=>n(Q).created_at||"-")))},[()=>(n(Q),y(()=>String(n(Q).job_id||"").slice(0,12)))]),I(fe,Pe)}),I(T,J)};le(sa,T=>{n(v)?T($n):(n(o),y(()=>!n(o).length)?T(ia,1):T(la,!1))})}var zt=_(Zr,2),Tn=_(d(zt),2),en=d(Tn);{var Vt=T=>{var J=iu();I(T,J)},Bt=T=>{var J=Xe(),ce=ze(J);tt(ce,1,()=>(n(x),y(()=>n(x).slice(0,200))),et,(fe,Q)=>{var Pe=lu(),Je=d(Pe),pt=d(Je),Ut=_(Je,2),at=d(Ut);G(tr=>{E(pt,(n(Q),y(()=>n(Q).id))),E(at,`status=${n(Q),y(()=>n(Q).status)??""} | time=${tr??""}`)},[()=>(X(nt),n(Q),y(()=>nt(Number(n(Q).time_s||0))))]),I(fe,Pe)}),I(T,J)};le(en,T=>{n(x),y(()=>!n(x).length)?T(Vt):T(Bt,!1)})}var tn=_(Dt,2),qt=_(d(tn),2),oa=d(qt);{var Nn=T=>{var J=ou();I(T,J)},ua=T=>{var J=Xe(),ce=ze(J);tt(ce,1,()=>n(S),et,(fe,Q)=>{var Pe=uu(),Je=d(Pe),pt=d(Je),Ut=_(Je,2),at=d(Ut);G(()=>{E(pt,(n(Q),y(()=>n(Q).id))),E(at,(n(Q),y(()=>n(Q).message||"Failure without message")))}),I(fe,Pe)}),I(T,J)};le(oa,T=>{n(S),y(()=>!n(S).length)?T(Nn):T(ua,!1)})}G((T,J,ce,fe,Q,Pe)=>{rt(Te,1,`panel ${r()?"active":""}`),Ne.disabled=(n(i),X(a()),y(()=>n(i)||a().testing_jobs===!1)),j.disabled=(n(i),X(a()),y(()=>n(i)||a().testing_jobs===!1)),O.disabled=(n(i),X(a()),y(()=>n(i)||a().testing_jobs===!1)),D.disabled=!n(i),E(Re,T),E(ct,J),E(yt,ce),E(Ot,fe),E(dt,Q),E(Ue,`${Pe??""}%`),E(kn,n(P)),E(Xr,n(l))},[()=>(n(h),y(()=>Number(n(h).total||0))),()=>(n(h),y(()=>Number(n(h).passed||0))),()=>(n(h),y(()=>Number(n(h).failed||0))),()=>(n(h),y(()=>Number(n(h).skipped||0))),()=>(X(nt),n(h),y(()=>nt(Number(n(h).duration_s||0)))),()=>(n(w),y(()=>Number(n(w).line_percent||0).toFixed(2)))]),te("click",xe,$e),te("click",Ne,()=>U("quick",!1)),te("click",j,()=>U("full",!0)),te("click",O,()=>U("perf",!0)),te("click",D,we),I(e,Te),At()}var du=z('<div class="inline-error"> </div>'),vu=z('<section id="tab-storage"><div class="grid-two"><article class="card"><div class="card-header"><h2>Cache Footprint</h2> <button id="refreshStorageBtn" class="btn btn-ghost btn-small" type="button">Refresh</button></div> <div class="stats-grid"><div class="stat"><span class="label">Cached Records</span> <strong id="sTotal"> </strong></div> <div class="stat"><span class="label">Materialized</span> <strong id="sMaterialized"> </strong></div> <div class="stat"><span class="label">Failed</span> <strong id="sFailed"> </strong></div> <div class="stat"><span class="label">Average Payload</span> <strong id="sAvgPayload"> </strong></div> <div class="stat"><span class="label">Total Payload</span> <strong id="sTotalPayload"> </strong></div> <div class="stat"><span class="label">Database Size</span> <strong id="sDbSize"> </strong></div></div> <p id="storageMeta" class="muted"> </p> <!></article> <article class="card"><h2>Payload Size Distribution</h2> <div id="payloadBuckets" class="bars"><!></div> <h3 class="subheading">Runtime Versions</h3> <div id="runtimeVersions" class="bars"><!></div></article></div></section>');function _u(e,t){It(t,!1);let r=ke(t,"active",8,!1),a=N(null),s=N(null),i=N(null),c=N(""),l=N("");const o=async()=>{try{const D=await so();if(f(a,D),!D.available){f(l,D.error||"Storage stats unavailable."),f(c,n(l)),f(s,null),f(i,null);return}f(l,""),f(s,D.summary||{}),f(i,D.disk||{}),f(c,`${D.db_path} | last update ${n(s).last_update_at||"-"}`)}catch(D){f(l,`Failed loading storage stats: ${D.message}`),f(c,n(l)),f(s,null),f(i,null)}};hr(()=>{o()}),mt(()=>X(r()),()=>{r()&&o()}),Rr(),er();var v=vu(),h=d(v),w=d(h),g=d(w),S=_(d(g),2),x=_(g,2),P=d(x),b=_(d(P),2),$=d(b),V=_(P,2),C=_(d(V),2),F=d(C),B=_(V,2),R=_(d(B),2),L=d(R),A=_(B,2),ae=_(d(A),2),U=d(ae),we=_(A,2),Le=_(d(we),2),Be=d(Le),$e=_(we,2),Te=_(d($e),2),Fe=d(Te),pe=_(x,2),re=d(pe),se=_(pe,2);{var xe=D=>{var oe=du(),K=d(oe);G(()=>E(K,n(l))),I(D,oe)};le(se,D=>{n(l)&&D(xe)})}var Se=_(w,2),ve=_(d(Se),2),Ne=d(ve);{let D=Ie(()=>(n(a),y(()=>n(a)?.payload_buckets||[])));yn(Ne,{get items(){return n(D)},valueField:"count",labelField:"bucket",formatter:oe=>`${oe}`})}var j=_(ve,4),O=d(j);{let D=Ie(()=>(n(a),y(()=>n(a)?.runtime_versions||[])));yn(O,{get items(){return n(D)},valueField:"count",labelField:"runtime_version",formatter:oe=>`${oe}`})}G((D,oe,K,me,Re,ee)=>{rt(v,1,`panel ${r()?"active":""}`),E($,D),E(F,oe),E(L,K),E(U,me),E(Be,Re),E(Fe,ee),E(re,n(c))},[()=>(n(s),y(()=>n(s)?Number(n(s).total_records||0):"-")),()=>(n(s),y(()=>n(s)?Number(n(s).materialized_records||0):"-")),()=>(n(s),y(()=>n(s)?Number(n(s).failed_records||0):"-")),()=>(n(s),X(Ee),y(()=>n(s)?Ee(Number(n(s).avg_payload_bytes||0)):"-")),()=>(n(s),X(Ee),y(()=>n(s)?Ee(Number(n(s).total_payload_bytes||0)):"-")),()=>(n(i),X(Ee),y(()=>n(i)?Ee(Number(n(i).db_bytes||0)+Number(n(i).wal_bytes||0)):"-"))]),te("click",S,o),I(e,v),At()}var pu=z('<button type="button"> </button>'),hu=z('<div class="background-layer"></div> <div class="shell"><header class="topbar"><div><p class="eyebrow">VoxLogicA Serve</p> <h1>VoxLogicA Studio Console</h1></div> <div class="topbar-meta"><span id="buildStamp" class="chip"> </span></div></header> <nav class="tabbar" aria-label="Main pages"></nav> <main class="content"><!> <!> <!> <!> <!></main></div>',1);function gu(e,t){It(t,!1);const r=[{id:"playground",label:"Playground"},{id:"results",label:"Results Explorer"},{id:"gallery",label:"Example Gallery"},{id:"quality",label:"Test Intelligence"},{id:"storage",label:"Storage Stats"}];let a=N("playground"),s=N({}),i=N("Loading..."),c=N();const l=()=>{const R=window.location.protocol==="https:"?"wss":"ws",L=new WebSocket(`${R}://${window.location.host}/livereload`);L.onmessage=A=>{A.data==="reload"&&window.location.reload()},L.onclose=()=>{setTimeout(l,2e3)}},o=async R=>{const L=String(R.detail?.code||""),A=!!R.detail?.run;f(a,"playground"),n(c)&&typeof n(c).loadProgram=="function"&&await n(c).loadProgram(L,A)};hr(async()=>{try{const[R,L]=await Promise.all([Bl(),ql()]);f(s,R||{}),f(i,`v${L.version||"unknown"}`)}catch{f(i,"version unavailable")}l()}),er();var v=hu(),h=_(ze(v),2),w=d(h),g=_(d(w),2),S=d(g),x=d(S),P=_(w,2);tt(P,5,()=>r,et,(R,L)=>{var A=pu(),ae=d(A);G(U=>{rt(A,1,U),E(ae,n(L).label)},[()=>_s(`tab ${n(a)===n(L).id?"active":""}`.trim())]),te("click",A,()=>f(a,n(L).id)),I(R,A)});var b=_(P,2),$=d(b);{let R=Ie(()=>n(a)==="playground");Cr(Do($,{get active(){return n(R)},get capabilities(){return n(s)},$$legacy:!0}),L=>f(c,L),()=>n(c))}var V=_($,2);{let R=Ie(()=>n(a)==="results");Uo(V,{get active(){return n(R)},get capabilities(){return n(s)}})}var C=_(V,2);{let R=Ie(()=>n(a)==="gallery");Qo(C,{get active(){return n(R)},$$events:{load:o}})}var F=_(C,2);{let R=Ie(()=>n(a)==="quality");fu(F,{get active(){return n(R)},get capabilities(){return n(s)}})}var B=_(F,2);{let R=Ie(()=>n(a)==="storage");_u(B,{get active(){return n(R)}})}G(()=>E(x,n(i))),I(e,v),At()}const Is=document.getElementById("app");if(!(Is instanceof HTMLElement))throw new Error("Missing #app root element.");yl(gu,{target:Is})})();
