(function(){"use strict";const qs=globalThis.process?.env?.NODE_ENV,L=qs&&!qs.toLowerCase().startsWith("prod");var Zr=Array.isArray,Vi=Array.prototype.indexOf,Sr=Array.prototype.includes,kn=Array.from,rr=Object.defineProperty,nr=Object.getOwnPropertyDescriptor,Bs=Object.getOwnPropertyDescriptors,Ui=Object.prototype,Ji=Array.prototype,Zn=Object.getPrototypeOf,Vs=Object.isExtensible;const Hi=()=>{};function Wi(e){return e()}function Xn(e){for(var t=0;t<e.length;t++)e[t]()}function Us(){var e,t,r=new Promise((s,a)=>{e=s,t=a});return{promise:r,resolve:e,reject:t}}const Be=2,Xr=4,en=8,Js=1<<24,qt=16,kt=32,kr=64,es=128,vt=512,je=1024,Ve=2048,pt=4096,at=8192,Bt=16384,Er=32768,zr=65536,En=1<<17,Hs=1<<18,qr=1<<19,Ws=1<<20,Vt=1<<25,sr=65536,ts=1<<21,Tn=1<<22,ar=1<<23,Ut=Symbol("$state"),Gi=Symbol("legacy props"),Ki=Symbol(""),Gs=Symbol("proxy path"),Tr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function rs(e){if(L){const t=new Error(`lifecycle_outside_component
\`${e}(...)\` can only be used during component initialisation
https://svelte.dev/e/lifecycle_outside_component`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Yi(){if(L){const e=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ks(){if(L){const e=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function Qi(){if(L){const e=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/derived_references_self")}function Ys(e,t,r){if(L){const s=new Error(`each_key_duplicate
${r?`Keyed each block has duplicate key \`${r}\` at indexes ${e} and ${t}`:`Keyed each block has duplicate key at indexes ${e} and ${t}`}
https://svelte.dev/e/each_key_duplicate`);throw s.name="Svelte error",s}else throw new Error("https://svelte.dev/e/each_key_duplicate")}function Zi(e,t,r){if(L){const s=new Error(`each_key_volatile
Keyed each block has key that is not idempotent â€” the key for item at index ${e} was \`${t}\` but is now \`${r}\`. Keys must be the same each time for a given item
https://svelte.dev/e/each_key_volatile`);throw s.name="Svelte error",s}else throw new Error("https://svelte.dev/e/each_key_volatile")}function Xi(e){if(L){const t=new Error(`effect_in_teardown
\`${e}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function eo(){if(L){const e=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function to(e){if(L){const t=new Error(`effect_orphan
\`${e}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_orphan")}function ro(){if(L){const e=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function no(e){if(L){const t=new Error(`props_invalid_value
Cannot do \`bind:${e}={undefined}\` when \`${e}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/props_invalid_value")}function so(e){if(L){const t=new Error(`rune_outside_svelte
The \`${e}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function ao(){if(L){const e=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function io(){if(L){const e=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function oo(){if(L){const e=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function lo(){if(L){const e=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const co=1,uo=2,Qs=4,fo=8,vo=16,po=1,_o=2,ho=4,go=8,mo=16,bo=1,yo=2,Ue=Symbol(),wo=Symbol("filename"),Zs="http://www.w3.org/1999/xhtml",xo="http://www.w3.org/2000/svg",So="http://www.w3.org/1998/Math/MathML";var ns="font-weight: bold",ss="font-weight: normal";function ko(){L?console.warn("%c[svelte] select_multiple_invalid_value\n%cThe `value` property of a `<select multiple>` element should be an array, but it received a non-array value. The selection will be kept as is.\nhttps://svelte.dev/e/select_multiple_invalid_value",ns,ss):console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function as(e){L?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${e}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,ns,ss):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function Eo(){L?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",ns,ss):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Xs(e){return e===this.v}function To(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ea(e){return!To(e,this.v)}let Br=!1,$o=!1;function No(){Br=!0}function Mt(e,t){return e.label=t,ta(e.v,t),e}function ta(e,t){return e?.[Gs]?.(t),e}function Ro(e){const t=new Error,r=Co();return r.length===0?null:(r.unshift(`
`),rr(t,"stack",{value:r.join(`
`)}),rr(t,"name",{value:e}),t)}function Co(){const e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const t=new Error().stack;if(Error.stackTraceLimit=e,!t)return[];const r=t.split(`
`),s=[];for(let a=0;a<r.length;a++){const i=r[a],l=i.replaceAll("\\","/");if(i.trim()!=="Error"){if(i.includes("validate_each_keys"))return[];l.includes("svelte/src/internal")||l.includes("node_modules/.vite")||s.push(i)}}return s}let ge=null;function Vr(e){ge=e}let tn=null;function $n(e){tn=e}let rn=null;function ra(e){rn=e}function Et(e,t=!1,r){ge={p:ge,i:!1,c:null,e:null,s:e,x:null,l:Br&&!t?{s:null,u:null,$:[]}:null},L&&(ge.function=r,rn=r)}function Tt(e){var t=ge,r=t.e;if(r!==null){t.e=null;for(var s of r)Ta(s)}return e!==void 0&&(t.x=e),t.i=!0,ge=t.p,L&&(rn=ge?.function??null),e??{}}function nn(){return!Br||ge!==null&&ge.l===null}let $r=[];function na(){var e=$r;$r=[],Xn(e)}function Jt(e){if($r.length===0&&!sn){var t=$r;queueMicrotask(()=>{t===$r&&na()})}$r.push(e)}function Po(){for(;$r.length>0;)na()}const is=new WeakMap;function sa(e){var t=de;if(t===null)return pe.f|=ar,e;if(L&&e instanceof Error&&!is.has(e)&&is.set(e,Ao(e,t)),(t.f&Er)===0&&(t.f&Xr)===0)throw L&&!t.parent&&e instanceof Error&&aa(e),e;ir(e,t)}function ir(e,t){for(;t!==null;){if((t.f&es)!==0){if((t.f&Er)===0)throw e;try{t.b.error(e);return}catch(r){e=r}}t=t.parent}throw L&&e instanceof Error&&aa(e),e}function Ao(e,t){const r=nr(e,"message");if(!(r&&!r.configurable)){for(var s=vs?"  ":"	",a=`
${s}in ${t.fn?.name||"<unknown>"}`,i=t.ctx;i!==null;)a+=`
${s}in ${i.function?.[wo].split("/").pop()}`,i=i.p;return{message:e.message+`
${a}
`,stack:e.stack?.split(`
`).filter(l=>!l.includes("svelte/src/internal")).join(`
`)}}}function aa(e){const t=is.get(e);t&&(rr(e,"message",{value:t.message}),rr(e,"stack",{value:t.stack}))}const Mo=-7169;function Ne(e,t){e.f=e.f&Mo|t}function os(e){(e.f&vt)!==0||e.deps===null?Ne(e,je):Ne(e,pt)}function ia(e){if(e!==null)for(const t of e)(t.f&Be)===0||(t.f&sr)===0||(t.f^=sr,ia(t.deps))}function oa(e,t,r){(e.f&Ve)!==0?t.add(e):(e.f&pt)!==0&&r.add(e),ia(e.deps),Ne(e,je)}const Nn=new Set;let _e=null,Rn=null,$t=null,et=[],Cn=null,ls=!1,sn=!1;class or{current=new Map;previous=new Map;#t=new Set;#o=new Set;#e=0;#i=0;#n=null;#a=new Set;#r=new Set;#s=new Map;is_fork=!1;#l=!1;#u(){return this.is_fork||this.#i>0}skip_effect(t){this.#s.has(t)||this.#s.set(t,{d:[],m:[]})}unskip_effect(t){var r=this.#s.get(t);if(r){this.#s.delete(t);for(var s of r.d)Ne(s,Ve),Nt(s);for(s of r.m)Ne(s,pt),Nt(s)}}process(t){et=[],this.apply();var r=[],s=[];for(const a of t)this.#c(a,r,s);if(this.#u()){this.#d(s),this.#d(r);for(const[a,i]of this.#s)da(a,i)}else{for(const a of this.#t)a();this.#t.clear(),this.#e===0&&this.#v(),Rn=this,_e=null,ca(s),ca(r),this.#a.clear(),this.#r.clear(),Rn=null,this.#n?.resolve()}$t=null}#c(t,r,s){t.f^=je;for(var a=t.first;a!==null;){var i=a.f,l=(i&(kt|kr))!==0,c=l&&(i&je)!==0,u=c||(i&at)!==0||this.#s.has(a);if(!u&&a.fn!==null){l?a.f^=je:(i&Xr)!==0?r.push(a):Wr(a)&&((i&qt)!==0&&this.#r.add(a),Lr(a));var v=a.first;if(v!==null){a=v;continue}}for(;a!==null;){var h=a.next;if(h!==null){a=h;break}a=a.parent}}}#d(t){for(var r=0;r<t.length;r+=1)oa(t[r],this.#a,this.#r)}capture(t,r){r!==Ue&&!this.previous.has(t)&&this.previous.set(t,r),(t.f&ar)===0&&(this.current.set(t,t.v),$t?.set(t,t.v))}activate(){_e=this,this.apply()}deactivate(){_e===this&&(_e=null,$t=null)}flush(){if(this.activate(),et.length>0){if(la(),_e!==null&&_e!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#o)t(this);this.#o.clear()}#v(){if(Nn.size>1){this.previous.clear();var t=$t,r=!0;for(const a of Nn){if(a===this){r=!1;continue}const i=[];for(const[c,u]of this.current){if(a.current.has(c))if(r&&u!==a.current.get(c))a.current.set(c,u);else continue;i.push(c)}if(i.length===0)continue;const l=[...a.current.keys()].filter(c=>!this.current.has(c));if(l.length>0){var s=et;et=[];const c=new Set,u=new Map;for(const v of i)ua(v,l,c,u);if(et.length>0){_e=a,a.apply();for(const v of et)a.#c(v,[],[]);a.deactivate()}et=s}}_e=null,$t=t}this.#s.clear(),Nn.delete(this)}increment(t){this.#e+=1,t&&(this.#i+=1)}decrement(t){this.#e-=1,t&&(this.#i-=1),!this.#l&&(this.#l=!0,Jt(()=>{this.#l=!1,this.#u()?et.length>0&&this.flush():this.revive()}))}revive(){for(const t of this.#a)this.#r.delete(t),Ne(t,Ve),Nt(t);for(const t of this.#r)Ne(t,pt),Nt(t);this.flush()}oncommit(t){this.#t.add(t)}ondiscard(t){this.#o.add(t)}settled(){return(this.#n??=Us()).promise}static ensure(){if(_e===null){const t=_e=new or;Nn.add(_e),sn||Jt(()=>{_e===t&&t.flush()})}return _e}apply(){}}function Lo(e){var t=sn;sn=!0;try{for(var r;;){if(Po(),et.length===0&&(_e?.flush(),et.length===0))return Cn=null,r;la()}}finally{sn=t}}function la(){ls=!0;var e=L?new Set:null;try{for(var t=0;et.length>0;){var r=or.ensure();if(t++>1e3){if(L){var s=new Map;for(const i of r.current.keys())for(const[l,c]of i.updated??[]){var a=s.get(l);a||(a={error:c.error,count:0},s.set(l,a)),a.count+=c.count}for(const i of s.values())i.error&&console.error(i.error)}Io()}if(r.process(et),lr.clear(),L)for(const i of r.current.keys())e.add(i)}}finally{if(et=[],ls=!1,Cn=null,L)for(const i of e)i.updated=null}}function Io(){try{ro()}catch(e){L&&rr(e,"stack",{value:""}),ir(e,Cn)}}let Ht=null;function ca(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var s=e[r++];if((s.f&(Bt|at))===0&&Wr(s)&&(Ht=new Set,Lr(s),s.deps===null&&s.first===null&&s.nodes===null&&s.teardown===null&&s.ac===null&&Ca(s),Ht?.size>0)){lr.clear();for(const a of Ht){if((a.f&(Bt|at))!==0)continue;const i=[a];let l=a.parent;for(;l!==null;)Ht.has(l)&&(Ht.delete(l),i.push(l)),l=l.parent;for(let c=i.length-1;c>=0;c--){const u=i[c];(u.f&(Bt|at))===0&&Lr(u)}}Ht.clear()}}Ht=null}}function ua(e,t,r,s){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const a of e.reactions){const i=a.f;(i&Be)!==0?ua(a,t,r,s):(i&(Tn|qt))!==0&&(i&Ve)===0&&fa(a,t,s)&&(Ne(a,Ve),Nt(a))}}function fa(e,t,r){const s=r.get(e);if(s!==void 0)return s;if(e.deps!==null)for(const a of e.deps){if(Sr.call(t,a))return!0;if((a.f&Be)!==0&&fa(a,t,r))return r.set(a,!0),!0}return r.set(e,!1),!1}function Nt(e){var t=Cn=e,r=t.b;if(r?.is_pending&&(e.f&(Xr|en|Js))!==0&&(e.f&Er)===0){r.defer_effect(e);return}for(;t.parent!==null;){t=t.parent;var s=t.f;if(ls&&t===de&&(s&qt)!==0&&(s&Hs)===0&&(s&Er)!==0)return;if((s&(kr|kt))!==0){if((s&je)===0)return;t.f^=je}}et.push(t)}function da(e,t){if(!((e.f&kt)!==0&&(e.f&je)!==0)){(e.f&Ve)!==0?t.d.push(e):(e.f&pt)!==0&&t.m.push(e),Ne(e,je);for(var r=e.first;r!==null;)da(r,t),r=r.next}}function Oo(e){let t=0,r=Nr(0),s;return L&&Mt(r,"createSubscriber version"),()=>{ps()&&(n(r),un(()=>(t===0&&(s=S(()=>e(()=>on(r)))),t+=1,()=>{Jt(()=>{t-=1,t===0&&(s?.(),s=void 0,on(r))})})))}}var Fo=zr|qr;function jo(e,t,r,s){new Do(e,t,r,s)}class Do{parent;is_pending=!1;transform_error;#t;#o=null;#e;#i;#n;#a=null;#r=null;#s=null;#l=null;#u=0;#c=0;#d=!1;#v=new Set;#p=new Set;#f=null;#b=Oo(()=>(this.#f=Nr(this.#u),L&&Mt(this.#f,"$effect.pending()"),()=>{this.#f=null}));constructor(t,r,s,a){this.#t=t,this.#e=r,this.#i=i=>{var l=de;l.b=this,l.f|=es,s(i)},this.parent=de.b,this.transform_error=a??this.parent?.transform_error??(i=>i),this.#n=hs(()=>{this.#g()},Fo)}#y(){try{this.#a=_t(()=>this.#i(this.#t))}catch(t){this.error(t)}}#w(t){const r=this.#e.failed;r&&(this.#s=_t(()=>{r(this.#t,()=>t,()=>()=>{})}))}#x(){const t=this.#e.pending;t&&(this.is_pending=!0,this.#r=_t(()=>t(this.#t)),Jt(()=>{var r=this.#l=document.createDocumentFragment(),s=Wt();r.append(s),this.#a=this.#h(()=>(or.ensure(),_t(()=>this.#i(s)))),this.#c===0&&(this.#t.before(r),this.#l=null,Pr(this.#r,()=>{this.#r=null}),this.#_())}))}#g(){try{if(this.is_pending=this.has_pending_snippet(),this.#c=0,this.#u=0,this.#a=_t(()=>{this.#i(this.#t)}),this.#c>0){var t=this.#l=document.createDocumentFragment();Ma(this.#a,t);const r=this.#e.pending;this.#r=_t(()=>r(this.#t))}else this.#_()}catch(r){this.error(r)}}#_(){this.is_pending=!1;for(const t of this.#v)Ne(t,Ve),Nt(t);for(const t of this.#p)Ne(t,pt),Nt(t);this.#v.clear(),this.#p.clear()}defer_effect(t){oa(t,this.#v,this.#p)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#e.pending}#h(t){var r=de,s=pe,a=ge;Ct(this.#n),ht(this.#n),Vr(this.#n.ctx);try{return t()}catch(i){return sa(i),null}finally{Ct(r),ht(s),Vr(a)}}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#c+=t,this.#c===0&&(this.#_(),this.#r&&Pr(this.#r,()=>{this.#r=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(t){this.#m(t),this.#u+=t,!(!this.#f||this.#d)&&(this.#d=!0,Jt(()=>{this.#d=!1,this.#f&&Jr(this.#f,this.#u)}))}get_effect_pending(){return this.#b(),n(this.#f)}error(t){var r=this.#e.onerror;let s=this.#e.failed;if(!r&&!s)throw t;this.#a&&(nt(this.#a),this.#a=null),this.#r&&(nt(this.#r),this.#r=null),this.#s&&(nt(this.#s),this.#s=null);var a=!1,i=!1;const l=()=>{if(a){Eo();return}a=!0,i&&lo(),this.#s!==null&&Pr(this.#s,()=>{this.#s=null}),this.#h(()=>{or.ensure(),this.#g()})},c=u=>{try{i=!0,r?.(u,l),i=!1}catch(v){ir(v,this.#n&&this.#n.parent)}s&&(this.#s=this.#h(()=>{or.ensure();try{return _t(()=>{var v=de;v.b=this,v.f|=es,s(this.#t,()=>u,()=>l)})}catch(v){return ir(v,this.#n.parent),null}}))};Jt(()=>{var u;try{u=this.transform_error(t)}catch(v){ir(v,this.#n&&this.#n.parent);return}u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(c,v=>ir(v,this.#n&&this.#n.parent)):c(u)})}}function zo(e,t,r,s){const a=nn()?an:Ke;var i=e.filter(g=>!g.settled);if(r.length===0&&i.length===0){s(t.map(a));return}var l=de,c=qo(),u=i.length===1?i[0].promise:i.length>1?Promise.all(i.map(g=>g.promise)):null;function v(g){c();try{s(g)}catch(p){(l.f&Bt)===0&&ir(p,l)}cs()}if(r.length===0){u.then(()=>v(t.map(a)));return}function h(){c(),Promise.all(r.map(g=>Uo(g))).then(g=>v([...t.map(a),...g])).catch(g=>ir(g,l))}u?u.then(h):h()}function qo(){var e=de,t=pe,r=ge,s=_e;if(L)var a=tn;return function(l=!0){Ct(e),ht(t),Vr(r),l&&s?.activate(),L&&$n(a)}}function cs(e=!0){Ct(null),ht(null),Vr(null),e&&_e?.deactivate(),L&&$n(null)}function Bo(){var e=de.b,t=_e,r=e.is_rendered();return e.update_pending_count(1),t.increment(r),()=>{e.update_pending_count(-1),t.decrement(r)}}const Vo=new Set;function an(e){var t=Be|Ve,r=pe!==null&&(pe.f&Be)!==0?pe:null;return de!==null&&(de.f|=qr),{ctx:ge,deps:null,effects:null,equals:Xs,f:t,fn:e,reactions:null,rv:0,v:Ue,wv:0,parent:r??de,ac:null}}function Uo(e,t,r){de===null&&Yi();var a=void 0,i=Nr(Ue);L&&(i.label=t);var l=!pe,c=new Map;return il(()=>{var u=Us();a=u.promise;try{Promise.resolve(e()).then(u.resolve,u.reject).finally(cs)}catch(p){u.reject(p),cs()}var v=_e;if(l){var h=Bo();c.get(v)?.reject(Tr),c.delete(v),c.set(v,u)}const g=(p,w=void 0)=>{if(v.activate(),w)w!==Tr&&(i.f|=ar,Jr(i,w));else{(i.f&ar)!==0&&(i.f^=ar),Jr(i,p);for(const[y,x]of c){if(c.delete(y),y===v)break;x.reject(Tr)}}h&&h()};u.promise.then(g,p=>g(null,p||"unknown"))}),Mn(()=>{for(const u of c.values())u.reject(Tr)}),L&&(i.f|=Tn),new Promise(u=>{function v(h){function g(){h===a?u(i):v(a)}h.then(g,g)}v(a)})}function Jo(e){const t=an(e);return Ia(t),t}function Ke(e){const t=an(e);return t.equals=ea,t}function va(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)nt(t[r])}}let us=[];function Ho(e){for(var t=e.parent;t!==null;){if((t.f&Be)===0)return(t.f&Bt)===0?t:null;t=t.parent}return null}function fs(e){var t,r=de;if(Ct(Ho(e)),L){let s=Ur;ha(new Set);try{Sr.call(us,e)&&Qi(),us.push(e),e.f&=~sr,va(e),t=bs(e)}finally{Ct(r),ha(s),us.pop()}}else try{e.f&=~sr,va(e),t=bs(e)}finally{Ct(r)}return t}function pa(e){var t=fs(e);if(!e.equals(t)&&(e.wv=ja(),(!_e?.is_fork||e.deps===null)&&(e.v=t,e.deps===null))){Ne(e,je);return}fr||($t!==null?(ps()||_e?.is_fork)&&$t.set(e,t):os(e))}function Wo(e){if(e.effects!==null)for(const t of e.effects)(t.teardown||t.ac)&&(t.teardown?.(),t.ac?.abort(Tr),t.teardown=Hi,t.ac=null,fn(t,0),gs(t))}function _a(e){if(e.effects!==null)for(const t of e.effects)t.teardown&&Lr(t)}let Ur=new Set;const lr=new Map;function ha(e){Ur=e}let ds=!1;function Go(){ds=!0}function Nr(e,t){var r={f:0,v:e,reactions:null,equals:Xs,rv:0,wv:0};return r}function cr(e,t){const r=Nr(e);return Ia(r),r}function $(e,t=!1,r=!0){const s=Nr(e);return t||(s.equals=ea),Br&&r&&ge!==null&&ge.l!==null&&(ge.l.s??=[]).push(s),s}function tt(e,t){return o(e,S(()=>n(e))),t}function o(e,t,r=!1){pe!==null&&(!Rt||(pe.f&En)!==0)&&nn()&&(pe.f&(Be|qt|Tn|En))!==0&&(gt===null||!Sr.call(gt,e))&&oo();let s=r?Hr(t):t;return L&&ta(s,e.label),Jr(e,s)}function Jr(e,t){if(!e.equals(t)){var r=e.v;fr?lr.set(e,t):lr.set(e,r),e.v=t;var s=or.ensure();if(s.capture(e,r),L){if(de!==null){e.updated??=new Map;const a=(e.updated.get("")?.count??0)+1;if(e.updated.set("",{error:null,count:a}),a>5){const i=Ro("updated at");if(i!==null){let l=e.updated.get(i.stack);l||(l={error:i,count:0},e.updated.set(i.stack,l)),l.count++}}}de!==null&&(e.set_during_effect=!0)}if((e.f&Be)!==0){const a=e;(e.f&Ve)!==0&&fs(a),os(a)}e.wv=ja(),ma(e,Ve),nn()&&de!==null&&(de.f&je)!==0&&(de.f&(kt|kr))===0&&(mt===null?ll([e]):mt.push(e)),!s.is_fork&&Ur.size>0&&!ds&&ga()}return t}function ga(){ds=!1;for(const e of Ur)(e.f&je)!==0&&Ne(e,pt),Wr(e)&&Lr(e);Ur.clear()}function on(e){o(e,e.v+1)}function ma(e,t){var r=e.reactions;if(r!==null)for(var s=nn(),a=r.length,i=0;i<a;i++){var l=r[i],c=l.f;if(!(!s&&l===de)){if(L&&(c&En)!==0){Ur.add(l);continue}var u=(c&Ve)===0;if(u&&Ne(l,t),(c&Be)!==0){var v=l;$t?.delete(v),(c&sr)===0&&(c&vt&&(l.f|=sr),ma(v,pt))}else u&&((c&qt)!==0&&Ht!==null&&Ht.add(l),Nt(l))}}}const Ko=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function Hr(e){if(typeof e!="object"||e===null||Ut in e)return e;const t=Zn(e);if(t!==Ui&&t!==Ji)return e;var r=new Map,s=Zr(e),a=cr(0),i=Mr,l=h=>{if(Mr===i)return h();var g=pe,p=Mr;ht(null),Fa(i);var w=h();return ht(g),Fa(p),w};s&&(r.set("length",cr(e.length)),L&&(e=Zo(e)));var c="";let u=!1;function v(h){if(!u){u=!0,c=h,Mt(a,`${c} version`);for(const[g,p]of r)Mt(p,Rr(c,g));u=!1}}return new Proxy(e,{defineProperty(h,g,p){(!("value"in p)||p.configurable===!1||p.enumerable===!1||p.writable===!1)&&ao();var w=r.get(g);return w===void 0?l(()=>{var y=cr(p.value);return r.set(g,y),L&&typeof g=="string"&&Mt(y,Rr(c,g)),y}):o(w,p.value,!0),!0},deleteProperty(h,g){var p=r.get(g);if(p===void 0){if(g in h){const w=l(()=>cr(Ue));r.set(g,w),on(a),L&&Mt(w,Rr(c,g))}}else o(p,Ue),on(a);return!0},get(h,g,p){if(g===Ut)return e;if(L&&g===Gs)return v;var w=r.get(g),y=g in h;if(w===void 0&&(!y||nr(h,g)?.writable)&&(w=l(()=>{var b=Hr(y?h[g]:Ue),E=cr(b);return L&&Mt(E,Rr(c,g)),E}),r.set(g,w)),w!==void 0){var x=n(w);return x===Ue?void 0:x}return Reflect.get(h,g,p)},getOwnPropertyDescriptor(h,g){var p=Reflect.getOwnPropertyDescriptor(h,g);if(p&&"value"in p){var w=r.get(g);w&&(p.value=n(w))}else if(p===void 0){var y=r.get(g),x=y?.v;if(y!==void 0&&x!==Ue)return{enumerable:!0,configurable:!0,value:x,writable:!0}}return p},has(h,g){if(g===Ut)return!0;var p=r.get(g),w=p!==void 0&&p.v!==Ue||Reflect.has(h,g);if(p!==void 0||de!==null&&(!w||nr(h,g)?.writable)){p===void 0&&(p=l(()=>{var x=w?Hr(h[g]):Ue,b=cr(x);return L&&Mt(b,Rr(c,g)),b}),r.set(g,p));var y=n(p);if(y===Ue)return!1}return w},set(h,g,p,w){var y=r.get(g),x=g in h;if(s&&g==="length")for(var b=p;b<y.v;b+=1){var E=r.get(b+"");E!==void 0?o(E,Ue):b in h&&(E=l(()=>cr(Ue)),r.set(b+"",E),L&&Mt(E,Rr(c,b)))}if(y===void 0)(!x||nr(h,g)?.writable)&&(y=l(()=>cr(void 0)),L&&Mt(y,Rr(c,g)),o(y,Hr(p)),r.set(g,y));else{x=y.v!==Ue;var F=l(()=>Hr(p));o(y,F)}var T=Reflect.getOwnPropertyDescriptor(h,g);if(T?.set&&T.set.call(w,p),!x){if(s&&typeof g=="string"){var A=r.get("length"),R=Number(g);Number.isInteger(R)&&R>=A.v&&o(A,R+1)}on(a)}return!0},ownKeys(h){n(a);var g=Reflect.ownKeys(h).filter(y=>{var x=r.get(y);return x===void 0||x.v!==Ue});for(var[p,w]of r)w.v!==Ue&&!(p in h)&&g.push(p);return g},setPrototypeOf(){io()}})}function Rr(e,t){return typeof t=="symbol"?`${e}[Symbol(${t.description??""})]`:Ko.test(t)?`${e}.${t}`:/^\d+$/.test(t)?`${e}[${t}]`:`${e}['${t}']`}function ln(e){try{if(e!==null&&typeof e=="object"&&Ut in e)return e[Ut]}catch{}return e}function Yo(e,t){return Object.is(ln(e),ln(t))}const Qo=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function Zo(e){return new Proxy(e,{get(t,r,s){var a=Reflect.get(t,r,s);return Qo.has(r)?function(...i){Go();var l=a.apply(this,i);return ga(),l}:a}})}function Xo(){const e=Array.prototype,t=Array.__svelte_cleanup;t&&t();const{indexOf:r,lastIndexOf:s,includes:a}=e;e.indexOf=function(i,l){const c=r.call(this,i,l);if(c===-1){for(let u=l??0;u<this.length;u+=1)if(ln(this[u])===i){as("array.indexOf(...)");break}}return c},e.lastIndexOf=function(i,l){const c=s.call(this,i,l??this.length-1);if(c===-1){for(let u=0;u<=(l??this.length-1);u+=1)if(ln(this[u])===i){as("array.lastIndexOf(...)");break}}return c},e.includes=function(i,l){const c=a.call(this,i,l);if(!c){for(let u=0;u<this.length;u+=1)if(ln(this[u])===i){as("array.includes(...)");break}}return c},Array.__svelte_cleanup=()=>{e.indexOf=r,e.lastIndexOf=s,e.includes=a}}var Pn,vs,ba,ya;function el(){if(Pn===void 0){Pn=window,vs=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;ba=nr(t,"firstChild").get,ya=nr(t,"nextSibling").get,Vs(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Vs(r)&&(r.__t=void 0),L&&(e.__svelte_meta=null,Xo())}}function Wt(e=""){return document.createTextNode(e)}function Cr(e){return ba.call(e)}function cn(e){return ya.call(e)}function d(e,t){return Cr(e)}function it(e,t=!1){{var r=Cr(e);return r instanceof Comment&&r.data===""?cn(r):r}}function m(e,t=1,r=!1){let s=e;for(;t--;)s=cn(s);return s}function tl(e){e.textContent=""}function wa(){return!1}function xa(e,t,r){return document.createElementNS(t??Zs,e,void 0)}let Sa=!1;function rl(){Sa||(Sa=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function An(e){var t=pe,r=de;ht(null),Ct(null);try{return e()}finally{ht(t),Ct(r)}}function ka(e,t,r,s=r){e.addEventListener(t,()=>An(r));const a=e.__on_r;a?e.__on_r=()=>{a(),s(!0)}:e.__on_r=()=>s(!0),rl()}function Ea(e){de===null&&(pe===null&&to(e),eo()),fr&&Xi(e)}function nl(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Lt(e,t,r){var s=de;if(L)for(;s!==null&&(s.f&En)!==0;)s=s.parent;s!==null&&(s.f&at)!==0&&(e|=at);var a={ctx:ge,deps:null,nodes:null,f:e|Ve|vt,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(L&&(a.component_function=rn),r)try{Lr(a)}catch(c){throw nt(a),c}else t!==null&&Nt(a);var i=a;if(r&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&qr)===0&&(i=i.first,(e&qt)!==0&&(e&zr)!==0&&i!==null&&(i.f|=zr)),i!==null&&(i.parent=s,s!==null&&nl(i,s),pe!==null&&(pe.f&Be)!==0&&(e&kr)===0)){var l=pe;(l.effects??=[]).push(i)}return a}function ps(){return pe!==null&&!Rt}function Mn(e){const t=Lt(en,null,!1);return Ne(t,je),t.teardown=e,t}function _s(e){Ea("$effect"),L&&rr(e,"name",{value:"$effect"});var t=de.f,r=!pe&&(t&kt)!==0&&(t&Er)===0;if(r){var s=ge;(s.e??=[]).push(e)}else return Ta(e)}function Ta(e){return Lt(Xr|Ws,e,!1)}function sl(e){return Ea("$effect.pre"),L&&rr(e,"name",{value:"$effect.pre"}),Lt(en|Ws,e,!0)}function al(e){or.ensure();const t=Lt(kr|qr,e,!0);return(r={})=>new Promise(s=>{r.outro?Pr(t,()=>{nt(t),s(void 0)}):(nt(t),s(void 0))})}function $a(e){return Lt(Xr,e,!1)}function rt(e,t){var r=ge,s={effect:null,ran:!1,deps:e};r.l.$.push(s),s.effect=un(()=>{e(),!s.ran&&(s.ran=!0,S(t))})}function ur(){var e=ge;un(()=>{for(var t of e.l.$){t.deps();var r=t.effect;(r.f&je)!==0&&r.deps!==null&&Ne(r,pt),Wr(r)&&Lr(r),t.ran=!1}})}function il(e){return Lt(Tn|qr,e,!0)}function un(e,t=0){return Lt(en|t,e,!0)}function ee(e,t=[],r=[],s=[]){zo(s,t,r,a=>{Lt(en,()=>e(...a.map(n)),!0)})}function hs(e,t=0){var r=Lt(qt|t,e,!0);return L&&(r.dev_stack=tn),r}function _t(e){return Lt(kt|qr,e,!0)}function Na(e){var t=e.teardown;if(t!==null){const r=fr,s=pe;La(!0),ht(null);try{t.call(null)}finally{La(r),ht(s)}}}function gs(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const a=r.ac;a!==null&&An(()=>{a.abort(Tr)});var s=r.next;(r.f&kr)!==0?r.parent=null:nt(r,t),r=s}}function ol(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&kt)===0&&nt(t),t=r}}function nt(e,t=!0){var r=!1;(t||(e.f&Hs)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Ra(e.nodes.start,e.nodes.end),r=!0),gs(e,t&&!r),fn(e,0),Ne(e,Bt);var s=e.nodes&&e.nodes.t;if(s!==null)for(const i of s)i.stop();Na(e);var a=e.parent;a!==null&&a.first!==null&&Ca(e),L&&(e.component_function=null),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Ra(e,t){for(;e!==null;){var r=e===t?null:cn(e);e.remove(),e=r}}function Ca(e){var t=e.parent,r=e.prev,s=e.next;r!==null&&(r.next=s),s!==null&&(s.prev=r),t!==null&&(t.first===e&&(t.first=s),t.last===e&&(t.last=r))}function Pr(e,t,r=!0){var s=[];Pa(e,s,!0);var a=()=>{r&&nt(e),t&&t()},i=s.length;if(i>0){var l=()=>--i||a();for(var c of s)c.out(l)}else a()}function Pa(e,t,r){if((e.f&at)===0){e.f^=at;var s=e.nodes&&e.nodes.t;if(s!==null)for(const c of s)(c.is_global||r)&&t.push(c);for(var a=e.first;a!==null;){var i=a.next,l=(a.f&zr)!==0||(a.f&kt)!==0&&(e.f&qt)!==0;Pa(a,t,l?r:!1),a=i}}}function ms(e){Aa(e,!0)}function Aa(e,t){if((e.f&at)!==0){e.f^=at,(e.f&je)===0&&(Ne(e,Ve),Nt(e));for(var r=e.first;r!==null;){var s=r.next,a=(r.f&zr)!==0||(r.f&kt)!==0;Aa(r,a?t:!1),r=s}var i=e.nodes&&e.nodes.t;if(i!==null)for(const l of i)(l.is_global||t)&&l.in()}}function Ma(e,t){if(e.nodes)for(var r=e.nodes.start,s=e.nodes.end;r!==null;){var a=r===s?null:cn(r);t.append(r),r=a}}let Ln=!1,fr=!1;function La(e){fr=e}let pe=null,Rt=!1;function ht(e){pe=e}let de=null;function Ct(e){de=e}let gt=null;function Ia(e){pe!==null&&(gt===null?gt=[e]:gt.push(e))}let st=null,ot=0,mt=null;function ll(e){mt=e}let Oa=1,Ar=0,Mr=Ar;function Fa(e){Mr=e}function ja(){return++Oa}function Wr(e){var t=e.f;if((t&Ve)!==0)return!0;if(t&Be&&(e.f&=~sr),(t&pt)!==0){for(var r=e.deps,s=r.length,a=0;a<s;a++){var i=r[a];if(Wr(i)&&pa(i),i.wv>e.wv)return!0}(t&vt)!==0&&$t===null&&Ne(e,je)}return!1}function Da(e,t,r=!0){var s=e.reactions;if(s!==null&&!(gt!==null&&Sr.call(gt,e)))for(var a=0;a<s.length;a++){var i=s[a];(i.f&Be)!==0?Da(i,t,!1):t===i&&(r?Ne(i,Ve):(i.f&je)!==0&&Ne(i,pt),Nt(i))}}function bs(e){var t=st,r=ot,s=mt,a=pe,i=gt,l=ge,c=Rt,u=Mr,v=e.f;st=null,ot=0,mt=null,pe=(v&(kt|kr))===0?e:null,gt=null,Vr(e.ctx),Rt=!1,Mr=++Ar,e.ac!==null&&(An(()=>{e.ac.abort(Tr)}),e.ac=null);try{e.f|=ts;var h=e.fn,g=h();e.f|=Er;var p=e.deps,w=_e?.is_fork;if(st!==null){var y;if(w||fn(e,ot),p!==null&&ot>0)for(p.length=ot+st.length,y=0;y<st.length;y++)p[ot+y]=st[y];else e.deps=p=st;if(ps()&&(e.f&vt)!==0)for(y=ot;y<p.length;y++)(p[y].reactions??=[]).push(e)}else!w&&p!==null&&ot<p.length&&(fn(e,ot),p.length=ot);if(nn()&&mt!==null&&!Rt&&p!==null&&(e.f&(Be|pt|Ve))===0)for(y=0;y<mt.length;y++)Da(mt[y],e);if(a!==null&&a!==e){if(Ar++,a.deps!==null)for(let x=0;x<r;x+=1)a.deps[x].rv=Ar;if(t!==null)for(const x of t)x.rv=Ar;mt!==null&&(s===null?s=mt:s.push(...mt))}return(e.f&ar)!==0&&(e.f^=ar),g}catch(x){return sa(x)}finally{e.f^=ts,st=t,ot=r,mt=s,pe=a,gt=i,Vr(l),Rt=c,Mr=u}}function cl(e,t){let r=t.reactions;if(r!==null){var s=Vi.call(r,e);if(s!==-1){var a=r.length-1;a===0?r=t.reactions=null:(r[s]=r[a],r.pop())}}if(r===null&&(t.f&Be)!==0&&(st===null||!Sr.call(st,t))){var i=t;(i.f&vt)!==0&&(i.f^=vt,i.f&=~sr),os(i),Wo(i),fn(i,0)}}function fn(e,t){var r=e.deps;if(r!==null)for(var s=t;s<r.length;s++)cl(e,r[s])}function Lr(e){var t=e.f;if((t&Bt)===0){Ne(e,je);var r=de,s=Ln;if(de=e,Ln=!0,L){var a=rn;ra(e.component_function);var i=tn;$n(e.dev_stack??tn)}try{(t&(qt|Js))!==0?ol(e):gs(e),Na(e);var l=bs(e);e.teardown=typeof l=="function"?l:null,e.wv=Oa;var c;L&&$o&&(e.f&Ve)!==0&&e.deps}finally{Ln=s,de=r,L&&(ra(a),$n(i))}}}async function za(){await Promise.resolve(),Lo()}function n(e){var t=e.f,r=(t&Be)!==0;if(pe!==null&&!Rt){var s=de!==null&&(de.f&Bt)!==0;if(!s&&(gt===null||!Sr.call(gt,e))){var a=pe.deps;if((pe.f&ts)!==0)e.rv<Ar&&(e.rv=Ar,st===null&&a!==null&&a[ot]===e?ot++:st===null?st=[e]:st.push(e));else{(pe.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[pe]:Sr.call(i,pe)||i.push(pe)}}}if(L&&Vo.delete(e),fr&&lr.has(e))return lr.get(e);if(r){var l=e;if(fr){var c=l.v;return((l.f&je)===0&&l.reactions!==null||Ba(l))&&(c=fs(l)),lr.set(l,c),c}var u=(l.f&vt)===0&&!Rt&&pe!==null&&(Ln||(pe.f&vt)!==0),v=(l.f&Er)===0;Wr(l)&&(u&&(l.f|=vt),pa(l)),u&&!v&&(_a(l),qa(l))}if($t?.has(e))return $t.get(e);if((e.f&ar)!==0)throw e.v;return e.v}function qa(e){if(e.f|=vt,e.deps!==null)for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&Be)!==0&&(t.f&vt)===0&&(_a(t),qa(t))}function Ba(e){if(e.v===Ue)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(lr.has(t)||(t.f&Be)!==0&&Ba(t))return!0;return!1}function S(e){var t=Rt;try{return Rt=!0,e()}finally{Rt=t}}function ve(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ut in e)ys(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&Ut in r&&ys(r)}}}function ys(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let s in e)try{ys(e[s],t)}catch{}const r=Zn(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const s=Bs(r);for(let a in s){const i=s[a].get;if(i)try{i.call(e)}catch{}}}}}const ul=["touchstart","touchmove"];function fl(e){return ul.includes(e)}const In=Symbol("events"),dl=new Set,Va=new Set;function vl(e,t,r,s={}){function a(i){if(s.capture||ws.call(t,i),!i.cancelBubble)return An(()=>r?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Jt(()=>{t.addEventListener(e,a,s)}):t.addEventListener(e,a,s),a}function re(e,t,r,s,a){var i={capture:s,passive:a},l=vl(e,t,r,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Mn(()=>{t.removeEventListener(e,l,i)})}let Ua=null;function ws(e){var t=this,r=t.ownerDocument,s=e.type,a=e.composedPath?.()||[],i=a[0]||e.target;Ua=e;var l=0,c=Ua===e&&e[In];if(c){var u=a.indexOf(c);if(u!==-1&&(t===document||t===window)){e[In]=t;return}var v=a.indexOf(t);if(v===-1)return;u<=v&&(l=u)}if(i=a[l]||e.target,i!==t){rr(e,"currentTarget",{configurable:!0,get(){return i||r}});var h=pe,g=de;ht(null),Ct(null);try{for(var p,w=[];i!==null;){var y=i.assignedSlot||i.parentNode||i.host||null;try{var x=i[In]?.[s];x!=null&&(!i.disabled||e.target===i)&&x.call(i,e)}catch(b){p?w.push(b):p=b}if(e.cancelBubble||y===t||y===null)break;i=y}if(p){for(let b of w)queueMicrotask(()=>{throw b});throw p}}finally{e[In]=t,delete e.currentTarget,ht(h),Ct(g)}}}const pl=globalThis?.window?.trustedTypes&&globalThis.window.trustedTypes.createPolicy("svelte-trusted-html",{createHTML:e=>e});function _l(e){return pl?.createHTML(e)??e}function hl(e){var t=xa("template");return t.innerHTML=_l(e.replaceAll("<!>","<!---->")),t.content}function dn(e,t){var r=de;r.nodes===null&&(r.nodes={start:e,end:t,a:null,t:null})}function J(e,t){var r=(t&bo)!==0,s=(t&yo)!==0,a,i=!e.startsWith("<!>");return()=>{a===void 0&&(a=hl(i?e:"<!>"+e),r||(a=Cr(a)));var l=s||vs?document.importNode(a,!0):a.cloneNode(!0);if(r){var c=Cr(l),u=l.lastChild;dn(c,u)}else dn(l,l);return l}}function gl(e=""){{var t=Wt(e+"");return dn(t,t),t}}function bt(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Wt();return e.append(t,r),dn(t,r),e}function I(e,t){e!==null&&e.before(t)}function N(e,t){var r=t==null?"":typeof t=="object"?`${t}`:t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=`${r}`)}function ml(e,t){return bl(e,t)}const On=new Map;function bl(e,{target:t,anchor:r,props:s={},events:a,context:i,intro:l=!0,transformError:c}){el();var u=void 0,v=al(()=>{var h=r??t.appendChild(Wt());jo(h,{pending:()=>{}},w=>{Et({});var y=ge;i&&(y.c=i),a&&(s.$$events=a),u=e(w,s)||{},Tt()},c);var g=new Set,p=w=>{for(var y=0;y<w.length;y++){var x=w[y];if(!g.has(x)){g.add(x);var b=fl(x);for(const T of[t,document]){var E=On.get(T);E===void 0&&(E=new Map,On.set(T,E));var F=E.get(x);F===void 0?(T.addEventListener(x,ws,{passive:b}),E.set(x,1)):E.set(x,F+1)}}}};return p(kn(dl)),Va.add(p),()=>{for(var w of g)for(const b of[t,document]){var y=On.get(b),x=y.get(w);--x==0?(b.removeEventListener(w,ws),y.delete(w),y.size===0&&On.delete(b)):y.set(w,x)}Va.delete(p),h!==r&&h.parentNode?.removeChild(h)}});return yl.set(u,v),u}let yl=new WeakMap;class wl{anchor;#t=new Map;#o=new Map;#e=new Map;#i=new Set;#n=!0;constructor(t,r=!0){this.anchor=t,this.#n=r}#a=()=>{var t=_e;if(this.#t.has(t)){var r=this.#t.get(t),s=this.#o.get(r);if(s)ms(s),this.#i.delete(r);else{var a=this.#e.get(r);a&&(this.#o.set(r,a.effect),this.#e.delete(r),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),s=a.effect)}for(const[i,l]of this.#t){if(this.#t.delete(i),i===t)break;const c=this.#e.get(l);c&&(nt(c.effect),this.#e.delete(l))}for(const[i,l]of this.#o){if(i===r||this.#i.has(i))continue;const c=()=>{if(Array.from(this.#t.values()).includes(i)){var v=document.createDocumentFragment();Ma(l,v),v.append(Wt()),this.#e.set(i,{effect:l,fragment:v})}else nt(l);this.#i.delete(i),this.#o.delete(i)};this.#n||!s?(this.#i.add(i),Pr(l,c,!1)):c()}}};#r=t=>{this.#t.delete(t);const r=Array.from(this.#t.values());for(const[s,a]of this.#e)r.includes(s)||(nt(a.effect),this.#e.delete(s))};ensure(t,r){var s=_e,a=wa();if(r&&!this.#o.has(t)&&!this.#e.has(t))if(a){var i=document.createDocumentFragment(),l=Wt();i.append(l),this.#e.set(t,{effect:_t(()=>r(l)),fragment:i})}else this.#o.set(t,_t(()=>r(this.anchor)));if(this.#t.set(s,t),a){for(const[c,u]of this.#o)c===t?s.unskip_effect(u):s.skip_effect(u);for(const[c,u]of this.#e)c===t?s.unskip_effect(u.effect):s.skip_effect(u.effect);s.oncommit(this.#a),s.ondiscard(this.#r)}else this.#a()}}function we(e,t,r=!1){var s=new wl(e),a=r?zr:0;function i(l,c){s.ensure(l,c)}hs(()=>{var l=!1;t((c,u=0)=>{l=!0,i(u,c)}),l||i(!1,null)},a)}function lt(e,t){return t}function xl(e,t,r){for(var s=[],a=t.length,i,l=t.length,c=0;c<a;c++){let g=t[c];Pr(g,()=>{if(i){if(i.pending.delete(g),i.done.add(g),i.pending.size===0){var p=e.outrogroups;xs(kn(i.done)),p.delete(i),p.size===0&&(e.outrogroups=null)}}else l-=1},!1)}if(l===0){var u=s.length===0&&r!==null;if(u){var v=r,h=v.parentNode;tl(h),h.append(v),e.items.clear()}xs(t,!u)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function xs(e,t=!0){for(var r=0;r<e.length;r++)nt(e[r],t)}var Ja;function ct(e,t,r,s,a,i=null){var l=e,c=new Map,u=(t&Qs)!==0;if(u){var v=e;l=v.appendChild(Wt())}var h=null,g=Ke(()=>{var E=r();return Zr(E)?E:E==null?[]:kn(E)}),p,w=!0;function y(){b.fallback=h,Sl(b,p,l,t,s),h!==null&&(p.length===0?(h.f&Vt)===0?ms(h):(h.f^=Vt,pn(h,null,l)):Pr(h,()=>{h=null}))}var x=hs(()=>{p=n(g);for(var E=p.length,F=new Set,T=_e,A=wa(),R=0;R<E;R+=1){var j=p[R],q=s(j,R);if(L){var G=s(j,R);q!==G&&Zi(String(R),String(q),String(G))}var Z=w?null:c.get(q);Z?(Z.v&&Jr(Z.v,j),Z.i&&Jr(Z.i,R),A&&T.unskip_effect(Z.e)):(Z=kl(c,w?l:Ja??=Wt(),j,q,R,a,t,r),w||(Z.e.f|=Vt),c.set(q,Z)),F.add(q)}if(E===0&&i&&!h&&(w?h=_t(()=>i(l)):(h=_t(()=>i(Ja??=Wt())),h.f|=Vt)),E>F.size&&(L?El(p,s):Ys("","","")),!w)if(A){for(const[Q,xe]of c)F.has(Q)||T.skip_effect(xe.e);T.oncommit(y),T.ondiscard(()=>{})}else y();n(g)}),b={effect:x,items:c,outrogroups:null,fallback:h};w=!1}function vn(e){for(;e!==null&&(e.f&kt)===0;)e=e.next;return e}function Sl(e,t,r,s,a){var i=(s&fo)!==0,l=t.length,c=e.items,u=vn(e.effect.first),v,h=null,g,p=[],w=[],y,x,b,E;if(i)for(E=0;E<l;E+=1)y=t[E],x=a(y,E),b=c.get(x).e,(b.f&Vt)===0&&(b.nodes?.a?.measure(),(g??=new Set).add(b));for(E=0;E<l;E+=1){if(y=t[E],x=a(y,E),b=c.get(x).e,e.outrogroups!==null)for(const Q of e.outrogroups)Q.pending.delete(b),Q.done.delete(b);if((b.f&Vt)!==0)if(b.f^=Vt,b===u)pn(b,null,r);else{var F=h?h.next:u;b===e.effect.last&&(e.effect.last=b.prev),b.prev&&(b.prev.next=b.next),b.next&&(b.next.prev=b.prev),dr(e,h,b),dr(e,b,F),pn(b,F,r),h=b,p=[],w=[],u=vn(h.next);continue}if((b.f&at)!==0&&(ms(b),i&&(b.nodes?.a?.unfix(),(g??=new Set).delete(b))),b!==u){if(v!==void 0&&v.has(b)){if(p.length<w.length){var T=w[0],A;h=T.prev;var R=p[0],j=p[p.length-1];for(A=0;A<p.length;A+=1)pn(p[A],T,r);for(A=0;A<w.length;A+=1)v.delete(w[A]);dr(e,R.prev,j.next),dr(e,h,R),dr(e,j,T),u=T,h=j,E-=1,p=[],w=[]}else v.delete(b),pn(b,u,r),dr(e,b.prev,b.next),dr(e,b,h===null?e.effect.first:h.next),dr(e,h,b),h=b;continue}for(p=[],w=[];u!==null&&u!==b;)(v??=new Set).add(u),w.push(u),u=vn(u.next);if(u===null)continue}(b.f&Vt)===0&&p.push(b),h=b,u=vn(b.next)}if(e.outrogroups!==null){for(const Q of e.outrogroups)Q.pending.size===0&&(xs(kn(Q.done)),e.outrogroups?.delete(Q));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||v!==void 0){var q=[];if(v!==void 0)for(b of v)(b.f&at)===0&&q.push(b);for(;u!==null;)(u.f&at)===0&&u!==e.fallback&&q.push(u),u=vn(u.next);var G=q.length;if(G>0){var Z=(s&Qs)!==0&&l===0?r:null;if(i){for(E=0;E<G;E+=1)q[E].nodes?.a?.measure();for(E=0;E<G;E+=1)q[E].nodes?.a?.fix()}xl(e,q,Z)}}i&&Jt(()=>{if(g!==void 0)for(b of g)b.nodes?.a?.apply()})}function kl(e,t,r,s,a,i,l,c){var u=(l&co)!==0?(l&vo)===0?$(r,!1,!1):Nr(r):null,v=(l&uo)!==0?Nr(a):null;return L&&u&&(u.trace=()=>{c()[v?.v??a]}),{v:u,i:v,e:_t(()=>(i(t,u??r,v??a,c),()=>{e.delete(s)}))}}function pn(e,t,r){if(e.nodes)for(var s=e.nodes.start,a=e.nodes.end,i=t&&(t.f&Vt)===0?t.nodes.start:r;s!==null;){var l=cn(s);if(i.before(s),s===a)return;s=l}}function dr(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}function El(e,t){const r=new Map,s=e.length;for(let a=0;a<s;a++){const i=t(e[a],a);if(r.has(i)){const l=String(r.get(i)),c=String(a);let u=String(i);u.startsWith("[object ")&&(u=null),Ys(l,c,u)}r.set(i,a)}}function Tl(e,t,r=!1,s=!1,a=!1){var i=e,l="";ee(()=>{var c=de;if(l!==(l=t()??"")&&(c.nodes!==null&&(Ra(c.nodes.start,c.nodes.end),c.nodes=null),l!=="")){var u=r?xo:s?So:void 0,v=xa(r?"svg":s?"math":"template",u);v.innerHTML=l;var h=r||s?v:v.content;if(dn(Cr(h),h.lastChild),r||s)for(;Cr(h);)i.before(Cr(h));else i.before(h)}})}function Ha(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Ha(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function $l(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Ha(e))&&(s&&(s+=" "),s+=t);return s}function Wa(e){return typeof e=="object"?$l(e):e??""}function Nl(e,t,r){var s=e==null?"":""+e;return t&&(s=s?s+" "+t:t),s===""?null:s}function Rl(e,t){return e==null?null:String(e)}function Ye(e,t,r,s,a,i){var l=e.__className;if(l!==r||l===void 0){var c=Nl(r,s);c==null?e.removeAttribute("class"):e.className=c,e.__className=r}return i}function Ss(e,t,r,s){var a=e.__style;if(a!==t){var i=Rl(t);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}return s}function Ga(e,t,r=!1){if(e.multiple){if(t==null)return;if(!Zr(t))return ko();for(var s of e.options)s.selected=t.includes(_n(s));return}for(s of e.options){var a=_n(s);if(Yo(a,t)){s.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Cl(e){var t=new MutationObserver(()=>{Ga(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Mn(()=>{t.disconnect()})}function Fn(e,t,r=t){var s=new WeakSet,a=!0;ka(e,"change",i=>{var l=i?"[selected]":":checked",c;if(e.multiple)c=[].map.call(e.querySelectorAll(l),_n);else{var u=e.querySelector(l)??e.querySelector("option:not([disabled])");c=u&&_n(u)}r(c),_e!==null&&s.add(_e)}),$a(()=>{var i=t();if(e===document.activeElement){var l=Rn??_e;if(s.has(l))return}if(Ga(e,i,a),a&&i===void 0){var c=e.querySelector(":checked");c!==null&&(i=_n(c),r(i))}e.__value=i,a=!1}),Cl(e)}function _n(e){return"__value"in e?e.__value:e.value}const Pl=Symbol("is custom element"),Al=Symbol("is html");function hn(e,t,r,s){var a=Ml(e);a[t]!==(a[t]=r)&&(t==="loading"&&(e[Ki]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Ll(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Ml(e){return e.__attributes??={[Pl]:e.nodeName.includes("-"),[Al]:e.namespaceURI===Zs}}var Ka=new Map;function Ll(e){var t=e.getAttribute("is")||e.nodeName,r=Ka.get(t);if(r)return r;Ka.set(t,r=[]);for(var s,a=e,i=Element.prototype;i!==a;){s=Bs(a);for(var l in s)s[l].set&&r.push(l);a=Zn(a)}return r}function Ya(e,t,r=t){var s=new WeakSet;ka(e,"input",async a=>{L&&e.type==="checkbox"&&Ks();var i=a?e.defaultValue:e.value;if(i=ks(e)?Es(i):i,r(i),_e!==null&&s.add(_e),await za(),i!==(i=t())){var l=e.selectionStart,c=e.selectionEnd,u=e.value.length;if(e.value=i??"",c!==null){var v=e.value.length;l===c&&c===u&&v>u?(e.selectionStart=v,e.selectionEnd=v):(e.selectionStart=l,e.selectionEnd=Math.min(c,v))}}}),S(t)==null&&e.value&&(r(ks(e)?Es(e.value):e.value),_e!==null&&s.add(_e)),un(()=>{L&&e.type==="checkbox"&&Ks();var a=t();if(e===document.activeElement){var i=Rn??_e;if(s.has(i))return}ks(e)&&a===Es(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function ks(e){var t=e.type;return t==="number"||t==="range"}function Es(e){return e===""?null:+e}function Qa(e,t,r){var s=nr(e,t);s&&s.set&&(e[t]=r,Mn(()=>{e[t]=null}))}function Za(e,t){return e===t||e?.[Ut]===t}function Ir(e={},t,r,s){return $a(()=>{var a,i;return un(()=>{a=i,i=[],S(()=>{e!==r(...i)&&(t(e,...i),a&&Za(r(...a),e)&&t(null,...a))})}),()=>{Jt(()=>{i&&Za(r(...i),e)&&t(null,...i)})}}),e}function Il(e){return function(...t){var r=t[0];return r.preventDefault(),e?.apply(this,t)}}function It(e=!1){const t=ge,r=t.l.u;if(!r)return;let s=()=>ve(t.s);if(e){let a=0,i={};const l=an(()=>{let c=!1;const u=t.s;for(const v in u)u[v]!==i[v]&&(i[v]=u[v],c=!0);return c&&a++,a});s=()=>n(l)}r.b.length&&sl(()=>{Xa(t,s),Xn(r.b)}),_s(()=>{const a=S(()=>r.m.map(Wi));return()=>{for(const i of a)typeof i=="function"&&i()}}),r.a.length&&_s(()=>{Xa(t,s),Xn(r.a)})}function Xa(e,t){if(e.l.s)for(const r of e.l.s)n(r);t()}function Ol(e,t){var r=e.$$events?.[t.type],s=Zr(r)?r.slice():r==null?[]:[r];for(var a of s)a.call(this,t)}let jn=!1;function Fl(e){var t=jn;try{return jn=!1,[e(),jn]}finally{jn=t}}function me(e,t,r,s){var a=!Br||(r&_o)!==0,i=(r&go)!==0,l=(r&mo)!==0,c=s,u=!0,v=()=>(u&&(u=!1,c=l?S(s):s),c),h;if(i){var g=Ut in e||Gi in e;h=nr(e,t)?.set??(g&&t in e?T=>e[t]=T:void 0)}var p,w=!1;i?[p,w]=Fl(()=>e[t]):p=e[t],p===void 0&&s!==void 0&&(p=v(),h&&(a&&no(t),h(p)));var y;if(a?y=()=>{var T=e[t];return T===void 0?v():(u=!0,T)}:y=()=>{var T=e[t];return T!==void 0&&(c=void 0),T===void 0?c:T},a&&(r&ho)===0)return y;if(h){var x=e.$$legacy;return(function(T,A){return arguments.length>0?((!a||!A||x||w)&&h(A?y():T),T):y()})}var b=!1,E=((r&po)!==0?an:Ke)(()=>(b=!1,y()));L&&(E.label=t),i&&n(E);var F=de;return(function(T,A){if(arguments.length>0){const R=A?n(E):a&&i?Hr(T):T;return o(E,R),b=!0,c!==void 0&&(c=R),T}return fr&&b||(F.f&Bt)!==0?E.v:n(E)})}if(L){let e=function(t){if(!(t in globalThis)){let r;Object.defineProperty(globalThis,t,{configurable:!0,get:()=>{if(r!==void 0)return r;so(t)},set:s=>{r=s}})}};e("$state"),e("$effect"),e("$derived"),e("$inspect"),e("$props"),e("$bindable")}function vr(e){ge===null&&rs("onMount"),Br&&ge.l!==null?Dl(ge).m.push(e):_s(()=>{const t=S(e);if(typeof t=="function")return t})}function Dn(e){ge===null&&rs("onDestroy"),vr(()=>()=>S(e))}function jl(e,t,{bubbles:r=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:s})}function ei(){const e=ge;return e===null&&rs("createEventDispatcher"),(t,r,s)=>{const a=e.s.$$events?.[t];if(a){const i=Zr(a)?a.slice():[a],l=jl(t,r,s);for(const c of i)c.call(e.x,l);return!l.defaultPrevented}return!0}}function Dl(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const zl="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(zl),No();const ql=(e,t,r)=>r&&typeof r=="object"?typeof r.message=="string"?r.message:typeof r.code=="string"?r.code:JSON.stringify(r):typeof r=="string"&&r.trim()?r:`${e} ${t}`,Re=async(e,t={})=>{const r=await fetch(e,t),s=await r.text(),a=s?JSON.parse(s):{};if(!r.ok)throw new Error(ql(r.status,r.statusText,a?.detail));return a},Bl=()=>Re("/api/v1/capabilities"),Vl=()=>Re("/api/v1/version"),Ul=(e=[])=>Re("/api/v1/log/client",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:Array.isArray(e)?e:[]})}),Jl=()=>Re("/api/v1/playground/files"),Hl=e=>Re(`/api/v1/playground/files/${sc(e)}`),ti=e=>Re("/api/v1/playground/symbols",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({program:e})}),Wl=e=>Re("/api/v1/playground/jobs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({program:e,execute:!0,execution_strategy:"dask"})}),Gl=()=>Re("/api/v1/playground/jobs"),ri=e=>Re(`/api/v1/playground/jobs/${encodeURIComponent(e)}`),ni=e=>Re(`/api/v1/playground/jobs/${encodeURIComponent(e)}`,{method:"DELETE"}),si=({program:e,nodeId:t="",variable:r="",path:s="",enqueue:a=!0})=>{const i={program:e,execution_strategy:"dask",variable:r,path:s,enqueue:a};return!r&&t&&(i.node_id=t),Re("/api/v1/playground/value",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})},ai=({program:e,nodeId:t="",variable:r="",path:s="",offset:a=0,limit:i=64,enqueue:l=!0})=>{const c={program:e,execution_strategy:"dask",variable:r,path:s,offset:Math.max(0,Number(a||0)),limit:Math.max(1,Number(i||64)),enqueue:l};return!r&&t&&(c.node_id=t),Re("/api/v1/playground/value/page",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})},Kl=({limit:e=200,statusFilter:t="",nodeFilter:r=""}={})=>{const s=new URLSearchParams;return s.set("limit",`${e}`),t&&s.set("status_filter",t),r&&s.set("node_filter",r),Re(`/api/v1/results/store?${s.toString()}`)},Yl=(e,t="")=>{const r=t?`?path=${encodeURIComponent(t)}`:"";return Re(`/api/v1/results/store/${encodeURIComponent(e)}${r}`)},Ql=({nodeId:e,path:t="",offset:r=0,limit:s=64})=>{const a=new URLSearchParams;return t&&a.set("path",t),a.set("offset",`${Math.max(0,Number(r||0))}`),a.set("limit",`${Math.max(1,Number(s||64))}`),Re(`/api/v1/results/store/${encodeURIComponent(e)}/page?${a.toString()}`)},Zl=()=>Re("/api/v1/docs/gallery"),Xl=()=>Re("/api/v1/testing/report"),ec=()=>Re("/api/v1/testing/jobs"),tc=e=>Re(`/api/v1/testing/jobs/${encodeURIComponent(e)}`),rc=({profile:e,includePerf:t})=>Re("/api/v1/testing/jobs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:e,include_perf:t})}),ii=e=>Re(`/api/v1/testing/jobs/${encodeURIComponent(e)}`,{method:"DELETE"}),nc=()=>Re("/api/v1/storage/stats"),sc=e=>String(e||"").split("/").map(t=>encodeURIComponent(t)).join("/"),ac=({precomputedPrintTargets:e=[],latestGoalResults:t=[],precomputedSymbolTable:r={},latestSymbolTable:s={}})=>{const a=[],i=new Set,l=u=>{const v=`${u.kind}:${u.label}:${u.nodeId}`;i.has(v)||(i.add(v),a.push(u))};for(const u of e)u?.node_id&&l({kind:"print",label:String(u.name||"print"),nodeId:String(u.node_id)});for(const u of t)!u||u.operation!=="print"||!u.node_id||l({kind:"print",label:String(u.name||"print"),nodeId:String(u.node_id)});const c=Object.keys(r||{}).length>0?r:s;for(const[u,v]of Object.entries(c||{}))!v||typeof v!="string"||l({kind:"variable",label:String(u),nodeId:v});return a},oi=e=>{const t=e&&typeof e=="object"?e.execution_errors:null;if(t&&typeof t=="object")return t;const r=e?.diagnostics?.execution_errors;return r&&typeof r=="object"?r:{}},ic=e=>{const t=e&&typeof e=="object"?e.execution_error_details:null;if(t&&typeof t=="object")return t;const r=e?.diagnostics?.execution_error_details;return r&&typeof r=="object"?r:{}},li=e=>{const t=Object.entries(e||{});return t.length?t.map(([r,s])=>`${String(r).slice(0,12)}: ${String(s)}`).join(`
`):"none"},oc=(e,t)=>{const r=Object.entries(e||{});if(!r.length)return"";const s=(a,i=120)=>{const l=String(a??"");return l.length<=i?l:`${l.slice(0,i)}...`};return r.map(([a,i])=>{const l=i?.operator?String(i.operator):"unknown",c=Array.isArray(i?.args)?i.args.map(b=>s(b)).join(", "):"",u=i&&typeof i.kwargs=="object"&&i.kwargs?Object.entries(i.kwargs).map(([b,E])=>`${String(b)}=${s(E)}`).join(", "):"",v=i&&typeof i.attrs=="object"&&i.attrs?s(JSON.stringify(i.attrs)):"",h=i?.kind?` kind=${String(i.kind)}`:"",g=i?.output_kind?` output=${String(i.output_kind)}`:"",p=t?.[a]?String(t[a]):"",w=u?`${l}(${c}${c?", ":""}${u})`:`${l}(${c})`,y=v&&v!=="{}"?` attrs=${v}`:"",x=p?` error=${p}`:"";return`${String(a).slice(0,12)}: ${w}${y}${h}${g}${x}`}).join(`
`)},lc=(e,t)=>{const r=String(e.node_id||t.nodeId||""),s=e.path||t.path||"",a=String(e.compute_status||e.status||"failed"),i=[`node: ${r||"-"}`,`path: ${s||"/"}`,`status: ${a}`],l=String(e.store_status||e?.diagnostics?.store_status||"missing");i.push(`store: ${l}`),e.error&&i.push(`error: ${String(e.error)}`),e.job_error&&i.push(`job_error: ${String(e.job_error)}`),e.store_error&&i.push(`store_error: ${String(e.store_error)}`);const c=e?.diagnostics;c&&typeof c=="object"&&(c.job_error&&!e.job_error&&i.push(`job_error: ${String(c.job_error)}`),c.store_error&&!e.store_error&&i.push(`store_error: ${String(c.store_error)}`));const u=oi(e);Object.keys(u).length&&(i.push("execution_errors:"),i.push(li(u)));const v=oc(ic(e),u);return v&&(i.push("failed_operations:"),i.push(v)),i.join(`
`)},ci=e=>{if(!e||typeof e!="object")return"value available";const t=String(e.vox_type||"value"),r=e.summary&&typeof e.summary=="object"?e.summary:{};return["integer","number","boolean"].includes(t)?`${t}: ${r.value}`:t==="string"?`string(${r.length||0}): ${r?.value||""}`:t==="ndarray"?`ndarray ${(r.shape||[]).join("x")} ${r.dtype||""}`.trim():["image2d","volume3d"].includes(t)?`${t} ${(r.size||[]).join("x")} ${r.pixel_id||""}`.trim():t==="sequence"?`sequence length=${r.length||0}`:t==="mapping"?`mapping length=${r.length||0}`:t},cc=e=>String(e).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;"),Ts=e=>String(e).replaceAll("&","&amp;").replaceAll('"',"&quot;").replaceAll("'","&#39;").replaceAll("<","&lt;").replaceAll(">","&gt;"),$s=["import","let","in","for","do","true","false"],uc=new Set($s),fc=/[A-Za-z_.$]/,dc=/[A-Za-z0-9_.$]/,vc=/[0-9]/,zn=/[A-Za-z0-9_.$]/,pc=e=>{const t=String(e?.location||""),r=String(e?.message||""),s=`${t} ${r}`;let a=s.match(/line\s+(\d+)(?:\s*,\s*column\s+(\d+))?/i);return a?{line:Number(a[1]),column:a[2]?Number(a[2]):null}:(a=s.match(/(?:^|\s)(\d+):(\d+)(?:\s|$)/),a?{line:Number(a[1]),column:Number(a[2])}:null)},_c=e=>{const t=[];let r=0;for(;r<e.length;){const s=e[r];if(s==="/"&&e[r+1]==="/"){t.push({kind:"comment",text:e.slice(r)});break}if(s==='"'){let a=r+1;for(;a<e.length;){if(e[a]==='"'&&e[a-1]!=="\\"){a+=1;break}a+=1}t.push({kind:"string",text:e.slice(r,a)}),r=a;continue}if(vc.test(s)){let a=r+1;for(;a<e.length&&/[0-9.]/.test(e[a]);)a+=1;t.push({kind:"number",text:e.slice(r,a)}),r=a;continue}if(fc.test(s)){let a=r+1;for(;a<e.length&&dc.test(e[a]);)a+=1;const i=e.slice(r,a);t.push({kind:uc.has(i)?"keyword":"identifier",text:i}),r=a;continue}if(/\s/.test(s)){let a=r+1;for(;a<e.length&&/\s/.test(e[a]);)a+=1;t.push({kind:"space",text:e.slice(r,a)}),r=a;continue}t.push({kind:"operator",text:s}),r+=1}return t},hc=(e,t)=>{const r=String(e.text||""),s=cc(r);if(e.kind==="space")return s;if(e.kind==="identifier"&&t.has(r)){const i=encodeURIComponent(r);return`<button type="button" class="vx-editor__symbol" data-token="${Ts(i)}" title="Inspect ${Ts(r)}">${s}</button>`}return`<span class="${`vx-editor__token vx-editor__token--${Ts(e.kind)}`}">${s}</span>`},gc=(e,t={},r=[])=>{const s=String(e||""),a=new Set(Object.keys(t||{})),i=new Set;for(const c of Array.isArray(r)?r:[]){const u=pc(c);u?.line&&Number.isFinite(u.line)&&u.line>0&&i.add(u.line)}return s.split(`
`).map((c,u)=>{const v=u+1,h=i.has(v)?"vx-editor__line vx-editor__line--error":"vx-editor__line",p=_c(c).map(w=>hc(w,a)).join("");return`<span class="${h}" data-line="${v}">${p||" "}</span>`}).join("")},mc=(e,t)=>{const r=String(e||""),s=Math.max(0,Math.min(Number(t||0),r.length));let a=s,i=s;for(;a>0&&r[a-1]!==`
`;)a-=1;for(;i<r.length&&r[i]!==`
`;)i+=1;const l=r.slice(a,i).trim();return l?l.length<=160?l:`${l.slice(0,157)}...`:""},bc=(e,t)=>{const r=String(e||"");if(!Number.isInteger(t)||t<0)return{token:"",start:0,end:0};const s=Math.max(0,Math.min(t,r.length));let a=s,i=s;for(;a>0&&zn.test(r[a-1]);)a-=1;for(;i<r.length&&zn.test(r[i]);)i+=1;return{token:r.slice(a,i).trim(),start:a,end:i}},yc=e=>!!e&&!/[A-Za-z0-9_$]/.test(e),wc=(e,t,r)=>{const s=String(e?.value||"");if(!e)return null;const a=e.getBoundingClientRect();if(t<a.left||t>a.right||r<a.top||r>a.bottom)return null;const i=window.getComputedStyle(e),l=i.font||`${i.fontSize} ${i.fontFamily}`,c=Number.parseFloat(i.lineHeight)||Number.parseFloat(i.fontSize)*1.5,u=Number.parseFloat(i.paddingLeft)||0,v=Number.parseFloat(i.paddingTop)||0,h=document.createElement("span");h.style.position="absolute",h.style.visibility="hidden",h.style.whiteSpace="pre",h.style.font=l,h.textContent="MMMMMMMMMM",document.body.appendChild(h);const g=Math.max(1,h.getBoundingClientRect().width/10);h.remove();const p=t-a.left+e.scrollLeft-u,w=r-a.top+e.scrollTop-v,y=Math.max(0,Math.floor(w/c)),x=Math.max(0,Math.floor(p/g)),b=s.split(`
`),E=Math.min(y,Math.max(0,b.length-1));let F=0;for(let T=0;T<E;T+=1)F+=b[T].length+1;return F+=Math.min(x,b[E].length),Math.min(F,s.length)},xc=(e,t)=>{const r=String(e||""),s=Math.max(0,Math.min(Number(t||0),r.length));let a=1,i=-1;for(let l=0;l<s;l+=1)r[l]===`
`&&(a+=1,i=l);return{line:a,column:s-i}},Sc=(e,t)=>{const r=String(e||""),s=Math.max(0,Math.min(Number(t||0),r.length));let a=s;for(;a>0&&zn.test(r[a-1]);)a-=1;let i=s;for(;i<r.length&&zn.test(r[i]);)i+=1;const l=r.slice(a,s),c=r.slice(a,i),u=xc(r,s);return{text:r,cursor:s,from:a,to:i,prefix:l,token:c,line:u.line,column:u.column}},kc=(e,{symbols:t={},keywords:r=$s,builtins:s=[]}={})=>{const a=String(e?.prefix||""),i=a.toLowerCase(),l=new Map;for(const c of r)l.set(c,{label:c,insertText:c,kind:"keyword",detail:"language keyword"});for(const c of s){const u=String(c||"");u&&l.set(u,{label:u,insertText:u,kind:"primitive",detail:"known primitive"})}for(const c of Object.keys(t||{}))l.set(c,{label:c,insertText:c,kind:"symbol",detail:"declared symbol"});return Array.from(l.values()).filter(c=>a?String(c.label||"").toLowerCase().startsWith(i):!0).sort((c,u)=>{const v=String(c.label||""),h=String(u.label||""),g=v.toLowerCase()===i,p=h.toLowerCase()===i;return g&&!p?-1:!g&&p?1:v.localeCompare(h)})},Ec=(e,t,r)=>{const s=String(e||""),a=String(r?.insertText||r?.label||""),i=Math.max(0,Math.min(Number(t?.from||0),s.length)),l=Math.max(i,Math.min(Number(t?.to||i),s.length)),c=`${s.slice(0,i)}${a}${s.slice(l)}`,u=i+a.length;return{text:c,cursor:u}},Tc=(e,t)=>{if(!e)return{left:0,top:0,height:0};const r=String(e.value||""),s=Math.max(0,Math.min(Number(t||0),r.length)),a=window.getComputedStyle(e),i=document.createElement("div");i.style.position="absolute",i.style.visibility="hidden",i.style.whiteSpace="pre-wrap",i.style.wordWrap="break-word",i.style.overflow="hidden",i.style.width=a.width,i.style.font=a.font,i.style.lineHeight=a.lineHeight,i.style.padding=a.padding,i.style.border=a.border,i.style.letterSpacing=a.letterSpacing,i.style.tabSize=a.tabSize;const l=r.slice(0,s),c=r.slice(s)||".";i.textContent=l;const u=document.createElement("span");u.textContent=c[0],i.appendChild(u),document.body.appendChild(i);const v=u.getBoundingClientRect(),h=i.getBoundingClientRect(),g=e.getBoundingClientRect(),p=Number.parseFloat(a.lineHeight)||Number.parseFloat(a.fontSize)*1.5,w=v.left-h.left-e.scrollLeft+g.left,y=v.top-h.top-e.scrollTop+g.top;return document.body.removeChild(i),{left:w,top:y,height:p}};var $c=J('<span class="vx-editor__suggestion-kind svelte-9d6ed"> </span>'),Nc=J('<span class="vx-editor__suggestion-detail svelte-9d6ed"> </span>'),Rc=J('<li role="option"><button type="button" class="vx-editor__suggestion-button svelte-9d6ed"><span class="vx-editor__suggestion-label svelte-9d6ed"> </span> <!> <!></button></li>'),Cc=J('<ul class="vx-editor__suggestions svelte-9d6ed" role="listbox" aria-label="Autocomplete suggestions" data-testid="completion-list"></ul>'),Pc=J('<div class="vx-editor svelte-9d6ed" data-testid="vox-code-editor"><div class="vx-editor__shell svelte-9d6ed"><textarea class="vx-editor__input svelte-9d6ed" spellcheck="false"></textarea> <pre class="vx-editor__overlay svelte-9d6ed" aria-hidden="true" role="presentation" tabindex="-1"><!></pre></div> <!></div>');function ui(e,t){Et(t,!1);let r=me(t,"value",12,""),s=me(t,"symbols",24,()=>({})),a=me(t,"diagnostics",24,()=>[]),i=me(t,"autocompleteEnabled",8,!0),l=me(t,"completionProvider",8,null),c=me(t,"completionKeywords",8,$s),u=me(t,"completionBuiltins",24,()=>[]),v=me(t,"ariaLabel",8,"Program editor"),h=me(t,"placeholder",8,""),g=me(t,"readonly",8,!1);const p=ei();let w=$(),y=$(),x=null,b=null,E=0,F=$(""),T=$([]),A=$(0),R=$(!1),j=null,q=$({left:0,top:0});const G=()=>{o(T,[]),o(A,0),o(R,!1),j=null},Z=()=>{!n(y)||!n(w)||(tt(y,n(y).scrollTop=n(w).scrollTop),tt(y,n(y).scrollLeft=n(w).scrollLeft))},Q=()=>{!i()||g()||(b&&clearTimeout(b),b=setTimeout(()=>{be(!1)},80))},xe=(D,ue)=>{const ce=Array.isArray(D)?D:[],se=String(ue?.prefix||"").toLowerCase();return ce.map(fe=>typeof fe=="string"?{label:fe,insertText:fe,kind:"symbol",detail:""}:{label:String(fe?.label||""),insertText:String(fe?.insertText||fe?.label||""),kind:String(fe?.kind||"symbol"),detail:String(fe?.detail||"")}).filter(fe=>fe.label).filter(fe=>!se||fe.label.toLowerCase().startsWith(se))},be=async D=>{if(!i()||g()||!n(w))return;const ue=Number(n(w).selectionStart||0),ce=Sc(r(),ue);if(!D&&!ce.prefix){G();return}const se=E+1;E=se;let fe=[];if(typeof l()=="function")try{fe=await l()({...ce,symbols:{...s()||{}}})}catch{fe=[]}else fe=kc(ce,{symbols:s(),keywords:c(),builtins:u()});if(se!==E)return;const ze=xe(fe,ce);if(!ze.length){G();return}const $e=Tc(n(w),ce.cursor);o(T,ze),o(A,0),o(R,!0),j=ce,o(q,{left:Math.max(8,Math.round($e.left+8)),top:Math.max(8,Math.round($e.top+$e.height+6))}),p("completionstate",{open:!0,count:n(T).length,prefix:ce.prefix})},Le=async()=>{if(!n(R)||!n(T).length||!j)return!1;const D=n(T)[Math.max(0,Math.min(n(A),n(T).length-1))],ue=Ec(r(),j,D);return r(ue.text),p("change",{value:r()}),G(),await za(),n(w)&&(n(w).focus(),tt(w,n(w).selectionStart=ue.cursor),tt(w,n(w).selectionEnd=ue.cursor)),p("completionapply",{item:D,cursor:ue.cursor}),!0},Ie=()=>{p("change",{value:r()}),p("input",{value:r()}),Q()},Ce=async D=>{if((D.ctrlKey||D.metaKey)&&String(D.key||"").toLowerCase()===" "){D.preventDefault(),await be(!0);return}if(n(R)){if(D.key==="ArrowDown"){D.preventDefault(),o(A,(n(A)+1)%n(T).length);return}if(D.key==="ArrowUp"){D.preventDefault(),o(A,(n(A)-1+n(T).length)%n(T).length);return}if(D.key==="Escape"){D.preventDefault(),G();return}(D.key==="Enter"||D.key==="Tab")&&(D.preventDefault(),await Le())}},Pe=D=>{const ue=D.target instanceof Element?D.target.closest(".vx-editor__symbol"):null;if(!ue)return;const ce=decodeURIComponent(String(ue.getAttribute("data-token")||""));ce&&p("symbolhover",{token:ce})},K=D=>{!(D.target instanceof Element&&D.target.closest(".vx-editor__symbol"))||D.relatedTarget instanceof Element&&D.relatedTarget.closest(".vx-editor__symbol")||p("symbolleave")},B=()=>{},H=()=>{p("symbolleave")},le=D=>{const ue=D.target instanceof Element?D.target.closest(".vx-editor__symbol"):null;if(!ue)return;D.preventDefault();const ce=decodeURIComponent(String(ue.getAttribute("data-token")||""));ce&&(p("symbolclick",{token:ce}),n(w)?.focus({preventScroll:!0}))},Te=D=>{x&&clearTimeout(x),x=setTimeout(()=>{const ue=wc(n(w),D.clientX,D.clientY);if(!Number.isInteger(ue)){p("hoverleave");return}const ce=bc(r(),ue);if(!ce.token){p("hoverleave");return}if(!(s()&&s()[ce.token])){if(!yc(ce.token)){p("hoverleave");return}p("operatorhover",{token:ce.token,context:mc(r(),ce.start)})}},100)},Ae=()=>{x&&(clearTimeout(x),x=null),p("hoverleave")},Se=async D=>{o(A,Number(D||0)),await Le()},U=()=>{x&&(clearTimeout(x),x=null),b&&(clearTimeout(b),b=null)};Dn(()=>{U()}),rt(()=>(ve(r()),ve(s()),ve(a())),()=>{o(F,gc(r(),s(),a()))}),rt(()=>(n(R),n(T)),()=>{!n(R)&&n(T).length&&o(T,[])}),ur(),It();var W=Pc();re("blur",Pn,G),re("beforeunload",Pn,U);var Y=d(W),ne=d(Y);Ir(ne,D=>o(w,D),()=>n(w));var X=m(ne,2),De=d(X);Tl(De,()=>n(F)),Ir(X,D=>o(y,D),()=>n(y));var Ee=m(Y,2);{var Oe=D=>{var ue=Cc();ct(ue,5,()=>n(T),lt,(ce,se,fe)=>{var ze=Rc(),$e=d(ze),ke=d($e),Je=d(ke),ut=m(ke,2);{var Ze=He=>{var We=$c(),Ge=d(We);ee(()=>N(Ge,(n(se),S(()=>n(se).kind)))),I(He,We)};we(ut,He=>{n(se),S(()=>n(se).kind)&&He(Ze)})}var Pt=m(ut,2);{var Gt=He=>{var We=Nc(),Ge=d(We);ee(()=>N(Ge,(n(se),S(()=>n(se).detail)))),I(He,We)};we(Pt,He=>{n(se),S(()=>n(se).detail)&&He(Gt)})}ee(()=>{hn(ze,"aria-selected",fe===n(A)),Ye(ze,1,`vx-editor__suggestion ${fe===n(A)?"is-selected":""}`,"svelte-9d6ed"),N(Je,(n(se),S(()=>n(se).label)))}),re("click",$e,()=>Se(fe)),re("mousedown",ze,Il(function(He){Ol.call(this,t,He)})),I(ce,ze)}),ee(()=>Ss(ue,(n(q),S(()=>`left:${n(q).left}px;top:${n(q).top}px`)))),I(D,ue)};we(Ee,D=>{n(R),n(T),S(()=>n(R)&&n(T).length)&&D(Oe)})}ee(()=>{hn(ne,"aria-label",v()),hn(ne,"placeholder",h()),ne.readOnly=g()}),Ya(ne,r),re("input",ne,Ie),re("keydown",ne,Ce),re("mousemove",ne,Te),re("mouseleave",ne,Ae),re("scroll",ne,Z),re("mouseover",X,Pe),re("mouseout",X,K),re("click",X,le),re("focus",X,B),re("blur",X,H),I(e,W),Tt()}const yt=e=>Number.isFinite(e)?e<.001?`${(e*1e3).toFixed(2)} ms`:`${e.toFixed(3)} s`:"-",fi=e=>Number.isFinite(e)?`${(e*100).toFixed(1)}%`:"-",Qe=e=>{if(!Number.isFinite(e)||e<0)return"-";const t=["B","KB","MB","GB","TB"];let r=e,s=0;for(;r>=1024&&s<t.length-1;)r/=1024,s+=1;return`${r.toFixed(s===0?0:2)} ${t[s]}`},Ns=e=>{const t=e.filter(s=>Number.isFinite(s)).sort((s,a)=>s-a);if(!t.length)return NaN;const r=Math.floor(t.length/2);return t.length%2===1?t[r]:(t[r-1]+t[r])/2},di=e=>{const t=String(e||"idle").toLowerCase();return["running","completed","failed","killed"].includes(t)?t:"neutral"};var Ac=J("<span> </span>");function Rs(e,t){Et(t,!1);let r=me(t,"value",8,"idle"),s=me(t,"extraClass",8,"");It();var a=Ac(),i=d(a);ee((l,c)=>{Ye(a,1,l),N(i,c)},[()=>Wa((ve(di),ve(r()),ve(s()),S(()=>`chip ${di(r())} ${s()}`.trim()))),()=>(ve(r()),S(()=>String(r()||"idle").toLowerCase()))]),I(e,a),Tt()}var Mc=J('<div class="inline-error"> </div>'),Lc=J('<div class="inline-error"> </div>'),Ic=J('<section id="tab-start"><article class="card start-shell"><div class="start-split"><section class="start-result"><header class="start-head"><h2>Start</h2> <div class="row gap-s"><!> <button class="btn btn-primary btn-small" type="button">Run</button></div></header> <div class="start-viewer-wrap"><div class="result-inspector start-viewer"></div></div> <footer class="start-caption"><span class="start-caption-main"> </span> <span class="start-caption-type"> </span></footer></section> <div role="separator" aria-orientation="horizontal" aria-label="Resize result and code panes"><span></span></div> <section class="start-editor"><!></section></div> <p class="start-status muted"> </p> <!></article></section>');function Oc(e,t){Et(t,!1);let r=me(t,"active",8,!1),s=me(t,"capabilities",24,()=>({}));const a="voxlogica.start.program.v1",i=["result","output","masks","vi_sweep_masks"],l=["map","for","range","subsequence","dir","ReadImage","BinaryThreshold","intensity","percentiles","smoothen","grow","touch","not","leq_sv","geq_sv","index"];let u=$(`import "simpleitk"

dataset_root = "tests/data/datasets/BraTS_2019_HGG"
k = 10
hi_thr = 0.93
vi_thr_start = 83
vi_thr_stop = 92
vi_ticks = range(vi_thr_start, vi_thr_stop)
to_thr(tick) = tick / 100
vi_thresholds = map(to_thr, vi_ticks)
all_flair_paths = dir(dataset_root, "*_flair.nii.gz", true, true)
flair_paths = subsequence(all_flair_paths, 0, k)
read_image(path) = ReadImage(path)
to_intensity(img) = intensity(img)
preprocess_flair(flair) =
  let background = touch(leq_sv(0.1, flair), border) in
  let brain = not(background) in
  percentiles(flair, brain, 0)
sweep_case(pflair) =
  let hyper_intense = smoothen(geq_sv(hi_thr, pflair), 5.0) in
  for vi_thr in vi_thresholds do
    let very_intense = smoothen(geq_sv(vi_thr, pflair), 2.0) in
    grow(hyper_intense, very_intense)
flair_images = map(read_image, flair_paths)
flair_intensities = map(to_intensity, flair_images)
pflair_images = map(preprocess_flair, flair_intensities)
vi_sweep_masks = map(sweep_case, pflair_images)`),v=$({}),h=$([]),g=$(""),p=$(62),w=$(!1),y=$(),x=null,b=$("-"),E=$("-"),F=$("idle"),T=$("Write code and run to materialize a result."),A=$(""),R=$(""),j=null,q=null,G=$(!1),Z=0;const Q=()=>{const O=Array.isArray(n(h))?n(h):[];return O.length?O.map(V=>{const z=V?.code?`[${V.code}] `:"",te=V?.message?String(V.message):"Static error",he=V?.location?` @ ${V.location}`:"";return`${z}${te}${he}`}).join(`
`):""},xe=({prefix:O=""})=>{const V=new Map;for(const te of["import","let","in","for","do","true","false"])V.set(te,{label:te,insertText:te,kind:"keyword",detail:"language keyword"});for(const te of l)V.set(te,{label:te,insertText:te,kind:"primitive",detail:"known primitive"});for(const te of Object.keys(n(v)||{}))V.set(te,{label:te,insertText:te,kind:"symbol",detail:"declared symbol"});const z=String(O||"").toLowerCase();return Array.from(V.values()).filter(te=>!z||te.label.toLowerCase().startsWith(z)).sort((te,he)=>String(te.label).localeCompare(String(he.label)))},be=()=>{j&&(clearInterval(j),j=null)},Le=()=>{q&&clearTimeout(q),q=setTimeout(()=>{try{window.localStorage.setItem(a,String(n(u)||""))}catch{}},180)},Ie=(O,V)=>{const z=Object.keys(V||{});if(!z.length)return"";for(const he of i)if(z.includes(he))return he;const te=[...String(O||"").matchAll(/^\s*([A-Za-z_.$][A-Za-z0-9_.$]*)\s*=/gm)];for(let he=te.length-1;he>=0;he-=1){const At=String(te[he]?.[1]||"");if(At&&V[At])return At}return z[z.length-1]||z[0]||""},Ce=()=>{if(x||!n(y))return;const O=window.VoxResultViewer?.ResultViewer;if(typeof O=="function"){x=new O(n(y),{onNavigate:V=>{o(R,String(V||"")),H({enqueue:!1,path:n(R)})},fetchPage:({nodeId:V,path:z,offset:te,limit:he})=>ai({program:n(u),nodeId:V||"",variable:n(g),path:z||"",offset:Number(te||0),limit:Number(he||64),enqueue:!0})});return}x={setLoading:V=>{tt(y,n(y).textContent=V||"Loading...")},setError:V=>{tt(y,n(y).textContent=V||"Viewer error")},renderRecord:V=>{tt(y,n(y).textContent=JSON.stringify(V||{},null,2))}}},Pe=(O,V)=>{const z=String(O?.error||"Unable to inspect value.");o(F,"failed"),o(T,z),o(b,V||"-"),o(E,"error"),o(A,z),x.renderRecord({available:!1,node_id:O?.node_id||"",status:"failed",path:O?.path||"/",error:z,descriptor:{vox_type:"string",format_version:"voxpod/1",summary:{value:z,length:z.length,truncated:!1},navigation:{path:O?.path||"/",pageable:!1,can_descend:!1,default_page_size:64,max_page_size:512}}})},K=(O,V)=>{const z=String(O?.compute_status||O?.materialization||"running");o(F,"running"),o(T,`Computing ${V} (${z})`),o(b,V||"-"),o(E,O?.descriptor?.vox_type||"in-progress"),o(A,""),x.renderRecord({...O,available:!1,status:z,path:O?.path||n(R)||"/",descriptor:O?.descriptor&&typeof O.descriptor=="object"?O.descriptor:{vox_type:"unavailable",format_version:"voxpod/1",summary:{reason:`status=${z}`},navigation:{path:O?.path||n(R)||"/",pageable:!1,can_descend:!1,default_page_size:64,max_page_size:512}}})},B=(O,V)=>{const z=O?.descriptor&&typeof O.descriptor=="object"?O.descriptor:null,te=String(O?.materialization||O?.status||"materialized");x.renderRecord(O),o(F,"completed"),o(T,z?ci(z):`Computed ${V}`),o(b,V||"-"),o(E,z?.vox_type||"value"),o(A,""),te==="cached"&&o(T,`${n(T)} (cached)`)},H=async({enqueue:O=!0,path:V=""}={})=>{if(Ce(),!n(g)){o(F,"idle"),o(T,"Define at least one variable to inspect."),o(b,"-"),o(E,"-"),x.renderRecord(null);return}if(n(h).length){o(F,"failed"),o(T,"Fix static diagnostics before execution."),o(b,n(g)),o(E,"error"),x.setError(n(T)),o(A,n(T));return}o(R,String(V||"")),o(F,"running"),o(T,`Resolving ${n(g)}...`),o(b,n(g)),o(E,"in-progress"),o(A,""),x.setLoading(`Resolving ${n(g)}${n(R)?` @ ${n(R)}`:""}...`);try{const z=await si({program:n(u),variable:n(g),path:n(R),enqueue:O}),te=String(z?.materialization||""),he=String(z?.compute_status||""),At=z?.descriptor&&typeof z.descriptor=="object"?z.descriptor:null,pr=(te==="cached"||te==="computed")&&!!At,_r=te==="pending"||te==="missing"||he==="queued"||he==="running"||he==="persisting";if(pr){be(),B(z,n(g));return}if(te==="failed"||he==="failed"||he==="killed"){be(),Pe(z,n(g));return}if(_r){K(z,n(g)),j||(j=setInterval(()=>{H({enqueue:!1,path:n(R)})},1e3));return}be(),Pe({...z,error:z?.error||"Unexpected materialization state."},n(g))}catch(z){be(),Pe({error:z.message||"Request failed."},n(g))}},le=async()=>{if(s().playground_symbols===!1){o(v,{}),o(h,[]),o(g,""),o(b,"-"),o(E,"-"),o(F,"failed"),o(T,"Program symbol API unavailable on this backend."),o(A,n(T));return}const O=Z+1;if(Z=O,!String(n(u)||"").trim()){o(v,{}),o(h,[]),o(g,""),o(b,"-"),o(E,"-"),o(F,"idle"),o(T,"Write code and run to materialize a result."),o(A,"");return}try{const z=await ti(n(u));if(O!==Z)return;const te=z?.available!==!1;o(v,te?z.symbol_table||{}:{}),o(h,z?.diagnostics||[]),o(g,Ie(n(u),n(v))),o(b,n(g)||"-"),n(h).length?(o(F,"failed"),o(T,"Static diagnostics detected."),o(A,n(T))):n(g)&&(o(F,"idle"),o(T,`Ready to resolve ${n(g)}.`),o(A,""))}catch(z){if(O!==Z)return;o(v,{}),o(h,[{code:"E_SYMBOLS",message:z.message||"Unable to refresh symbols."}]),o(g,""),o(b,"-"),o(F,"failed"),o(T,"Unable to refresh symbols."),o(A,n(T))}},Te=async O=>{o(u,String(O?.detail?.value??n(u)??"")),Le(),await le()},Ae=async O=>{const V=String(O?.detail?.token||"");!V||!n(v)[V]||(o(g,V),o(b,V),o(R,""),await H({enqueue:!0,path:""}))},Se=async()=>{be(),await le(),await H({enqueue:!0,path:""})},U=O=>{O.preventDefault();const V=O.currentTarget?.parentElement;if(!(V instanceof HTMLElement))return;const z=V.getBoundingClientRect();o(w,!0);const te=At=>{const pr=At.clientY-z.top,_r=Math.max(28,Math.min(82,pr/z.height*100));o(p,Number(_r.toFixed(2)))},he=()=>{o(w,!1),window.removeEventListener("pointermove",te),window.removeEventListener("pointerup",he),window.removeEventListener("pointercancel",he)};window.addEventListener("pointermove",te),window.addEventListener("pointerup",he),window.addEventListener("pointercancel",he)};vr(async()=>{Ce();try{const O=window.localStorage.getItem(a);O&&String(O).trim()&&o(u,O)}catch{}o(G,!0),await le(),r()&&await H({enqueue:!1,path:""})}),Dn(()=>{be(),q&&clearTimeout(q),x&&typeof x.destroy=="function"&&x.destroy()}),rt(()=>(ve(r()),n(G),n(F),n(g),n(R)),()=>{r()&&n(G)&&n(F)==="idle"&&n(g)&&H({enqueue:!1,path:n(R)||""})}),ur(),It();var W=Ic(),Y=d(W),ne=d(Y),X=d(ne),De=d(X),Ee=m(d(De),2),Oe=d(Ee);Rs(Oe,{get value(){return n(F)}});var D=m(Oe,2),ue=m(De,2),ce=d(ue);Ir(ce,O=>o(y,O),()=>n(y));var se=m(ue,2),fe=d(se),ze=d(fe),$e=m(fe,2),ke=d($e),Je=m(X,2),ut=m(Je,2),Ze=d(ut);ui(Ze,{ariaLabel:"Start tab code editor",get symbols(){return n(v)},get diagnostics(){return n(h)},autocompleteEnabled:!0,completionProvider:xe,get completionBuiltins(){return l},get value(){return n(u)},set value(O){o(u,O)},$$events:{change:Te,symbolclick:Ae},$$legacy:!0});var Pt=m(ne,2),Gt=d(Pt),He=m(Pt,2);{var We=O=>{var V=Mc(),z=d(V);ee(te=>N(z,te),[()=>S(Q)]),I(O,V)},Ge=Jo(()=>S(Q)),Gr=O=>{var V=Lc(),z=d(V);ee(()=>N(z,n(A))),I(O,V)};we(He,O=>{n(Ge)?O(We):n(A)&&O(Gr,1)})}ee(()=>{Ye(W,1,`panel ${r()?"active":""}`),Ss(ne,`grid-template-rows: minmax(220px, ${n(p)}fr) 10px minmax(220px, ${100-n(p)}fr);`),N(ze,n(b)),N(ke,n(E)),Ye(Je,1,`start-divider ${n(w)?"is-active":""}`),N(Gt,n(T))}),re("click",D,Se),re("pointerdown",Je,U),I(e,W),Tt()}const vi=e=>{const t=[],r=String(e||"").split(/\r?\n/).map(s=>s.trim()).filter(Boolean);for(const s of r){try{const a=JSON.parse(s);if(a&&typeof a=="object"){t.push(a);continue}}catch{}t.push({event:"raw",message:s})}return t},Fc=(e,t)=>{const r=Array.isArray(e)?e:[],s={queued:0,running:0,completed:0,failed:0,killed:0,other:0,total:r.length};for(const c of r){const u=String(c?.status||"").toLowerCase();u in s?s[u]+=1:u==="success"?s.completed+=1:s.other+=1}const i=vi(t?.log_tail||"").filter(c=>c&&c.event==="playground.node").slice(-360).map(c=>({status:String(c.status||"unknown"),cache_source:String(c.cache_source||"-"),duration_s:Number(c.duration_s||0),operator:String(c.operator||"-"),node_id:String(c.node_id||"")})),l=r.slice(0,36).map(c=>({id:String(c.job_id||""),status:String(c.status||"unknown"),created_at:String(c.created_at||""),started_at:String(c.started_at||""),finished_at:String(c.finished_at||""),wall_time_s:Number(c?.metrics?.wall_time_s||0),strategy:String(c?.request?.execution_strategy||"dask"),kind:String(c?.request?.job_kind||"run")}));return{generated_at:Date.now(),counts:s,jobs:l,node_events:i,active_job_id:t?.job_id?String(t.job_id):""}},qn=e=>{const s=((e?.result||{})?.execution||{}).cache_summary||{},a=String(e?.log_tail||""),i=vi(a),l=i.filter(v=>v.event==="playground.node"),c=l.length?l:i.filter(v=>v.event!=="raw"),u=`computed ${Number(s.computed||0)} | cached(store) ${Number(s.cached_store||0)} | cached(local) ${Number(s.cached_local||0)} | failed ${Number(s.failed||0)} | events ${Number(s.events_stored||l.length)}/${Number(s.events_total||l.length)}`;return{raw:a,summaryText:u,rows:c.slice(-220).reverse()}};var jc=J("<option> </option>"),Dc=J("<option> </option>"),zc=J('<div id="programDiagnostics" class="inline-error"> </div>'),qc=J('<div id="runError" class="inline-error"> </div>'),Bc=J('<div class="muted"> </div>'),Vc=J('<div class="muted">No jobs executed yet.</div>'),Uc=J('<button type="button"> </button>'),Jc=J("<span> </span>"),Hc=J('<button class="btn btn-danger btn-small" type="button">Kill</button>'),Wc=J('<article class="job-item"><div class="job-row"><strong> </strong> <!></div> <div class="job-row"><span> </span> <span> </span></div> <div class="job-row"><span> </span> <div class="row gap-s"><button class="btn btn-ghost btn-small" type="button">Open</button> <!></div></div></article>'),Gc=J("<option>No print labels or variables available</option>"),Kc=J("<option> </option>"),Yc=J('<div class="muted">No node events available yet. Raw log is shown below.</div>'),Qc=J('<article class="table-like-row"><div class="name"><span class="mini-chip"> </span> </div> <div class="detail"> <!></div></article>'),Zc=J('<article class="table-like-row"><div class="name"> </div> <div class="detail"> </div></article>'),Xc=J(`<section id="tab-playground"><div class="grid-two"><article class="card editor-card"><div class="card-header"><h2>Interactive Playground</h2> <div class="row gap-s"><label class="inline-control" for="executionStrategy">Strategy</label> <select id="executionStrategy" class="select" disabled=""><option selected="">dask</option></select></div></div> <div id="editorShell" class="editor-shell"><!></div> <div class="row controls"><label class="inline-control" for="programLibrarySelect">Program Library</label> <select id="programLibrarySelect" class="select"><!></select> <button id="loadProgramFileBtn" class="btn btn-ghost btn-small" type="button">Load from Library</button></div> <p id="programLibraryMeta" class="muted"> </p> <p class="muted">Variables are directly clickable in the editor. Hover changes appearance, click resolves on demand with
        priority even when no full run has been launched.</p> <div id="editorHoverPreview" class="editor-hover-preview muted"> </div> <!> <div class="row controls"><button id="runProgramBtn" class="btn btn-primary hidden" type="button">Run Program</button> <button id="killProgramBtn" class="btn btn-danger" type="button">Kill Running Job</button> <button id="clearOutputBtn" class="btn btn-ghost" type="button">Clear Output</button> <!></div> <!></article> <article class="card telemetry-card"><div class="card-header"><h2>Runtime Telemetry</h2> <button id="refreshJobsBtn" class="btn btn-ghost btn-small" type="button">Refresh</button></div> <div class="stats-grid"><div class="stat"><span class="label">Wall Time</span><strong id="metricWall"> </strong></div> <div class="stat"><span class="label">CPU Time</span><strong id="metricCpu"> </strong></div> <div class="stat"><span class="label">CPU Util.</span><strong id="metricCpuUtil"> </strong></div> <div class="stat"><span class="label">Peak Python Heap</span><strong id="metricHeapPeak"> </strong></div> <div class="stat"><span class="label">RSS Delta</span><strong id="metricRssDelta"> </strong></div> <div class="stat"><span class="label">Current Job</span><strong id="metricJobId"> </strong></div></div> <h3 class="subheading">Recent Jobs</h3> <div id="recentJobs" class="job-list"><!></div> <h3 class="subheading">Dask Queue Flux</h3> <div id="daskQueueViz" class="dask-queue-viz"></div> <h3 class="subheading">Focused Result</h3> <div class="row gap-s controls"><label class="inline-control" for="playResultSelector">Target</label> <select id="playResultSelector" class="select"><!></select></div> <p id="playResultMeta" class="muted"> </p> <div id="playResultInspector" class="result-inspector compact"></div> <h3 class="subheading">Execution Log</h3> <p id="playExecSummary" class="muted"> </p> <div id="playExecLog" class="table-like muted"><!></div> <pre id="playExecRaw" class="mono-scroll compact-log"> </pre></article></div> <div class="grid-two"><article class="card"><h2>Execution Result</h2> <pre id="executionOutput" class="mono-scroll"> </pre></article> <article class="card"><h2>Task Graph (Text)</h2> <pre id="taskGraphOutput" class="mono-scroll"> </pre></article></div></section>`);function eu(e,t){Et(t,!1);const r=$(),s=$();let a=me(t,"active",8,!1),i=me(t,"capabilities",24,()=>({}));const l="brats_flair_mean_threshold.imgql";let u=$(`import "simpleitk"

dataset_root = "tests/data/datasets/BraTS_2019_HGG"

// Controls.
k = 10
hi_thr = 0.93
vi_thr_start = 83
vi_thr_stop = 92
vi_ticks = range(vi_thr_start, vi_thr_stop)
to_thr(tick) = tick / 100
vi_thresholds = map(to_thr, vi_ticks)

// Recursively discover BraTS FLAIR volumes and keep first k cases.
all_flair_paths = dir(dataset_root, "*_flair.nii.gz", true, true)
flair_paths = subsequence(all_flair_paths, 0, k)

// Paper method (simplified branch): lines 1-6 of the GBM specification.
// We sweep viThr in [0.83, 0.91] with step 0.01 while keeping hiThr fixed at 0.93.
read_image(path) = ReadImage(path)
to_intensity(img) = intensity(img)
preprocess_flair(flair) =
  let background = touch(leq_sv(0.1, flair), border) in
  let brain = not(background) in
  percentiles(flair, brain, 0)

sweep_case(pflair) =
  let hyper_intense = smoothen(geq_sv(hi_thr, pflair), 5.0) in
  for vi_thr in vi_thresholds do
    let very_intense = smoothen(geq_sv(vi_thr, pflair), 2.0) in
    grow(hyper_intense, very_intense)

// Debuggable sequence-of-maps pipeline.
flair_images = map(read_image, flair_paths)
flair_intensities = map(to_intensity, flair_images)
pflair_images = map(preprocess_flair, flair_intensities)

// Sequence of sequences: for each case, one mask per viThr value.
vi_sweep_masks = map(sweep_case, pflair_images)`),v=$([]),h=$(""),g=$(""),p=!1,w=!1,y=$([]),x=$({}),b=[],E=[],F=$({}),T=0,A=null,R=$(""),j=$("idle"),q="",G=null,Z=$([]),Q=$("-"),xe=$("-"),be=$("-"),Le=$("-"),Ie=$("-"),Ce=$("-"),Pe=$(""),K=$(""),B=$("Click inspect on a variable to resolve it on demand."),H=$([]),le=$(-1),Te=$("No execution trace yet."),Ae=$(""),Se=$([]),U=$(""),W=$("Hover a variable to see cached value status, or hover an operator to inspect expression context."),Y=0,ne="",X=$(),De=$(),Ee=null,Oe=null,D=null,ue="",ce=null,se=null,fe=null,ze=0,$e=null,ke=null,Je=null,ut=0,Ze="";const Pt=["map","for","range","subsequence","dir","ReadImage","BinaryThreshold","intensity","percentiles","smoothen","grow","touch","not","leq_sv","geq_sv","index"],Gt=f=>{const _=Array.isArray(f)?f:[];return _.length?_.map(k=>{const P=k?.code?`[${k.code}] `:"",M=k?.message?String(k.message):"Static error",oe=k?.symbol?` (symbol: ${k.symbol})`:"",ye=k?.location?` @ ${k.location}`:"";return`${P}${M}${oe}${ye}`}).join(`
`):""},He=({prefix:f=""})=>{const _=new Map;for(const P of["import","let","in","for","do","true","false"])_.set(P,{label:P,insertText:P,kind:"keyword",detail:"language keyword"});for(const P of Pt)_.set(P,{label:P,insertText:P,kind:"primitive",detail:"known primitive"});for(const P of Object.keys(n(s)||{}))_.set(P,{label:P,insertText:P,kind:"symbol",detail:"declared symbol"});const k=String(f||"").toLowerCase();return Array.from(_.values()).filter(P=>!k||P.label.toLowerCase().startsWith(k)).sort((P,M)=>String(P.label).localeCompare(String(M.label)))},We=f=>{const _=f?.metrics||{};o(Q,yt(Number(_.wall_time_s))),o(xe,yt(Number(_.cpu_time_s))),o(be,fi(Number(_.cpu_utilization))),o(Le,Qe(Number(_.python_heap_peak_bytes))),o(Ie,Qe(Number(_.ru_maxrss_delta_bytes))),o(Ce,f?.job_id?String(f.job_id).slice(0,12):"-")},Ge=f=>{o(j,String(f||"idle").toLowerCase())},Gr=()=>{o(R,"")},O=()=>`${window.location.protocol==="https:"?"wss":"ws"}://${window.location.host}`,V=f=>{const _=Math.min(8,Math.max(0,Number(f||0))),k=Math.min(5e3,250*2**_),P=Math.floor(Math.random()*180);return k+P},z=()=>{fe&&(clearTimeout(fe),fe=null);const f=se;if(se=null,f)try{f.close()}catch{}},te=()=>{Je&&(clearTimeout(Je),Je=null);const f=ke;if(ke=null,f)try{f.close()}catch{}},he=()=>{se&&(se.readyState===WebSocket.OPEN||se.readyState===WebSocket.CONNECTING)||(z(),se=new WebSocket(`${O()}/ws/playground/value`),se.onopen=()=>{ze=0,$e&&se.send(JSON.stringify({type:"subscribe",request:{program:n(u),execution_strategy:"dask",node_id:$e.nodeId,variable:$e.variable||"",path:$e.path||"",enqueue:$e.enqueue!==!1}}))},se.onmessage=f=>{try{const _=JSON.parse(String(f.data||"{}"));_?.type==="value"&&_?.payload&&$e&&Hn(_.payload,$e)}catch{}},se.onclose=()=>{if(se=null,!$e)return;ze+=1;const f=V(ze);fe&&clearTimeout(fe),fe=setTimeout(()=>{he()},f)},se.onerror=()=>{try{se?.close()}catch{}})},At=({nodeId:f="",variable:_="",path:k="",enqueue:P=!0}={})=>"WebSocket"in window?($e={nodeId:f,variable:_,path:k,enqueue:P},he(),se&&se.readyState===WebSocket.OPEN&&se.send(JSON.stringify({type:"subscribe",request:{program:n(u),execution_strategy:"dask",node_id:f,variable:_,path:k,enqueue:P}})),!0):!1,pr=()=>{ke&&(ke.readyState===WebSocket.OPEN||ke.readyState===WebSocket.CONNECTING)||(te(),ke=new WebSocket(`${O()}/ws/playground/jobs`),ke.onopen=()=>{ut=0,Ze&&ke.send(JSON.stringify({type:"subscribe",job_id:Ze}))},ke.onmessage=async f=>{try{const _=JSON.parse(String(f.data||"{}"));if(_?.type!=="job"&&_?.type!=="terminal")return;const k=_?.payload||null;if(!k)return;G=k||null,Ge(k.status),We(k);const{raw:P,summaryText:M,rows:oe}=qn(k);o(Ae,P),o(Te,M),o(Se,oe),Yt(),_.type==="terminal"&&(Ze="",await bn(k))}catch{}},ke.onclose=()=>{if(ke=null,!Ze)return;ut+=1;const f=V(ut);Je&&clearTimeout(Je),Je=setTimeout(()=>{pr()},f)},ke.onerror=()=>{try{ke?.close()}catch{}})},_r=(f="")=>!f||!("WebSocket"in window)?!1:(Ze=String(f),pr(),ke&&ke.readyState===WebSocket.OPEN&&ke.send(JSON.stringify({type:"subscribe",job_id:Ze})),!0),Kt=()=>{D&&(clearInterval(D),D=null),Ze="",te()},Ot=()=>{$e=null,z()},hr=()=>{const f=n(H)[n(le)];if(o(H,ac({precomputedPrintTargets:b,latestGoalResults:E,precomputedSymbolTable:n(x),latestSymbolTable:n(F)})),!n(H).length){o(le,-1);return}if(f){const _=n(H).findIndex(k=>k.kind===f.kind&&k.label===f.label&&k.nodeId===f.nodeId);o(le,_>=0?_:0);return}o(le,0)},Kr=()=>{if(Ee||!n(X))return;const f=window.VoxResultViewer?.ResultViewer;if(typeof f=="function"){Ee=new f(n(X),{onNavigate:_=>{const k=n(H)[n(le)];k?.nodeId&&Yr(k.nodeId,_||"",{variable:k.kind==="variable"?k.label:""})},fetchPage:({nodeId:_,path:k,offset:P,limit:M})=>{const oe=n(H)[n(le)],ye=oe?.kind==="variable"?oe.label:"";return ai({program:n(u),nodeId:_||oe?.nodeId||"",variable:ye,path:k||"",offset:Number(P||0),limit:Number(M||64),enqueue:!0})},onStatusClick:_=>{!_||_.status!=="failed"&&_.status!=="killed"||mn(_,{nodeId:_.node_id||"",path:_.path||""})}});return}Ee={setLoading:_=>{tt(X,n(X).textContent=_||"Loading...")},setError:_=>{tt(X,n(X).textContent=_||"Viewer error")},renderRecord:_=>{tt(X,n(X).textContent=JSON.stringify(_||{},null,2))}}},gn=()=>{if(Oe||!n(De))return;const f=window.VoxDaskQueueViz?.DaskQueueVisualizer;if(typeof f=="function"){Oe=new f(n(De));return}Oe={render:_=>{const k=_?.counts||{};tt(De,n(De).textContent=`queue: queued ${Number(k.queued||0)} | running ${Number(k.running||0)} | completed ${Number(k.completed||0)} | failed ${Number(k.failed||0)}`)}}},Yt=()=>{gn(),Oe&&Oe.render(Fc(n(Z),G))},Vn=async f=>{const _=f?.result||{};o(Pe,JSON.stringify(_,null,2)),o(K,_.task_graph||"(no task graph in payload)"),Array.isArray(_.goal_results)&&(E=_.goal_results),_.symbol_table&&typeof _.symbol_table=="object"&&o(F,_.symbol_table);const{raw:k,summaryText:P,rows:M}=qn(f);if(o(Ae,k),o(Te,P),o(Se,M),hr(),n(H).length&&n(le)>=0){const oe=n(H)[n(le)];await Yr(oe.nodeId,"",{variable:oe.kind==="variable"?oe.label:""})}Yt()},Cs=async()=>{if(i().playground_program_library===!1){o(v,[]),o(h,""),o(g,"Program library endpoint unavailable on this backend.");return}try{const f=await Jl();if(!f.available){o(v,[]),o(h,""),o(g,f.error||"Program library unavailable.");return}if(o(v,f.files||[]),!n(v).length){o(h,""),w=!0,o(g,`${f.load_dir} | 0 files`);return}const _=n(v).find(k=>{const P=String(k?.path||"");return P===l||P.endsWith(`/${l}`)});w?(!n(h)||!n(v).some(k=>k.path===n(h)))&&o(h,_?.path||n(v)[0].path):(o(h,_?.path||n(v)[0].path),w=!0),o(g,`${f.load_dir} | ${n(v).length} file(s)`)}catch(f){o(v,[]),o(h,""),o(g,`Unable to load library: ${f.message}`)}},Un=async()=>{if(n(h))try{const f=await Hl(n(h));o(u,f.content||""),o(g,`${f.path} | ${Qe(Number(f.bytes||0))}`),E=[],o(F,{}),await Ft(),Gr()}catch(f){o(g,`Unable to load ${n(h)}: ${f.message}`)}},Ft=async()=>{if(i().playground_symbols===!1)return;const f=T+1;if(T=f,!String(n(u)||"").trim()){o(x,{}),b=[],o(y,[]),hr();return}try{const _=await ti(n(u));if(f!==T)return;const k=_?.available!==!1;o(x,k?_.symbol_table||{}:{}),b=k?_.print_targets||[]:[],o(y,_?.diagnostics||[]),hr()}catch(_){if(f!==T)return;o(x,{}),b=[],o(y,[{code:"E_SYMBOLS",message:`Unable to refresh symbols: ${_.message}`}]),hr()}},Ps=()=>{A&&clearTimeout(A),A=setTimeout(()=>{Ft()},260)},Jn=({nodeId:f="",variable:_="",path:k="",enqueue:P=!0})=>si({program:n(u),nodeId:f,variable:_,path:k,enqueue:P}),mn=(f,_)=>{const k=String(f.node_id||_.nodeId||""),P=f.path||_.path||"",oe=String(f.compute_status||f.status||"failed").toLowerCase()==="killed"?"killed":"failed",ye=lc(f,_),Xe=String(f.error||"Value inspection failed.");if(Ee.renderRecord({available:!1,node_id:k,status:oe,runtime_version:f.runtime_version||"runtime",updated_at:f.updated_at||new Date().toISOString(),path:P,error:Xe,log_tail:f.log_tail||"",execution_errors:oi(f),descriptor:{vox_type:"string",format_version:"voxpod/1",summary:{value:ye,length:ye.length,truncated:!1},navigation:{path:P||"",pageable:!1,can_descend:!1,default_page_size:64,max_page_size:512}},diagnostics:f.diagnostics||{}}),o(B,`Unable to inspect ${k.slice(0,12)}${P?` @ ${P}`:""}: ${Xe}`),f.log_tail){const{raw:xt,summaryText:ft,rows:zt}=qn({log_tail:f.log_tail,result:{execution:{cache_summary:f?.cache_summary||f?.diagnostics?.cache_summary||{}}}});o(Ae,xt),o(Te,ft),o(Se,zt);return}o(Ae,""),o(Te,"No execution log available for this failure."),o(Se,[])},Hn=(f,_)=>{const k=String(f.materialization||""),P=String(f.compute_status||""),M=String(f.status||""),oe=String(f.node_id||_.nodeId||""),ye=f.path||_.path||"",Xe=f.job_id?String(f.job_id):"",xt=f?.descriptor&&typeof f.descriptor=="object"?String(f.descriptor.vox_type||""):"",ft=f?.descriptor&&xt&&xt!=="unavailable"&&xt!=="error";if((k==="cached"||k==="computed"||M==="materialized")&&ft){Ot(),ue="",Ee.renderRecord(f),o(B,`Inspecting ${oe.slice(0,12)}${ye?` @ ${ye}`:""} | ${k||"materialized"} | status=${P||"materialized"}`);return}if(k==="failed"||P==="failed"||P==="killed"||M==="failed"){Ot(),ue="",mn(f,_);return}if(k==="pending"||k==="missing"||P==="queued"||P==="running"||P==="persisting"){const tr=`${oe}|${ye||""}`,wr=(xt==="sequence"||xt==="mapping")&&f?.descriptor&&typeof f.descriptor=="object"?f.descriptor:{vox_type:"unavailable",format_version:"voxpod/1",summary:{reason:`status=${P||"pending"}`},navigation:{path:ye||"",pageable:!1,can_descend:!1,default_page_size:64,max_page_size:512}},xr={...f,available:!1,node_id:oe,status:P||"running",runtime_version:f.runtime_version||"runtime",updated_at:f.updated_at||new Date().toISOString(),path:ye,descriptor:wr};ue===tr&&typeof Ee.refreshPage=="function"?Ee.refreshPage(oe,ye):(Ee.renderRecord(xr),ue=tr),o(B,`In progress ${oe.slice(0,12)}${ye?` @ ${ye}`:""} | ${P||"pending"}${Xe?` | job ${Xe.slice(0,12)}`:""}`),At({nodeId:oe,variable:_.variable||"",path:ye,enqueue:!1});return}Ot();const er=f.error||(k==="missing"?"Value is not materialized yet.":`Unable to inspect value (${k||P||"unknown"}).`);mn({...f,error:er,compute_status:P||"failed",status:f.status||"failed"},_)},Yr=async(f,_="",k={})=>{Kr(),Ot();const P=String(k.variable||"");o(B,`Resolving ${f.slice(0,12)}${_?` @ ${_}`:""}...`);try{const M=await Jn({nodeId:f,variable:P,path:_,enqueue:k.enqueue!==!1});Hn(M,{nodeId:f,variable:P,path:_})}catch(M){Ot(),Ee.setError(`Value lookup failed: ${M.message}`),o(B,`Unable to inspect ${f.slice(0,12)}: ${M.message}`)}},gr=async()=>{try{const f=await Gl();o(Z,f.jobs||[]),o(U,""),!G&&n(Z).length&&(G=n(Z)[0]),Yt()}catch(f){o(Z,[]),o(U,`Failed to load jobs: ${f.message}`),Yt()}},bn=async f=>{G=f||null,Ge(f?.status),We(f),await Vn(f),o(R,f?.error||""),await gr()},yn=async()=>{if(q)try{const f=await ri(q);G=f||null,Ge(f.status),We(f);const{raw:_,summaryText:k,rows:P}=qn(f);if(o(Ae,_),o(Te,k),o(Se,P),Yt(),f.status==="running")return;Kt(),await bn(f)}catch(f){Kt(),Ge("failed"),o(R,`Polling failed: ${f.message}`)}},wn=async()=>{if(Gr(),await Ft(),n(y).length){o(R,"Static diagnostics must be fixed before execution can start.");return}try{Ge("running"),Ot(),o(Pe,""),o(K,""),o(Ae,""),o(Se,[]),o(Te,"Execution started. Waiting for log events..."),We(null);const f=await Wl(n(u));q=f.job_id,o(Ce,String(f.job_id||"").slice(0,12)),Kt(),_r(String(q||""))||(D=setInterval(yn,800),await yn())}catch(f){Ge("failed"),o(R,f.message)}},As=()=>{o(Pe,""),o(K,""),o(R,""),We(null),o(Te,"No execution log yet."),o(Ae,""),o(Se,[]),E=[],o(F,{}),G=null,Ot(),ue="",o(B,"Click inspect on a variable to resolve it on demand."),Kr(),Ee.renderRecord(null),hr(),o(le,n(H).length?0:-1),Yt()},Ms=async()=>{if(q)try{const f=await ni(q);Kt(),await bn(f)}catch(f){o(R,`Kill failed: ${f.message}`)}},C=async f=>{if(f)try{const _=await ri(f);q=f,G=_||null,Ge(_.status),We(_),await Vn(_),_.status==="running"&&(Kt(),_r(String(f||""))||(D=setInterval(yn,800)));const k=_?.result?.execution?.errors;(_.status==="failed"||_.status==="killed")&&k&&typeof k=="object"?o(R,[_.error||"Execution failed",li(k)].filter(Boolean).join(`
`)):o(R,_.error||"")}catch(_){o(R,`Unable to open ${f}: ${_.message}`)}},ae=async f=>{try{await ni(f),q===f&&(Kt(),Ge("killed")),await gr()}catch(_){o(R,`Unable to kill ${f}: ${_.message}`)}},Fe=async()=>{const f=Number(n(le));if(!Number.isFinite(f)||(o(le,f),n(le)<0||n(le)>=n(H).length))return;const _=n(H)[n(le)];await Yr(_.nodeId,"",{variable:_.kind==="variable"?_.label:""})},Me=f=>n(x)[f]||n(F)[f]||"",ie=f=>{o(W,f||"")},qe=()=>{Y+=1,ne="",ie("Hover a variable to see cached value status, or hover an operator to inspect expression context.")},wt=async f=>{const _=Me(f);if(!_)return;qe();const k=n(H).findIndex(P=>P.kind==="variable"&&P.label===f);k>=0&&o(le,k),await Yr(_,"",{variable:f})},jt=async f=>{const _=Y+1;Y=_,ie(`var ${f}: checking cache...`);try{const k=await Jn({variable:f,enqueue:!1});if(_!==Y||ne!==f)return;const P=String(k.materialization||"");if(k.descriptor&&(P==="cached"||P==="computed")){ie(`var ${f}: ${ci(k.descriptor)} (${P})`);return}if(P==="pending"||k.compute_status==="running"||k.compute_status==="queued"||k.compute_status==="persisting"){ie(`var ${f}: running (${k.compute_status}). Click to focus/inspect.`);return}ie(`var ${f}: not materialized yet. Click to compute on demand.`)}catch{if(_!==Y||ne!==f)return;ie(`var ${f}: click to compute on demand.`)}},Qt=async f=>{if(!f)return!1;let _=Me(f)?f:"";return _||(await Ft(),_=Me(f)?f:""),_?(ne=_,await wt(_),!0):!1},Dt=f=>{o(u,String(f?.detail?.value??n(u)??"")),o(F,{}),E=[],Ps(),qe()},Or=async f=>{const _=String(f?.detail?.token||"");_&&(ne=_,await jt(_))},Fr=()=>{qe()},mr=async f=>{const _=String(f?.detail?.token||"");_&&(ne=_,await Qt(_))},br=f=>{const _=String(f?.detail?.token||"");if(!_)return;const k=String(f?.detail?.context||"");ie(k?`operator '${_}' in: ${k}`:`operator '${_}'`)},yr=()=>{qe()},Zt=async f=>{await C(f)},Ls=()=>{ce||(ce=setInterval(()=>{a()&&(gr(),Ft())},15e3))},xn=()=>{ce&&(clearInterval(ce),ce=null)};async function Wn(f,_=!1){o(u,String(f||"")),o(F,{}),E=[],qe(),await Ft(),_&&await wn()}async function Gn(){await wn()}vr(()=>{Kr(),gn(),Yt(),(async()=>(await Cs(),!p&&n(h)&&(p=!0,await Un()),await Promise.all([gr(),Ft()])))()}),Dn(()=>{Kt(),Ot(),xn(),A&&clearTimeout(A),Oe&&typeof Oe.destroy=="function"&&Oe.destroy(),Ee&&typeof Ee.destroy=="function"&&Ee.destroy()}),rt(()=>n(y),()=>{o(r,Gt(n(y)))}),rt(()=>(n(x),n(F)),()=>{o(s,{...n(x)||{},...n(F)||{}})}),rt(()=>ve(a()),()=>{a()?(gr(),Ft(),Ls()):xn()}),rt(()=>ve(i()),()=>{i().playground_program_library===!1&&o(g,"Program library endpoint unavailable on this backend.")}),ur();var Is={loadProgram:Wn,runCurrentProgram:Gn};It();var Xt=Xc(),Sn=d(Xt),_i=d(Sn),hi=d(_i),Mu=m(d(hi),2),Lu=m(d(Mu),2),gi=d(Lu);gi.value=gi.__value="dask";var mi=m(hi,2),Iu=d(mi);ui(Iu,{ariaLabel:"VoxLogicA program editor",get symbols(){return n(s)},get diagnostics(){return n(y)},autocompleteEnabled:!0,completionProvider:He,get completionBuiltins(){return Pt},get value(){return n(u)},set value(f){o(u,f)},$$events:{change:Dt,symbolhover:Or,symbolleave:Fr,symbolclick:mr,operatorhover:br,hoverleave:yr},$$legacy:!0});var bi=m(mi,2),Kn=m(d(bi),2),Ou=d(Kn);{var Fu=f=>{var _=jc(),k=d(_);_.value=_.__value="",ee(()=>N(k,(ve(i()),S(()=>i().playground_program_library===!1?"unavailable":"no .imgql files found")))),I(f,_)},ju=f=>{var _=bt(),k=it(_);ct(k,1,()=>n(v),lt,(P,M)=>{var oe=Dc(),ye=d(oe),Xe={};ee(()=>{N(ye,(n(M),S(()=>n(M).path))),Xe!==(Xe=(n(M),S(()=>n(M).path)))&&(oe.value=(oe.__value=(n(M),S(()=>n(M).path)))??"")}),I(P,oe)}),I(f,_)};we(Ou,f=>{n(v),S(()=>!n(v).length)?f(Fu):f(ju,!1)})}var yi=m(Kn,2),wi=m(bi,2),Du=d(wi),xi=m(wi,4),zu=d(xi),Si=m(xi,2);{var qu=f=>{var _=zc(),k=d(_);ee(()=>N(k,n(r))),I(f,_)};we(Si,f=>{n(r)&&f(qu)})}var ki=m(Si,2),Ei=d(ki),Os=m(Ei,2),Ti=m(Os,2),Bu=m(Ti,2);Rs(Bu,{get value(){return n(j)}});var Vu=m(ki,2);{var Uu=f=>{var _=qc(),k=d(_);ee(()=>N(k,n(R))),I(f,_)};we(Vu,f=>{n(R)&&f(Uu)})}var Ju=m(_i,2),$i=d(Ju),Hu=m(d($i),2),Ni=m($i,2),Ri=d(Ni),Wu=m(d(Ri)),Gu=d(Wu),Ci=m(Ri,2),Ku=m(d(Ci)),Yu=d(Ku),Pi=m(Ci,2),Qu=m(d(Pi)),Zu=d(Qu),Ai=m(Pi,2),Xu=m(d(Ai)),ef=d(Xu),Mi=m(Ai,2),tf=m(d(Mi)),rf=d(tf),nf=m(Mi,2),sf=m(d(nf)),af=d(sf),Li=m(Ni,4),of=d(Li);{var lf=f=>{var _=Bc(),k=d(_);ee(()=>N(k,n(U))),I(f,_)},cf=f=>{var _=Vc();I(f,_)},uf=f=>{var _=bt(),k=it(_);ct(k,1,()=>n(Z),lt,(P,M)=>{const oe=Ke(()=>(n(M),S(()=>String(n(M).status||"unknown")))),ye=Ke(()=>n(oe)==="failed"||n(oe)==="killed");var Xe=Wc(),xt=d(Xe),ft=d(xt),zt=d(ft),er=m(ft,2);{var tr=St=>{var dt=Uc(),zs=d(dt);ee(()=>{Ye(dt,1,`chip ${n(oe)} chip-clickable`),N(zs,n(oe))}),re("click",dt,()=>Zt(n(M).job_id)),I(St,dt)},Qr=St=>{var dt=Jc(),zs=d(dt);ee(()=>{Ye(dt,1,`chip ${n(oe)}`),N(zs,n(oe))}),I(St,dt)};we(er,St=>{n(ye)?St(tr):St(Qr,!1)})}var wr=m(xt,2),xr=d(wr),Qn=d(xr),Fs=m(xr,2),js=d(Fs),jr=m(wr,2),Dr=d(jr),Ds=d(Dr),$f=m(Dr,2),Bi=d($f),Nf=m(Bi,2);{var Rf=St=>{var dt=Hc();re("click",dt,()=>ae(n(M).job_id)),I(St,dt)};we(Nf,St=>{n(oe)==="running"&&St(Rf)})}ee((St,dt)=>{N(zt,St),N(Qn,(n(M),S(()=>n(M)?.request?.execution_strategy||"dask"))),N(js,dt),N(Ds,(n(M),S(()=>n(M).created_at||"-")))},[()=>(n(M),S(()=>String(n(M).job_id||"").slice(0,12))),()=>(ve(yt),n(M),S(()=>yt(Number(n(M)?.metrics?.wall_time_s))))]),re("click",Bi,()=>C(n(M).job_id)),I(P,Xe)}),I(f,_)};we(of,f=>{n(U)?f(lf):(n(Z),S(()=>!n(Z).length)?f(cf,1):f(uf,!1))})}var Ii=m(Li,4);Ir(Ii,f=>o(De,f),()=>n(De));var Oi=m(Ii,4),Yn=m(d(Oi),2),ff=d(Yn);{var df=f=>{var _=Gc();_.value=_.__value="",I(f,_)},vf=f=>{var _=bt(),k=it(_);ct(k,1,()=>n(H),lt,(P,M,oe)=>{var ye=Kc(),Xe=d(ye);ye.value=ye.__value=oe,ee(()=>N(Xe,(n(M),S(()=>n(M).kind==="print"?`print: ${n(M).label}`:`var: ${n(M).label}`)))),I(P,ye)}),I(f,_)};we(ff,f=>{n(H),S(()=>!n(H).length)?f(df):f(vf,!1)})}var Fi=m(Oi,2),pf=d(Fi),ji=m(Fi,2);Ir(ji,f=>o(X,f),()=>n(X));var Di=m(ji,4),_f=d(Di),zi=m(Di,2),hf=d(zi);{var gf=f=>{var _=Yc();I(f,_)},mf=f=>{var _=bt(),k=it(_);ct(k,1,()=>n(Se),lt,(P,M)=>{var oe=bt(),ye=it(oe);{var Xe=ft=>{var zt=Qc(),er=d(zt),tr=d(er),Qr=d(tr),wr=m(tr),xr=m(er,2),Qn=d(xr),Fs=m(Qn);{var js=jr=>{var Dr=gl();ee(Ds=>N(Dr,`| ${Ds??""}`),[()=>(n(M),S(()=>String(n(M).error)))]),I(jr,Dr)};we(Fs,jr=>{n(M),S(()=>n(M).error)&&jr(js)})}ee((jr,Dr)=>{N(Qr,(n(M),S(()=>n(M).status||"unknown"))),N(wr,` ${n(M),S(()=>n(M).operator||"-")??""}`),N(Qn,`node=${jr??""} | source=${n(M),S(()=>n(M).cache_source||"-")??""} |
                  duration=${Dr??""} ms `)},[()=>(n(M),S(()=>String(n(M).node_id||"").slice(0,12))),()=>(n(M),S(()=>(Number(n(M).duration_s||0)*1e3).toFixed(2)))]),I(ft,zt)},xt=ft=>{var zt=Zc(),er=d(zt),tr=d(er),Qr=m(er,2),wr=d(Qr);ee(xr=>{N(tr,(n(M),S(()=>n(M).event||"event"))),N(wr,xr)},[()=>(n(M),S(()=>n(M).message||n(M).error||JSON.stringify(n(M)).slice(0,180)))]),I(ft,zt)};we(ye,ft=>{n(M),S(()=>n(M).event==="playground.node")?ft(Xe):ft(xt,!1)})}I(P,oe)}),I(f,_)};we(hf,f=>{n(Se),S(()=>!n(Se).length)?f(gf):f(mf,!1)})}var bf=m(zi,2),yf=d(bf),wf=m(Sn,2),qi=d(wf),xf=m(d(qi),2),Sf=d(xf),kf=m(qi,2),Ef=m(d(kf),2),Tf=d(Ef);return ee(()=>{Ye(Xt,1,`panel ${a()?"active":""}`),Kn.disabled=(n(v),S(()=>!n(v).length)),yi.disabled=(n(v),S(()=>!n(v).length)),N(Du,n(g)),N(zu,n(W)),Os.disabled=n(j)!=="running",N(Gu,n(Q)),N(Yu,n(xe)),N(Zu,n(be)),N(ef,n(Le)),N(rf,n(Ie)),N(af,n(Ce)),Yn.disabled=(n(H),S(()=>!n(H).length)),N(pf,n(B)),N(_f,n(Te)),N(yf,n(Ae)),N(Sf,n(Pe)),N(Tf,n(K))}),Fn(Kn,()=>n(h),f=>o(h,f)),re("click",yi,Un),re("click",Ei,wn),re("click",Os,Ms),re("click",Ti,As),re("click",Hu,gr),Fn(Yn,()=>n(le),f=>o(le,f)),re("change",Yn,Fe),I(e,Xt),Qa(t,"loadProgram",Wn),Qa(t,"runCurrentProgram",Gn),Tt(Is)}var tu=J('<div class="inline-error"> </div>'),ru=J('<div class="muted">No stored results found for current runtime.</div>'),nu=J('<article><div class="job-row"><strong> </strong> <span> </span></div> <div class="job-row"><span> </span> <span> </span></div> <div class="job-row"><span> </span> <button class="btn btn-ghost btn-small" type="button">Inspect</button></div></article>'),su=J('<section id="tab-results"><div class="grid-two"><article class="card"><div class="card-header"><h2>Stored Results</h2> <button id="refreshResultsBtn" class="btn btn-ghost btn-small" type="button">Refresh</button></div> <div class="row gap-s controls"><label class="inline-control" for="resultStatusFilter">Status</label> <select id="resultStatusFilter" class="select"><option>all</option><option>materialized</option><option>failed</option></select> <input id="resultSearchInput" class="input" type="search" placeholder="Filter by node id"/></div> <p id="resultListMeta" class="muted"> </p> <!> <div id="resultList" class="job-list"><!></div></article> <article class="card"><h2>Result Inspector</h2> <p class="muted">View values only from persisted store entries. Server-side save/export is intentionally disabled.</p> <div id="resultInspector" class="result-inspector"></div></article></div></section>');function au(e,t){Et(t,!1);let r=me(t,"active",8,!1),s=me(t,"capabilities",24,()=>({})),a=$(""),i=$(""),l=$([]),c=$(""),u=$(""),v=$(""),h="",g=$(),p=null,w=null;const y=()=>{if(p)return;const U=window.VoxResultViewer?.ResultViewer;if(typeof U=="function"){p=new U(n(g),{onNavigate:W=>{n(v)&&x(n(v),W||"")},fetchPage:({nodeId:W,path:Y,offset:ne,limit:X})=>Ql({nodeId:W||n(v),path:Y||"",offset:Number(ne||0),limit:Number(X||64)}),onStatusClick:W=>{if(!W||W.status!=="failed"&&W.status!=="killed")return;const Y=[`node: ${W.node_id||"-"}`,`path: ${W.path||"/"}`,`status: ${W.status||"failed"}`,W.error?`error: ${W.error}`:""].filter(Boolean);p.setError(Y.join(`
`))}});return}p={setLoading:W=>{tt(g,n(g).textContent=W||"Loading...")},setError:W=>{tt(g,n(g).textContent=W||"Viewer error")},renderRecord:W=>{tt(g,n(g).textContent=JSON.stringify(W||{},null,2))}}},x=async(U,W="")=>{y(),o(v,U),h=W,p.setLoading(`Loading ${U}${W||""} ...`);try{const Y=await Yl(U,W);p.renderRecord(Y),o(u,"")}catch(Y){p.setError(`Failed loading result ${U}: ${Y.message}`)}},b=async()=>{if(y(),s().store_results_viewer===!1){o(l,[]),o(c,"Store results viewer unavailable on this backend."),o(u,""),p.setError("Store results endpoint unavailable.");return}try{const U=await Kl({limit:200,statusFilter:n(a),nodeFilter:n(i).trim()});if(!U.available){o(l,[]),o(c,U.error||"Store results unavailable."),p.setError(U.error||"Store results unavailable.");return}o(l,U.records||[]);const W=U.summary||{};if(o(c,`${Number(W.total||0)} total | ${Number(W.materialized||0)} materialized | ${Number(W.failed||0)} failed`),o(u,""),n(v)&&n(l).some(Y=>Y.node_id===n(v))){await x(n(v),h);return}n(l).length?await x(n(l)[0].node_id,""):(o(v,""),h="",p.renderRecord(null))}catch(U){o(l,[]),o(c,`Unable to load results: ${U.message}`),o(u,""),p.setError(`Unable to load result list: ${U.message}`)}},E=()=>{w&&clearTimeout(w),w=setTimeout(()=>{b()},260)},F=U=>{U.key==="Enter"&&b()};vr(()=>(y(),b(),()=>{w&&clearTimeout(w),p&&typeof p.destroy=="function"&&p.destroy()})),rt(()=>ve(r()),()=>{r()&&b()}),ur(),It();var T=su(),A=d(T),R=d(A),j=d(R),q=m(d(j),2),G=m(j,2),Z=m(d(G),2),Q=d(Z);Q.value=Q.__value="";var xe=m(Q);xe.value=xe.__value="materialized";var be=m(xe);be.value=be.__value="failed";var Le=m(Z,2),Ie=m(G,2),Ce=d(Ie),Pe=m(Ie,2);{var K=U=>{var W=tu(),Y=d(W);ee(()=>N(Y,n(u))),I(U,W)};we(Pe,U=>{n(u)&&U(K)})}var B=m(Pe,2),H=d(B);{var le=U=>{var W=ru();I(U,W)},Te=U=>{var W=bt(),Y=it(W);ct(Y,1,()=>n(l),lt,(ne,X)=>{var De=nu(),Ee=d(De),Oe=d(Ee),D=d(Oe),ue=m(Oe,2),ce=d(ue),se=m(Ee,2),fe=d(se),ze=d(fe),$e=m(fe,2),ke=d($e),Je=m(se,2),ut=d(Je),Ze=d(ut),Pt=m(ut,2);ee((Gt,He)=>{Ye(De,1,(n(v),n(X),S(()=>`job-item result-item ${n(v)===n(X).node_id?"active":""}`))),N(D,Gt),Ye(ue,1,(n(X),S(()=>`chip ${n(X).status}`))),N(ce,(n(X),S(()=>n(X).status))),N(ze,(n(X),S(()=>n(X).runtime_version||"-"))),N(ke,He),N(Ze,(n(X),S(()=>n(X).updated_at||"-")))},[()=>(n(X),S(()=>n(X).node_id.slice(0,16))),()=>(ve(Qe),n(X),S(()=>Qe(Number(n(X).payload_bytes||0))))]),re("click",Pt,()=>x(n(X).node_id,"")),I(ne,De)}),I(U,W)};we(H,U=>{n(l),S(()=>!n(l).length)?U(le):U(Te,!1)})}var Ae=m(R,2),Se=m(d(Ae),4);Ir(Se,U=>o(g,U),()=>n(g)),ee(()=>{Ye(T,1,`panel ${r()?"active":""}`),N(Ce,n(c))}),re("click",q,b),Fn(Z,()=>n(a),U=>o(a,U)),re("change",Z,b),Ya(Le,()=>n(i),U=>o(i,U)),re("input",Le,E),re("keydown",Le,F),I(e,T),Tt()}var iu=J("<option> </option>"),ou=J('<div class="muted"> </div>'),lu=J('<div class="muted">No examples for selected module.</div>'),cu=J('<article class="gallery-item"><h3> </h3> <div class="gallery-meta"><span class="mini-chip"> </span> <span class="mini-chip"> </span> <span class="mini-chip"> </span></div> <p class="muted"> </p> <pre class="gallery-code"> </pre> <div class="row gap-s"><button class="btn btn-primary btn-small" type="button">Load</button> <button class="btn btn-ghost btn-small" type="button">Run</button></div></article>'),uu=J('<section id="tab-gallery"><article class="card"><div class="card-header"><h2>Progressive Example Gallery</h2> <div class="row gap-s"><label class="inline-control" for="moduleFilter">Module</label> <select id="moduleFilter" class="select"></select></div></div> <p class="muted">Gallery cards are generated from markdown directives in <code>doc/user/language-gallery.md</code> using <code>&lt;!-- vox:playground ... --&gt;</code> comments.</p> <div id="galleryCards" class="gallery-grid"><!></div></article></section>');function fu(e,t){Et(t,!1);const r=$();let s=me(t,"active",8,!1);const a=ei();let i=$([]),l=$(["all"]),c=$("all"),u=$("");const v=async()=>{try{const j=await Zl();o(i,j.examples||[]),o(l,["all",...j.modules||[]]),n(l).includes(n(c))||o(c,"all"),o(u,"")}catch(j){o(i,[]),o(l,["all"]),o(u,`Unable to load gallery: ${j.message}`)}},h=j=>{a("load",{code:j.code,run:!1})},g=j=>{a("load",{code:j.code,run:!0})};vr(()=>{v()}),rt(()=>(n(i),n(c)),()=>{o(r,n(i).filter(j=>n(c)==="all"||j.module===n(c)))}),rt(()=>ve(s()),()=>{s()&&v()}),ur(),It();var p=uu(),w=d(p),y=d(w),x=m(d(y),2),b=m(d(x),2);ct(b,5,()=>n(l),lt,(j,q)=>{var G=iu(),Z=d(G),Q={};ee(()=>{N(Z,n(q)),Q!==(Q=n(q))&&(G.value=(G.__value=n(q))??"")}),I(j,G)});var E=m(y,4),F=d(E);{var T=j=>{var q=ou(),G=d(q);ee(()=>N(G,n(u))),I(j,q)},A=j=>{var q=lu();I(j,q)},R=j=>{var q=bt(),G=it(q);ct(G,1,()=>n(r),lt,(Z,Q)=>{var xe=cu(),be=d(xe),Le=d(be),Ie=m(be,2),Ce=d(Ie),Pe=d(Ce),K=m(Ce,2),B=d(K),H=m(K,2),le=d(H),Te=m(Ie,2),Ae=d(Te),Se=m(Te,2),U=d(Se),W=m(Se,2),Y=d(W),ne=m(Y,2);ee(()=>{N(Le,(n(Q),S(()=>n(Q).title))),N(Pe,(n(Q),S(()=>n(Q).module))),N(B,(n(Q),S(()=>n(Q).level))),N(le,(n(Q),S(()=>n(Q).strategy||"dask"))),N(Ae,(n(Q),S(()=>n(Q).description||""))),N(U,(n(Q),S(()=>n(Q).code)))}),re("click",Y,()=>h(n(Q))),re("click",ne,()=>g(n(Q))),I(Z,xe)}),I(j,q)};we(F,j=>{n(u)?j(T):(n(r),S(()=>!n(r).length)?j(A,1):j(R,!1))})}ee(()=>Ye(p,1,`panel ${s()?"active":""}`)),Fn(b,()=>n(c),j=>o(c,j)),I(e,p),Tt()}var du=J('<div class="muted"> </div>'),vu=J('<div class="bar-row"><div class="meta"><span> </span> <strong> </strong></div> <div class="bar-bg"><div class="bar-fill"></div></div></div>');function Bn(e,t){Et(t,!1);const r=$();let s=me(t,"items",24,()=>[]),a=me(t,"valueField",8,"value"),i=me(t,"labelField",8,"label"),l=me(t,"formatter",8,p=>`${p}`),c=me(t,"emptyMessage",8,"No data yet.");rt(()=>(ve(s()),ve(a())),()=>{o(r,Math.max(1,...s().map(p=>Number(p?.[a()]||0))))}),ur(),It();var u=bt(),v=it(u);{var h=p=>{var w=du(),y=d(w);ee(()=>N(y,c())),I(p,w)},g=p=>{var w=bt(),y=it(w);ct(y,1,s,lt,(x,b)=>{const E=Ke(()=>(n(b),ve(a()),S(()=>Number(n(b)?.[a()]||0)))),F=Ke(()=>n(E)/n(r)*100);var T=vu(),A=d(T),R=d(A),j=d(R),q=m(R,2),G=d(q),Z=m(A,2),Q=d(Z);ee((xe,be)=>{N(j,(n(b),ve(i()),S(()=>n(b)?.[i()]))),N(G,xe),Ss(Q,be)},[()=>(ve(l()),ve(n(E)),S(()=>l()(n(E)))),()=>(ve(n(F)),S(()=>`width: ${n(F).toFixed(2)}%`))]),I(x,T)}),I(p,w)};we(v,p=>{ve(s()),S(()=>!s().length)?p(h):p(g,!1)})}I(e,u),Tt()}var pu=J('<img id="perfChart" class="perf-chart" alt="Performance comparison chart"/>'),_u=J('<img id="primitivePerfChart" class="perf-chart" alt="Primitive benchmark histogram"/>'),hu=J('<div class="muted"> </div>'),gu=J('<div class="muted"> </div>'),mu=J('<div class="muted">No test jobs started from UI yet.</div>'),bu=J('<button class="btn btn-danger btn-small" type="button">Kill</button>'),yu=J('<article class="job-item"><div class="job-row"><strong> </strong> <span> </span></div> <div class="job-row"><span> </span> <span> </span></div> <div class="job-row"><span> </span> <!></div></article>'),wu=J('<div class="muted">No junit report loaded.</div>'),xu=J('<article class="table-like-row"><div class="name"> </div> <div class="detail"> </div></article>'),Su=J('<div class="muted">No failures in current report.</div>'),ku=J('<article class="table-like-row"><div class="name"> </div> <div class="detail"> </div></article>'),Eu=J('<section id="tab-quality"><div class="grid-two"><article class="card"><div class="card-header"><h2>Test &amp; Coverage Overview</h2> <div class="row gap-s"><button id="refreshQualityBtn" class="btn btn-ghost btn-small" type="button">Refresh</button> <!></div></div> <div class="row controls"><button id="runQuickTestsBtn" class="btn btn-ghost btn-small" type="button">Run Quick</button> <button id="runFullTestsBtn" class="btn btn-primary btn-small" type="button">Run Full</button> <button id="runPerfTestsBtn" class="btn btn-ghost btn-small" type="button">Run Perf</button> <button id="killTestRunBtn" class="btn btn-danger btn-small" type="button">Kill Test Run</button></div> <div class="stats-grid"><div class="stat"><span class="label">Total Tests</span><strong id="qTotalTests"> </strong></div> <div class="stat"><span class="label">Passed</span><strong id="qPassed"> </strong></div> <div class="stat"><span class="label">Failed</span><strong id="qFailed"> </strong></div> <div class="stat"><span class="label">Skipped</span><strong id="qSkipped"> </strong></div> <div class="stat"><span class="label">Duration</span><strong id="qDuration"> </strong></div> <div class="stat"><span class="label">Line Coverage</span><strong id="qCoverage"> </strong></div></div> <h3 class="subheading">Lowest Coverage Packages</h3> <div id="coverageBars" class="bars"><!></div></article> <article class="card"><h2>VoxLogicA-1 vs VoxLogicA-2 Performance</h2> <!> <div id="perfSummary" class="muted"> </div> <h3 class="subheading">Primitive Benchmark Histogram</h3> <!> <div id="primitivePerfBars" class="bars"><!></div></article></div> <div class="grid-two"><article class="card"><h2>Test Run Logs</h2> <pre id="testRunLog" class="mono-scroll"> </pre> <h3 class="subheading">Recent Test Jobs</h3> <div id="recentTestJobs" class="job-list"><!></div></article> <article class="card"><h2>Test Titles</h2> <div id="testTitles" class="table-like muted"><!></div></article></div> <article class="card"><h2>Failing Test Cases</h2> <div id="failedCases" class="table-like muted"><!></div></article></section>');function Tu(e,t){Et(t,!1);let r=me(t,"active",8,!1),s=me(t,"capabilities",24,()=>({})),a=$("idle"),i=$(!1),l="",c=$(""),u=$([]),v=$(""),h=$({}),g=$({}),p=$([]),w=$([]),y=$([]),x=$("No performance report yet."),b=$(""),E=$(""),F=$([]),T=$("No primitive benchmark report yet."),A=null,R=null;const j=C=>{o(i,!1),o(a,"unavailable"),o(c,C)},q=async()=>{try{const C=await Xl(),ae=C?.junit||{},Fe=C?.coverage||{},Me=C?.performance||{};if(o(h,ae.summary||{}),o(g,Fe.summary||{}),o(p,Fe.lowest_modules||[]),o(w,ae.failed_cases||[]),o(y,ae.test_cases||[]),Me.available){const ie=Number(Me.speed_ratio||0),qe=Number(Me.vox1_median_s||0),wt=Number(Me.vox2_median_s||0),jt=Number(Me.vox1_cpu_median_s||0),Qt=Number(Me.vox2_cpu_median_s||0),Dt=Number(Me.vox1_ru_maxrss_delta_median_bytes||0),Or=Number(Me.vox2_ru_maxrss_delta_median_bytes||0);let Fr="";const mr=Me.test_metrics||{};if(mr.available){const yr=mr.tests||[];Fr=` | perf tests: ${Number(mr.count||yr.length)} | median util: ${fi(Ns(yr.map(Zt=>Number(Zt.cpu_utilization))))} | median heap: ${Qe(Ns(yr.map(Zt=>Number(Zt.python_heap_peak_bytes))))} | median rss delta: ${Qe(Ns(yr.map(Zt=>Number(Zt.ru_maxrss_delta_bytes))))}`}o(x,`vox1 median: ${yt(qe)} (cpu ${yt(jt)}, rss ${Qe(Dt)}) | vox2 median: ${yt(wt)} (cpu ${yt(Qt)}, rss ${Qe(Or)}) | ratio vox1/vox2: ${ie.toFixed(2)}x${Fr}`),o(b,`/api/v1/testing/performance/chart?t=${Date.now()}`);const br=Me.primitive_benchmarks||{};br.available?(o(F,br.cases||[]),o(T,""),o(E,br.svg_available?`/api/v1/testing/performance/primitive-chart?t=${Date.now()}`:"")):(o(F,[]),o(T,br.reason||"No primitive benchmark report yet."),o(E,""))}else o(x,"No performance report yet. Run `./tests/run-tests.sh` with perf tests enabled."),o(b,""),o(E,""),o(F,[]),o(T,"No primitive benchmark report yet.")}catch(C){o(x,`Failed loading report: ${C.message}`)}},G=async()=>{try{const C=await ec();o(u,C.jobs||[]),o(v,"")}catch(C){o(u,[]),o(v,`Failed to load test jobs: ${C.message}`)}},Z=async()=>{if(l)try{const C=await tc(l);if(o(a,C.status),o(c,C.log_tail||""),C.status==="running")return;o(i,!1),R&&(clearInterval(R),R=null),await Promise.all([q(),G()])}catch(C){o(i,!1),o(a,"failed"),o(c,`Unable to poll test job: ${C.message}`),R&&(clearInterval(R),R=null)}},Q=async(C,ae)=>{if(s().testing_jobs===!1){j("Testing jobs API unavailable. Restart `./voxlogica serve` from latest code.");return}try{o(i,!0),o(a,"running"),o(c,"");const Fe=await rc({profile:C,includePerf:ae});l=Fe.job_id,o(c,Fe.log_tail||""),R&&clearInterval(R),R=setInterval(Z,1200),await Promise.all([Z(),G()])}catch(Fe){o(i,!1),o(a,"failed"),o(c,`Unable to start test run: ${Fe.message}`)}},xe=async()=>{if(l)try{const C=await ii(l);o(i,!1),o(a,C.status),o(c,C.log_tail||""),R&&(clearInterval(R),R=null),await G()}catch(C){o(c,`Unable to kill current test job: ${C.message}`)}},be=async C=>{try{await ii(C),l===C&&(l="",o(i,!1),o(a,"killed")),await G()}catch(ae){o(v,`Unable to kill ${C}: ${ae.message}`)}},Le=()=>{A&&(clearInterval(A),A=null),A=setInterval(()=>{r()&&(q(),G(),Z())},15e3)},Ie=async()=>{await Promise.all([q(),G()])};vr(async()=>{await Ie(),Le()}),Dn(()=>{A&&clearInterval(A),R&&clearInterval(R)}),rt(()=>ve(r()),()=>{r()&&(Ie(),Le())}),rt(()=>ve(s()),()=>{s().testing_jobs===!1&&j("This backend does not expose testing jobs. Restart server from latest commit.")}),ur(),It();var Ce=Eu(),Pe=d(Ce),K=d(Pe),B=d(K),H=m(d(B),2),le=d(H),Te=m(le,2);Rs(Te,{get value(){return n(a)}});var Ae=m(B,2),Se=d(Ae),U=m(Se,2),W=m(U,2),Y=m(W,2),ne=m(Ae,2),X=d(ne),De=m(d(X)),Ee=d(De),Oe=m(X,2),D=m(d(Oe)),ue=d(D),ce=m(Oe,2),se=m(d(ce)),fe=d(se),ze=m(ce,2),$e=m(d(ze)),ke=d($e),Je=m(ze,2),ut=m(d(Je)),Ze=d(ut),Pt=m(Je,2),Gt=m(d(Pt)),He=d(Gt),We=m(ne,4),Ge=d(We);Bn(Ge,{get items(){return n(p)},valueField:"line_percent",labelField:"name",formatter:C=>`${Number(C).toFixed(2)}%`});var Gr=m(K,2),O=m(d(Gr),2);{var V=C=>{var ae=pu();ee(()=>hn(ae,"src",n(b))),I(C,ae)};we(O,C=>{n(b)&&C(V)})}var z=m(O,2),te=d(z),he=m(z,4);{var At=C=>{var ae=_u();ee(()=>hn(ae,"src",n(E))),I(C,ae)};we(he,C=>{n(E)&&C(At)})}var pr=m(he,2),_r=d(pr);{var Kt=C=>{Bn(C,{get items(){return n(F)},valueField:"speed_ratio",labelField:"name",formatter:ae=>`${Number(ae).toFixed(3)}x`})},Ot=C=>{var ae=hu(),Fe=d(ae);ee(()=>N(Fe,n(T))),I(C,ae)};we(_r,C=>{n(F),S(()=>n(F).length)?C(Kt):C(Ot,!1)})}var hr=m(Pe,2),Kr=d(hr),gn=m(d(Kr),2),Yt=d(gn),Vn=m(gn,4),Cs=d(Vn);{var Un=C=>{var ae=gu(),Fe=d(ae);ee(()=>N(Fe,n(v))),I(C,ae)},Ft=C=>{var ae=mu();I(C,ae)},Ps=C=>{var ae=bt(),Fe=it(ae);ct(Fe,1,()=>n(u),lt,(Me,ie)=>{var qe=yu(),wt=d(qe),jt=d(wt),Qt=d(jt),Dt=m(jt,2),Or=d(Dt),Fr=m(wt,2),mr=d(Fr),br=d(mr),yr=m(mr,2),Zt=d(yr),Ls=m(Fr,2),xn=d(Ls),Wn=d(xn),Gn=m(xn,2);{var Is=Xt=>{var Sn=bu();re("click",Sn,()=>be(n(ie).job_id)),I(Xt,Sn)};we(Gn,Xt=>{n(ie),S(()=>n(ie).status==="running")&&Xt(Is)})}ee(Xt=>{N(Qt,Xt),Ye(Dt,1,(n(ie),S(()=>`chip ${n(ie).status}`))),N(Or,(n(ie),S(()=>n(ie).status))),N(br,(n(ie),S(()=>n(ie).profile))),N(Zt,(n(ie),S(()=>n(ie).include_perf?"with perf":"no perf"))),N(Wn,(n(ie),S(()=>n(ie).created_at||"-")))},[()=>(n(ie),S(()=>String(n(ie).job_id||"").slice(0,12)))]),I(Me,qe)}),I(C,ae)};we(Cs,C=>{n(v)?C(Un):(n(u),S(()=>!n(u).length)?C(Ft,1):C(Ps,!1))})}var Jn=m(Kr,2),mn=m(d(Jn),2),Hn=d(mn);{var Yr=C=>{var ae=wu();I(C,ae)},gr=C=>{var ae=bt(),Fe=it(ae);ct(Fe,1,()=>(n(y),S(()=>n(y).slice(0,200))),lt,(Me,ie)=>{var qe=xu(),wt=d(qe),jt=d(wt),Qt=m(wt,2),Dt=d(Qt);ee(Or=>{N(jt,(n(ie),S(()=>n(ie).id))),N(Dt,`status=${n(ie),S(()=>n(ie).status)??""} | time=${Or??""}`)},[()=>(ve(yt),n(ie),S(()=>yt(Number(n(ie).time_s||0))))]),I(Me,qe)}),I(C,ae)};we(Hn,C=>{n(y),S(()=>!n(y).length)?C(Yr):C(gr,!1)})}var bn=m(hr,2),yn=m(d(bn),2),wn=d(yn);{var As=C=>{var ae=Su();I(C,ae)},Ms=C=>{var ae=bt(),Fe=it(ae);ct(Fe,1,()=>n(w),lt,(Me,ie)=>{var qe=ku(),wt=d(qe),jt=d(wt),Qt=m(wt,2),Dt=d(Qt);ee(()=>{N(jt,(n(ie),S(()=>n(ie).id))),N(Dt,(n(ie),S(()=>n(ie).message||"Failure without message")))}),I(Me,qe)}),I(C,ae)};we(wn,C=>{n(w),S(()=>!n(w).length)?C(As):C(Ms,!1)})}ee((C,ae,Fe,Me,ie,qe)=>{Ye(Ce,1,`panel ${r()?"active":""}`),Se.disabled=(n(i),ve(s()),S(()=>n(i)||s().testing_jobs===!1)),U.disabled=(n(i),ve(s()),S(()=>n(i)||s().testing_jobs===!1)),W.disabled=(n(i),ve(s()),S(()=>n(i)||s().testing_jobs===!1)),Y.disabled=!n(i),N(Ee,C),N(ue,ae),N(fe,Fe),N(ke,Me),N(Ze,ie),N(He,`${qe??""}%`),N(te,n(x)),N(Yt,n(c))},[()=>(n(h),S(()=>Number(n(h).total||0))),()=>(n(h),S(()=>Number(n(h).passed||0))),()=>(n(h),S(()=>Number(n(h).failed||0))),()=>(n(h),S(()=>Number(n(h).skipped||0))),()=>(ve(yt),n(h),S(()=>yt(Number(n(h).duration_s||0)))),()=>(n(g),S(()=>Number(n(g).line_percent||0).toFixed(2)))]),re("click",le,Ie),re("click",Se,()=>Q("quick",!1)),re("click",U,()=>Q("full",!0)),re("click",W,()=>Q("perf",!0)),re("click",Y,xe),I(e,Ce),Tt()}var $u=J('<div class="inline-error"> </div>'),Nu=J('<section id="tab-storage"><div class="grid-two"><article class="card"><div class="card-header"><h2>Cache Footprint</h2> <button id="refreshStorageBtn" class="btn btn-ghost btn-small" type="button">Refresh</button></div> <div class="stats-grid"><div class="stat"><span class="label">Cached Records</span> <strong id="sTotal"> </strong></div> <div class="stat"><span class="label">Materialized</span> <strong id="sMaterialized"> </strong></div> <div class="stat"><span class="label">Failed</span> <strong id="sFailed"> </strong></div> <div class="stat"><span class="label">Average Payload</span> <strong id="sAvgPayload"> </strong></div> <div class="stat"><span class="label">Total Payload</span> <strong id="sTotalPayload"> </strong></div> <div class="stat"><span class="label">Database Size</span> <strong id="sDbSize"> </strong></div></div> <p id="storageMeta" class="muted"> </p> <!></article> <article class="card"><h2>Payload Size Distribution</h2> <div id="payloadBuckets" class="bars"><!></div> <h3 class="subheading">Runtime Versions</h3> <div id="runtimeVersions" class="bars"><!></div></article></div></section>');function Ru(e,t){Et(t,!1);let r=me(t,"active",8,!1),s=$(null),a=$(null),i=$(null),l=$(""),c=$("");const u=async()=>{try{const Y=await nc();if(o(s,Y),!Y.available){o(c,Y.error||"Storage stats unavailable."),o(l,n(c)),o(a,null),o(i,null);return}o(c,""),o(a,Y.summary||{}),o(i,Y.disk||{}),o(l,`${Y.db_path} | last update ${n(a).last_update_at||"-"}`)}catch(Y){o(c,`Failed loading storage stats: ${Y.message}`),o(l,n(c)),o(a,null),o(i,null)}};vr(()=>{u()}),rt(()=>ve(r()),()=>{r()&&u()}),ur(),It();var v=Nu(),h=d(v),g=d(h),p=d(g),w=m(d(p),2),y=m(p,2),x=d(y),b=m(d(x),2),E=d(b),F=m(x,2),T=m(d(F),2),A=d(T),R=m(F,2),j=m(d(R),2),q=d(j),G=m(R,2),Z=m(d(G),2),Q=d(Z),xe=m(G,2),be=m(d(xe),2),Le=d(be),Ie=m(xe,2),Ce=m(d(Ie),2),Pe=d(Ce),K=m(y,2),B=d(K),H=m(K,2);{var le=Y=>{var ne=$u(),X=d(ne);ee(()=>N(X,n(c))),I(Y,ne)};we(H,Y=>{n(c)&&Y(le)})}var Te=m(g,2),Ae=m(d(Te),2),Se=d(Ae);{let Y=Ke(()=>(n(s),S(()=>n(s)?.payload_buckets||[])));Bn(Se,{get items(){return n(Y)},valueField:"count",labelField:"bucket",formatter:ne=>`${ne}`})}var U=m(Ae,4),W=d(U);{let Y=Ke(()=>(n(s),S(()=>n(s)?.runtime_versions||[])));Bn(W,{get items(){return n(Y)},valueField:"count",labelField:"runtime_version",formatter:ne=>`${ne}`})}ee((Y,ne,X,De,Ee,Oe)=>{Ye(v,1,`panel ${r()?"active":""}`),N(E,Y),N(A,ne),N(q,X),N(Q,De),N(Le,Ee),N(Pe,Oe),N(B,n(l))},[()=>(n(a),S(()=>n(a)?Number(n(a).total_records||0):"-")),()=>(n(a),S(()=>n(a)?Number(n(a).materialized_records||0):"-")),()=>(n(a),S(()=>n(a)?Number(n(a).failed_records||0):"-")),()=>(n(a),ve(Qe),S(()=>n(a)?Qe(Number(n(a).avg_payload_bytes||0)):"-")),()=>(n(a),ve(Qe),S(()=>n(a)?Qe(Number(n(a).total_payload_bytes||0)):"-")),()=>(n(i),ve(Qe),S(()=>n(i)?Qe(Number(n(i).db_bytes||0)+Number(n(i).wal_bytes||0)):"-"))]),re("click",w,u),I(e,v),Tt()}var Cu=J('<button type="button"> </button>'),Pu=J('<div class="background-layer"></div> <div class="shell"><header class="topbar"><div><p class="eyebrow">VoxLogicA Serve</p> <h1>VoxLogicA Studio Console</h1></div> <div class="topbar-meta"><span id="buildStamp" class="chip"> </span></div></header> <nav class="tabbar" aria-label="Main pages"></nav> <main class="content"><!> <!> <!> <!> <!> <!></main></div>',1);function Au(e,t){Et(t,!1);const r=[{id:"start",label:"Start"},{id:"playground",label:"Playground"},{id:"results",label:"Results Explorer"},{id:"gallery",label:"Example Gallery"},{id:"quality",label:"Test Intelligence"},{id:"storage",label:"Storage Stats"}];let s=$("start"),a=$({}),i=$("Loading..."),l=!1,c=[],u=null,v=!1;const h=300,g=40;let p=$();const w=K=>K.map(B=>{if(B instanceof Error)return B.stack||B.message||String(B);if(typeof B=="string")return B;try{return JSON.stringify(B)}catch{return String(B)}}).join(" "),y=async()=>{if(v||!c.length)return;v=!0;const K=c.splice(0,g);try{await Ul(K)}catch{c=[...K,...c].slice(-h)}finally{v=!1,c.length&&(u&&clearTimeout(u),u=setTimeout(y,800))}},x=(K,B,H=null)=>{c.push({level:K,message:w(B),source:"browser-console",url:window.location.href,ts:new Date().toISOString(),user_agent:navigator.userAgent,payload:H}),c.length>h&&(c=c.slice(-h)),u&&clearTimeout(u),u=setTimeout(y,250)},b=()=>{if(l||typeof window>"u"||typeof window.WebSocket>"u")return;l=!0;const K=["log","info","warn","error","debug"];for(const B of K){const H=console[B]?console[B].bind(console):console.log.bind(console);console[B]=(...le)=>{H(...le),x(B,le)}}window.addEventListener("error",B=>{x("error",[B.message||"window error"],{filename:B.filename,lineno:B.lineno,colno:B.colno})}),window.addEventListener("unhandledrejection",B=>{const H=B.reason;x("error",["unhandledrejection",H instanceof Error?H.stack||H.message:H],null)})},E=()=>{const K=window.location.protocol==="https:"?"wss":"ws",B=new WebSocket(`${K}://${window.location.host}/livereload`);B.onmessage=H=>{H.data==="reload"&&window.location.reload()},B.onclose=()=>{setTimeout(E,2e3)}},F=async K=>{const B=String(K.detail?.code||""),H=!!K.detail?.run;o(s,"playground"),n(p)&&typeof n(p).loadProgram=="function"&&await n(p).loadProgram(B,H)};vr(async()=>{b();try{const[K,B]=await Promise.all([Bl(),Vl()]);o(a,K||{}),o(i,`v${B.version||"unknown"}`)}catch{o(i,"version unavailable")}E()}),It();var T=Pu(),A=m(it(T),2),R=d(A),j=m(d(R),2),q=d(j),G=d(q),Z=m(R,2);ct(Z,5,()=>r,lt,(K,B)=>{var H=Cu(),le=d(H);ee(Te=>{Ye(H,1,Te),N(le,n(B).label)},[()=>Wa(`tab ${n(s)===n(B).id?"active":""}`.trim())]),re("click",H,()=>o(s,n(B).id)),I(K,H)});var Q=m(Z,2),xe=d(Q);{let K=Ke(()=>n(s)==="start");Oc(xe,{get active(){return n(K)},get capabilities(){return n(a)}})}var be=m(xe,2);{let K=Ke(()=>n(s)==="playground");Ir(eu(be,{get active(){return n(K)},get capabilities(){return n(a)},$$legacy:!0}),B=>o(p,B),()=>n(p))}var Le=m(be,2);{let K=Ke(()=>n(s)==="results");au(Le,{get active(){return n(K)},get capabilities(){return n(a)}})}var Ie=m(Le,2);{let K=Ke(()=>n(s)==="gallery");fu(Ie,{get active(){return n(K)},$$events:{load:F}})}var Ce=m(Ie,2);{let K=Ke(()=>n(s)==="quality");Tu(Ce,{get active(){return n(K)},get capabilities(){return n(a)}})}var Pe=m(Ce,2);{let K=Ke(()=>n(s)==="storage");Ru(Pe,{get active(){return n(K)}})}ee(()=>N(G,n(i))),I(e,T),Tt()}const pi=document.getElementById("app");if(!(pi instanceof HTMLElement))throw new Error("Missing #app root element.");ml(Au,{target:pi})})();
