(function(){"use strict";var an=Array.isArray,ri=Array.prototype.indexOf,wr=Array.prototype.includes,sn=Array.from,ni=Object.defineProperty,sr=Object.getOwnPropertyDescriptor,ha=Object.getOwnPropertyDescriptors,ai=Object.prototype,si=Array.prototype,An=Object.getPrototypeOf,ga=Object.isExtensible;const ii=()=>{};function li(e){return e()}function Mn(e){for(var t=0;t<e.length;t++)e[t]()}function ma(){var e,t,r=new Promise((a,s)=>{e=a,t=s});return{promise:r,resolve:e,reject:t}}const he=2,Or=4,jr=8,ba=1<<24,Tt=16,it=32,ir=64,Ln=128,He=512,de=1024,me=2048,Ge=4096,Oe=8192,Nt=16384,lr=32768,xr=65536,ya=1<<17,wa=1<<18,Sr=1<<19,xa=1<<20,Pt=1<<25,or=65536,Fn=1<<21,On=1<<22,Jt=1<<23,Rt=Symbol("$state"),oi=Symbol("legacy props"),ur=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function jn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function ui(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ci(e,t,r){throw new Error("https://svelte.dev/e/each_key_duplicate")}function fi(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function di(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function vi(e){throw new Error("https://svelte.dev/e/effect_orphan")}function _i(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function pi(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function hi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function gi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function mi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function bi(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const yi=1,wi=2,Sa=4,xi=8,Si=16,ki=1,Ei=2,$i=4,Ti=8,Ni=16,Pi=1,Ri=2,ge=Symbol(),ka="http://www.w3.org/1999/xhtml";function Ci(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Ii(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Ea(e){return e===this.v}function Ai(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function $a(e){return!Ai(e,this.v)}let kr=!1,uc=!1;function Mi(){kr=!0}let se=null;function Er(e){se=e}function Ct(e,t=!1,r){se={p:se,i:!1,c:null,e:null,s:e,x:null,l:kr&&!t?{s:null,u:null,$:[]}:null}}function It(e){var t=se,r=t.e;if(r!==null){t.e=null;for(var a of r)Ka(a)}return e!==void 0&&(t.x=e),t.i=!0,se=t.p,e??{}}function Dr(){return!kr||se!==null&&se.l===null}let cr=[];function Ta(){var e=cr;cr=[],Mn(e)}function At(e){if(cr.length===0&&!zr){var t=cr;queueMicrotask(()=>{t===cr&&Ta()})}cr.push(e)}function Li(){for(;cr.length>0;)Ta()}function Na(e){var t=Z;if(t===null)return W.f|=Jt,e;if((t.f&lr)===0&&(t.f&Or)===0)throw e;Ht(e,t)}function Ht(e,t){for(;t!==null;){if((t.f&Ln)!==0){if((t.f&lr)===0)throw e;try{t.b.error(e);return}catch(r){e=r}}t=t.parent}throw e}const Fi=-7169;function le(e,t){e.f=e.f&Fi|t}function Dn(e){(e.f&He)!==0||e.deps===null?le(e,de):le(e,Ge)}function Pa(e){if(e!==null)for(const t of e)(t.f&he)===0||(t.f&or)===0||(t.f^=or,Pa(t.deps))}function Ra(e,t,r){(e.f&me)!==0?t.add(e):(e.f&Ge)!==0&&r.add(e),Pa(e.deps),le(e,de)}const ln=new Set;let Y=null,on=null,lt=null,Re=[],un=null,zn=!1,zr=!1;class Gt{current=new Map;previous=new Map;#t=new Set;#l=new Set;#e=0;#i=0;#n=null;#s=new Set;#r=new Set;#a=new Map;is_fork=!1;#o=!1;#c(){return this.is_fork||this.#i>0}skip_effect(t){this.#a.has(t)||this.#a.set(t,{d:[],m:[]})}unskip_effect(t){var r=this.#a.get(t);if(r){this.#a.delete(t);for(var a of r.d)le(a,me),ot(a);for(a of r.m)le(a,Ge),ot(a)}}process(t){Re=[],this.apply();var r=[],a=[];for(const s of t)this.#u(s,r,a);if(this.#c()){this.#f(a),this.#f(r);for(const[s,i]of this.#a)La(s,i)}else{for(const s of this.#t)s();this.#t.clear(),this.#e===0&&this.#v(),on=this,Y=null,Ia(a),Ia(r),this.#s.clear(),this.#r.clear(),on=null,this.#n?.resolve()}lt=null}#u(t,r,a){t.f^=de;for(var s=t.first;s!==null;){var i=s.f,c=(i&(it|ir))!==0,l=c&&(i&de)!==0,o=l||(i&Oe)!==0||this.#a.has(s);if(!o&&s.fn!==null){c?s.f^=de:(i&Or)!==0?r.push(s):Pr(s)&&((i&Tt)!==0&&this.#r.add(s),pr(s));var v=s.first;if(v!==null){s=v;continue}}for(;s!==null;){var h=s.next;if(h!==null){s=h;break}s=s.parent}}}#f(t){for(var r=0;r<t.length;r+=1)Ra(t[r],this.#s,this.#r)}capture(t,r){r!==ge&&!this.previous.has(t)&&this.previous.set(t,r),(t.f&Jt)===0&&(this.current.set(t,t.v),lt?.set(t,t.v))}activate(){Y=this,this.apply()}deactivate(){Y===this&&(Y=null,lt=null)}flush(){if(this.activate(),Re.length>0){if(Ca(),Y!==null&&Y!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#l)t(this);this.#l.clear()}#v(){if(ln.size>1){this.previous.clear();var t=lt,r=!0;for(const s of ln){if(s===this){r=!1;continue}const i=[];for(const[l,o]of this.current){if(s.current.has(l))if(r&&o!==s.current.get(l))s.current.set(l,o);else continue;i.push(l)}if(i.length===0)continue;const c=[...s.current.keys()].filter(l=>!this.current.has(l));if(c.length>0){var a=Re;Re=[];const l=new Set,o=new Map;for(const v of i)Aa(v,c,l,o);if(Re.length>0){Y=s,s.apply();for(const v of Re)s.#u(v,[],[]);s.deactivate()}Re=a}}Y=null,lt=t}this.#a.clear(),ln.delete(this)}increment(t){this.#e+=1,t&&(this.#i+=1)}decrement(t){this.#e-=1,t&&(this.#i-=1),!this.#o&&(this.#o=!0,At(()=>{this.#o=!1,this.#c()?Re.length>0&&this.flush():this.revive()}))}revive(){for(const t of this.#s)this.#r.delete(t),le(t,me),ot(t);for(const t of this.#r)le(t,Ge),ot(t);this.flush()}oncommit(t){this.#t.add(t)}ondiscard(t){this.#l.add(t)}settled(){return(this.#n??=ma()).promise}static ensure(){if(Y===null){const t=Y=new Gt;ln.add(Y),zr||At(()=>{Y===t&&t.flush()})}return Y}apply(){}}function Oi(e){var t=zr;zr=!0;try{for(var r;;){if(Li(),Re.length===0&&(Y?.flush(),Re.length===0))return un=null,r;Ca()}}finally{zr=t}}function Ca(){zn=!0;var e=null;try{for(var t=0;Re.length>0;){var r=Gt.ensure();if(t++>1e3){var a,s;ji()}r.process(Re),Wt.clear()}}finally{Re=[],zn=!1,un=null}}function ji(){try{_i()}catch(e){Ht(e,un)}}let Mt=null;function Ia(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var a=e[r++];if((a.f&(Nt|Oe))===0&&Pr(a)&&(Mt=new Set,pr(a),a.deps===null&&a.first===null&&a.nodes===null&&a.teardown===null&&a.ac===null&&Za(a),Mt?.size>0)){Wt.clear();for(const s of Mt){if((s.f&(Nt|Oe))!==0)continue;const i=[s];let c=s.parent;for(;c!==null;)Mt.has(c)&&(Mt.delete(c),i.push(c)),c=c.parent;for(let l=i.length-1;l>=0;l--){const o=i[l];(o.f&(Nt|Oe))===0&&pr(o)}}Mt.clear()}}Mt=null}}function Aa(e,t,r,a){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const s of e.reactions){const i=s.f;(i&he)!==0?Aa(s,t,r,a):(i&(On|Tt))!==0&&(i&me)===0&&Ma(s,t,a)&&(le(s,me),ot(s))}}function Ma(e,t,r){const a=r.get(e);if(a!==void 0)return a;if(e.deps!==null)for(const s of e.deps){if(wr.call(t,s))return!0;if((s.f&he)!==0&&Ma(s,t,r))return r.set(s,!0),!0}return r.set(e,!1),!1}function ot(e){var t=un=e,r=t.b;if(r?.is_pending&&(e.f&(Or|jr|ba))!==0&&(e.f&lr)===0){r.defer_effect(e);return}for(;t.parent!==null;){t=t.parent;var a=t.f;if(zn&&t===Z&&(a&Tt)!==0&&(a&wa)===0&&(a&lr)!==0)return;if((a&(ir|it))!==0){if((a&de)===0)return;t.f^=de}}Re.push(t)}function La(e,t){if(!((e.f&it)!==0&&(e.f&de)!==0)){(e.f&me)!==0?t.d.push(e):(e.f&Ge)!==0&&t.m.push(e),le(e,de);for(var r=e.first;r!==null;)La(r,t),r=r.next}}function Di(e){let t=0,r=fr(0),a;return()=>{qn()&&(n(r),Ur(()=>(t===0&&(a=y(()=>e(()=>Vr(r)))),t+=1,()=>{At(()=>{t-=1,t===0&&(a?.(),a=void 0,Vr(r))})})))}}var zi=xr|Sr;function Vi(e,t,r,a){new Bi(e,t,r,a)}class Bi{parent;is_pending=!1;transform_error;#t;#l=null;#e;#i;#n;#s=null;#r=null;#a=null;#o=null;#c=0;#u=0;#f=!1;#v=new Set;#_=new Set;#d=null;#b=Di(()=>(this.#d=fr(this.#c),()=>{this.#d=null}));constructor(t,r,a,s){this.#t=t,this.#e=r,this.#i=i=>{var c=Z;c.b=this,c.f|=Ln,a(i)},this.parent=Z.b,this.transform_error=s??this.parent?.transform_error??(i=>i),this.#n=Hn(()=>{this.#g()},zi)}#y(){try{this.#s=We(()=>this.#i(this.#t))}catch(t){this.error(t)}}#w(t){const r=this.#e.failed;r&&(this.#a=We(()=>{r(this.#t,()=>t,()=>()=>{})}))}#x(){const t=this.#e.pending;t&&(this.is_pending=!0,this.#r=We(()=>t(this.#t)),At(()=>{var r=this.#o=document.createDocumentFragment(),a=Lt();r.append(a),this.#s=this.#h(()=>(Gt.ensure(),We(()=>this.#i(a)))),this.#u===0&&(this.#t.before(r),this.#o=null,dr(this.#r,()=>{this.#r=null}),this.#p())}))}#g(){try{if(this.is_pending=this.has_pending_snippet(),this.#u=0,this.#c=0,this.#s=We(()=>{this.#i(this.#t)}),this.#u>0){var t=this.#o=document.createDocumentFragment();ts(this.#s,t);const r=this.#e.pending;this.#r=We(()=>r(this.#t))}else this.#p()}catch(r){this.error(r)}}#p(){this.is_pending=!1;for(const t of this.#v)le(t,me),ot(t);for(const t of this.#_)le(t,Ge),ot(t);this.#v.clear(),this.#_.clear()}defer_effect(t){Ra(t,this.#v,this.#_)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#e.pending}#h(t){var r=Z,a=W,s=se;ht(this.#n),Ke(this.#n),Er(this.#n.ctx);try{return t()}catch(i){return Na(i),null}finally{ht(r),Ke(a),Er(s)}}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#u+=t,this.#u===0&&(this.#p(),this.#r&&dr(this.#r,()=>{this.#r=null}),this.#o&&(this.#t.before(this.#o),this.#o=null))}update_pending_count(t){this.#m(t),this.#c+=t,!(!this.#d||this.#f)&&(this.#f=!0,At(()=>{this.#f=!1,this.#d&&$r(this.#d,this.#c)}))}get_effect_pending(){return this.#b(),n(this.#d)}error(t){var r=this.#e.onerror;let a=this.#e.failed;if(!r&&!a)throw t;this.#s&&(Ie(this.#s),this.#s=null),this.#r&&(Ie(this.#r),this.#r=null),this.#a&&(Ie(this.#a),this.#a=null);var s=!1,i=!1;const c=()=>{if(s){Ii();return}s=!0,i&&bi(),this.#a!==null&&dr(this.#a,()=>{this.#a=null}),this.#h(()=>{Gt.ensure(),this.#g()})},l=o=>{try{i=!0,r?.(o,c),i=!1}catch(v){Ht(v,this.#n&&this.#n.parent)}a&&(this.#a=this.#h(()=>{Gt.ensure();try{return We(()=>{var v=Z;v.b=this,v.f|=Ln,a(this.#t,()=>o,()=>c)})}catch(v){return Ht(v,this.#n.parent),null}}))};At(()=>{var o;try{o=this.transform_error(t)}catch(v){Ht(v,this.#n&&this.#n.parent);return}o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(l,v=>Ht(v,this.#n&&this.#n.parent)):l(o)})}}function Ui(e,t,r,a){const s=Dr()?cn:Ce;var i=e.filter(w=>!w.settled);if(r.length===0&&i.length===0){a(t.map(s));return}var c=Z,l=qi(),o=i.length===1?i[0].promise:i.length>1?Promise.all(i.map(w=>w.promise)):null;function v(w){l();try{a(w)}catch(g){(c.f&Nt)===0&&Ht(g,c)}Vn()}if(r.length===0){o.then(()=>v(t.map(s)));return}function h(){l(),Promise.all(r.map(w=>Hi(w))).then(w=>v([...t.map(s),...w])).catch(w=>Ht(w,c))}o?o.then(h):h()}function qi(){var e=Z,t=W,r=se,a=Y;return function(i=!0){ht(e),Ke(t),Er(r),i&&a?.activate()}}function Vn(e=!0){ht(null),Ke(null),Er(null),e&&Y?.deactivate()}function Ji(){var e=Z.b,t=Y,r=e.is_rendered();return e.update_pending_count(1),t.increment(r),()=>{e.update_pending_count(-1),t.decrement(r)}}function cn(e){var t=he|me,r=W!==null&&(W.f&he)!==0?W:null;return Z!==null&&(Z.f|=Sr),{ctx:se,deps:null,effects:null,equals:Ea,f:t,fn:e,reactions:null,rv:0,v:ge,wv:0,parent:r??Z,ac:null}}function Hi(e,t,r){Z===null&&ui();var s=void 0,i=fr(ge),c=!W,l=new Map;return sl(()=>{var o=ma();s=o.promise;try{Promise.resolve(e()).then(o.resolve,o.reject).finally(Vn)}catch(g){o.reject(g),Vn()}var v=Y;if(c){var h=Ji();l.get(v)?.reject(ur),l.delete(v),l.set(v,o)}const w=(g,k=void 0)=>{if(v.activate(),k)k!==ur&&(i.f|=Jt,$r(i,k));else{(i.f&Jt)!==0&&(i.f^=Jt),$r(i,g);for(const[x,C]of l){if(l.delete(x),x===v)break;C.reject(ur)}}h&&h()};o.promise.then(w,g=>w(null,g||"unknown"))}),vn(()=>{for(const o of l.values())o.reject(ur)}),new Promise(o=>{function v(h){function w(){h===s?o(i):v(s)}h.then(w,w)}v(s)})}function Ce(e){const t=cn(e);return t.equals=$a,t}function Gi(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)Ie(t[r])}}function Wi(e){for(var t=e.parent;t!==null;){if((t.f&he)===0)return(t.f&Nt)===0?t:null;t=t.parent}return null}function Bn(e){var t,r=Z;ht(Wi(e));try{e.f&=~or,Gi(e),t=ls(e)}finally{ht(r)}return t}function Fa(e){var t=Bn(e);if(!e.equals(t)&&(e.wv=ss(),(!Y?.is_fork||e.deps===null)&&(e.v=t,e.deps===null))){le(e,de);return}Qt||(lt!==null?(qn()||Y?.is_fork)&&lt.set(e,t):Dn(e))}function Ki(e){if(e.effects!==null)for(const t of e.effects)(t.teardown||t.ac)&&(t.teardown?.(),t.ac?.abort(ur),t.teardown=ii,t.ac=null,qr(t,0),Gn(t))}function Oa(e){if(e.effects!==null)for(const t of e.effects)t.teardown&&pr(t)}let Un=new Set;const Wt=new Map;let ja=!1;function fr(e,t){var r={f:0,v:e,reactions:null,equals:Ea,rv:0,wv:0};return r}function Kt(e,t){const r=fr(e);return ol(r),r}function N(e,t=!1,r=!0){const a=fr(e);return t||(a.equals=$a),kr&&r&&se!==null&&se.l!==null&&(se.l.s??=[]).push(a),a}function vt(e,t){return f(e,y(()=>n(e))),t}function f(e,t,r=!1){W!==null&&(!ut||(W.f&ya)!==0)&&Dr()&&(W.f&(he|Tt|On|ya))!==0&&(Qe===null||!wr.call(Qe,e))&&mi();let a=r?Tr(t):t;return $r(e,a)}function $r(e,t){if(!e.equals(t)){var r=e.v;Qt?Wt.set(e,t):Wt.set(e,r),e.v=t;var a=Gt.ensure();if(a.capture(e,r),(e.f&he)!==0){const s=e;(e.f&me)!==0&&Bn(s),Dn(s)}e.wv=ss(),Da(e,me),Dr()&&Z!==null&&(Z.f&de)!==0&&(Z.f&(it|ir))===0&&(Ye===null?ul([e]):Ye.push(e)),!a.is_fork&&Un.size>0&&!ja&&Qi()}return t}function Qi(){ja=!1;for(const e of Un)(e.f&de)!==0&&le(e,Ge),Pr(e)&&pr(e);Un.clear()}function Vr(e){f(e,e.v+1)}function Da(e,t){var r=e.reactions;if(r!==null)for(var a=Dr(),s=r.length,i=0;i<s;i++){var c=r[i],l=c.f;if(!(!a&&c===Z)){var o=(l&me)===0;if(o&&le(c,t),(l&he)!==0){var v=c;lt?.delete(v),(l&or)===0&&(l&He&&(c.f|=or),Da(v,Ge))}else o&&((l&Tt)!==0&&Mt!==null&&Mt.add(c),ot(c))}}}function Tr(e){if(typeof e!="object"||e===null||Rt in e)return e;const t=An(e);if(t!==ai&&t!==si)return e;var r=new Map,a=an(e),s=Kt(0),i=_r,c=l=>{if(_r===i)return l();var o=W,v=_r;Ke(null),as(i);var h=l();return Ke(o),as(v),h};return a&&r.set("length",Kt(e.length)),new Proxy(e,{defineProperty(l,o,v){(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&hi();var h=r.get(o);return h===void 0?c(()=>{var w=Kt(v.value);return r.set(o,w),w}):f(h,v.value,!0),!0},deleteProperty(l,o){var v=r.get(o);if(v===void 0){if(o in l){const h=c(()=>Kt(ge));r.set(o,h),Vr(s)}}else f(v,ge),Vr(s);return!0},get(l,o,v){if(o===Rt)return e;var h=r.get(o),w=o in l;if(h===void 0&&(!w||sr(l,o)?.writable)&&(h=c(()=>{var k=Tr(w?l[o]:ge),x=Kt(k);return x}),r.set(o,h)),h!==void 0){var g=n(h);return g===ge?void 0:g}return Reflect.get(l,o,v)},getOwnPropertyDescriptor(l,o){var v=Reflect.getOwnPropertyDescriptor(l,o);if(v&&"value"in v){var h=r.get(o);h&&(v.value=n(h))}else if(v===void 0){var w=r.get(o),g=w?.v;if(w!==void 0&&g!==ge)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return v},has(l,o){if(o===Rt)return!0;var v=r.get(o),h=v!==void 0&&v.v!==ge||Reflect.has(l,o);if(v!==void 0||Z!==null&&(!h||sr(l,o)?.writable)){v===void 0&&(v=c(()=>{var g=h?Tr(l[o]):ge,k=Kt(g);return k}),r.set(o,v));var w=n(v);if(w===ge)return!1}return h},set(l,o,v,h){var w=r.get(o),g=o in l;if(a&&o==="length")for(var k=v;k<w.v;k+=1){var x=r.get(k+"");x!==void 0?f(x,ge):k in l&&(x=c(()=>Kt(ge)),r.set(k+"",x))}if(w===void 0)(!g||sr(l,o)?.writable)&&(w=c(()=>Kt(void 0)),f(w,Tr(v)),r.set(o,w));else{g=w.v!==ge;var C=c(()=>Tr(v));f(w,C)}var m=Reflect.getOwnPropertyDescriptor(l,o);if(m?.set&&m.set.call(h,v),!g){if(a&&typeof o=="string"){var $=r.get("length"),D=Number(o);Number.isInteger(D)&&D>=$.v&&f($,D+1)}Vr(s)}return!0},ownKeys(l){n(s);var o=Reflect.ownKeys(l).filter(w=>{var g=r.get(w);return g===void 0||g.v!==ge});for(var[v,h]of r)h.v!==ge&&!(v in l)&&o.push(v);return o},setPrototypeOf(){gi()}})}function za(e){try{if(e!==null&&typeof e=="object"&&Rt in e)return e[Rt]}catch{}return e}function Yi(e,t){return Object.is(za(e),za(t))}var Va,Ba,Ua,qa;function Zi(){if(Va===void 0){Va=window,Ba=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;Ua=sr(t,"firstChild").get,qa=sr(t,"nextSibling").get,ga(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),ga(r)&&(r.__t=void 0)}}function Lt(e=""){return document.createTextNode(e)}function fn(e){return Ua.call(e)}function Br(e){return qa.call(e)}function d(e,t){return fn(e)}function je(e,t=!1){{var r=fn(e);return r instanceof Comment&&r.data===""?Br(r):r}}function _(e,t=1,r=!1){let a=e;for(;t--;)a=Br(a);return a}function Xi(e){e.textContent=""}function Ja(){return!1}function el(e,t,r){return document.createElementNS(ka,e,void 0)}let Ha=!1;function tl(){Ha||(Ha=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function dn(e){var t=W,r=Z;Ke(null),ht(null);try{return e()}finally{Ke(t),ht(r)}}function Ga(e,t,r,a=r){e.addEventListener(t,()=>dn(r));const s=e.__on_r;s?e.__on_r=()=>{s(),a(!0)}:e.__on_r=()=>a(!0),tl()}function Wa(e){Z===null&&(W===null&&vi(),di()),Qt&&fi()}function rl(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function _t(e,t,r){var a=Z;a!==null&&(a.f&Oe)!==0&&(e|=Oe);var s={ctx:se,deps:null,nodes:null,f:e|me|He,first:null,fn:t,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{pr(s)}catch(l){throw Ie(s),l}else t!==null&&ot(s);var i=s;if(r&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&Sr)===0&&(i=i.first,(e&Tt)!==0&&(e&xr)!==0&&i!==null&&(i.f|=xr)),i!==null&&(i.parent=a,a!==null&&rl(i,a),W!==null&&(W.f&he)!==0&&(e&ir)===0)){var c=W;(c.effects??=[]).push(i)}return s}function qn(){return W!==null&&!ut}function vn(e){const t=_t(jr,null,!1);return le(t,de),t.teardown=e,t}function Jn(e){Wa();var t=Z.f,r=!W&&(t&it)!==0&&(t&lr)===0;if(r){var a=se;(a.e??=[]).push(e)}else return Ka(e)}function Ka(e){return _t(Or|xa,e,!1)}function nl(e){return Wa(),_t(jr|xa,e,!0)}function al(e){Gt.ensure();const t=_t(ir|Sr,e,!0);return(r={})=>new Promise(a=>{r.outro?dr(t,()=>{Ie(t),a(void 0)}):(Ie(t),a(void 0))})}function Qa(e){return _t(Or,e,!1)}function pt(e,t){var r=se,a={effect:null,ran:!1,deps:e};r.l.$.push(a),a.effect=Ur(()=>{e(),!a.ran&&(a.ran=!0,y(t))})}function Nr(){var e=se;Ur(()=>{for(var t of e.l.$){t.deps();var r=t.effect;(r.f&de)!==0&&r.deps!==null&&le(r,Ge),Pr(r)&&pr(r),t.ran=!1}})}function sl(e){return _t(On|Sr,e,!0)}function Ur(e,t=0){return _t(jr|t,e,!0)}function H(e,t=[],r=[],a=[]){Ui(a,t,r,s=>{_t(jr,()=>e(...s.map(n)),!0)})}function Hn(e,t=0){var r=_t(Tt|t,e,!0);return r}function We(e){return _t(it|Sr,e,!0)}function Ya(e){var t=e.teardown;if(t!==null){const r=Qt,a=W;rs(!0),Ke(null);try{t.call(null)}finally{rs(r),Ke(a)}}}function Gn(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const s=r.ac;s!==null&&dn(()=>{s.abort(ur)});var a=r.next;(r.f&ir)!==0?r.parent=null:Ie(r,t),r=a}}function il(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&it)===0&&Ie(t),t=r}}function Ie(e,t=!0){var r=!1;(t||(e.f&wa)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(ll(e.nodes.start,e.nodes.end),r=!0),Gn(e,t&&!r),qr(e,0),le(e,Nt);var a=e.nodes&&e.nodes.t;if(a!==null)for(const i of a)i.stop();Ya(e);var s=e.parent;s!==null&&s.first!==null&&Za(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function ll(e,t){for(;e!==null;){var r=e===t?null:Br(e);e.remove(),e=r}}function Za(e){var t=e.parent,r=e.prev,a=e.next;r!==null&&(r.next=a),a!==null&&(a.prev=r),t!==null&&(t.first===e&&(t.first=a),t.last===e&&(t.last=r))}function dr(e,t,r=!0){var a=[];Xa(e,a,!0);var s=()=>{r&&Ie(e),t&&t()},i=a.length;if(i>0){var c=()=>--i||s();for(var l of a)l.out(c)}else s()}function Xa(e,t,r){if((e.f&Oe)===0){e.f^=Oe;var a=e.nodes&&e.nodes.t;if(a!==null)for(const l of a)(l.is_global||r)&&t.push(l);for(var s=e.first;s!==null;){var i=s.next,c=(s.f&xr)!==0||(s.f&it)!==0&&(e.f&Tt)!==0;Xa(s,t,c?r:!1),s=i}}}function Wn(e){es(e,!0)}function es(e,t){if((e.f&Oe)!==0){e.f^=Oe,(e.f&de)===0&&(le(e,me),ot(e));for(var r=e.first;r!==null;){var a=r.next,s=(r.f&xr)!==0||(r.f&it)!==0;es(r,s?t:!1),r=a}var i=e.nodes&&e.nodes.t;if(i!==null)for(const c of i)(c.is_global||t)&&c.in()}}function ts(e,t){if(e.nodes)for(var r=e.nodes.start,a=e.nodes.end;r!==null;){var s=r===a?null:Br(r);t.append(r),r=s}}let _n=!1,Qt=!1;function rs(e){Qt=e}let W=null,ut=!1;function Ke(e){W=e}let Z=null;function ht(e){Z=e}let Qe=null;function ol(e){W!==null&&(Qe===null?Qe=[e]:Qe.push(e))}let Ae=null,De=0,Ye=null;function ul(e){Ye=e}let ns=1,vr=0,_r=vr;function as(e){_r=e}function ss(){return++ns}function Pr(e){var t=e.f;if((t&me)!==0)return!0;if(t&he&&(e.f&=~or),(t&Ge)!==0){for(var r=e.deps,a=r.length,s=0;s<a;s++){var i=r[s];if(Pr(i)&&Fa(i),i.wv>e.wv)return!0}(t&He)!==0&&lt===null&&le(e,de)}return!1}function is(e,t,r=!0){var a=e.reactions;if(a!==null&&!(Qe!==null&&wr.call(Qe,e)))for(var s=0;s<a.length;s++){var i=a[s];(i.f&he)!==0?is(i,t,!1):t===i&&(r?le(i,me):(i.f&de)!==0&&le(i,Ge),ot(i))}}function ls(e){var t=Ae,r=De,a=Ye,s=W,i=Qe,c=se,l=ut,o=_r,v=e.f;Ae=null,De=0,Ye=null,W=(v&(it|ir))===0?e:null,Qe=null,Er(e.ctx),ut=!1,_r=++vr,e.ac!==null&&(dn(()=>{e.ac.abort(ur)}),e.ac=null);try{e.f|=Fn;var h=e.fn,w=h();e.f|=lr;var g=e.deps,k=Y?.is_fork;if(Ae!==null){var x;if(k||qr(e,De),g!==null&&De>0)for(g.length=De+Ae.length,x=0;x<Ae.length;x++)g[De+x]=Ae[x];else e.deps=g=Ae;if(qn()&&(e.f&He)!==0)for(x=De;x<g.length;x++)(g[x].reactions??=[]).push(e)}else!k&&g!==null&&De<g.length&&(qr(e,De),g.length=De);if(Dr()&&Ye!==null&&!ut&&g!==null&&(e.f&(he|Ge|me))===0)for(x=0;x<Ye.length;x++)is(Ye[x],e);if(s!==null&&s!==e){if(vr++,s.deps!==null)for(let C=0;C<r;C+=1)s.deps[C].rv=vr;if(t!==null)for(const C of t)C.rv=vr;Ye!==null&&(a===null?a=Ye:a.push(...Ye))}return(e.f&Jt)!==0&&(e.f^=Jt),w}catch(C){return Na(C)}finally{e.f^=Fn,Ae=t,De=r,Ye=a,W=s,Qe=i,Er(c),ut=l,_r=o}}function cl(e,t){let r=t.reactions;if(r!==null){var a=ri.call(r,e);if(a!==-1){var s=r.length-1;s===0?r=t.reactions=null:(r[a]=r[s],r.pop())}}if(r===null&&(t.f&he)!==0&&(Ae===null||!wr.call(Ae,t))){var i=t;(i.f&He)!==0&&(i.f^=He,i.f&=~or),Dn(i),Ki(i),qr(i,0)}}function qr(e,t){var r=e.deps;if(r!==null)for(var a=t;a<r.length;a++)cl(e,r[a])}function pr(e){var t=e.f;if((t&Nt)===0){le(e,de);var r=Z,a=_n;Z=e,_n=!0;try{(t&(Tt|ba))!==0?il(e):Gn(e),Ya(e);var s=ls(e);e.teardown=typeof s=="function"?s:null,e.wv=ns;var i}finally{_n=a,Z=r}}}async function fl(){await Promise.resolve(),Oi()}function n(e){var t=e.f,r=(t&he)!==0;if(W!==null&&!ut){var a=Z!==null&&(Z.f&Nt)!==0;if(!a&&(Qe===null||!wr.call(Qe,e))){var s=W.deps;if((W.f&Fn)!==0)e.rv<vr&&(e.rv=vr,Ae===null&&s!==null&&s[De]===e?De++:Ae===null?Ae=[e]:Ae.push(e));else{(W.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[W]:wr.call(i,W)||i.push(W)}}}if(Qt&&Wt.has(e))return Wt.get(e);if(r){var c=e;if(Qt){var l=c.v;return((c.f&de)===0&&c.reactions!==null||us(c))&&(l=Bn(c)),Wt.set(c,l),l}var o=(c.f&He)===0&&!ut&&W!==null&&(_n||(W.f&He)!==0),v=(c.f&lr)===0;Pr(c)&&(o&&(c.f|=He),Fa(c)),o&&!v&&(Oa(c),os(c))}if(lt?.has(e))return lt.get(e);if((e.f&Jt)!==0)throw e.v;return e.v}function os(e){if(e.f|=He,e.deps!==null)for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&he)!==0&&(t.f&He)===0&&(Oa(t),os(t))}function us(e){if(e.v===ge)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Wt.has(t)||(t.f&he)!==0&&us(t))return!0;return!1}function y(e){var t=ut;try{return ut=!0,e()}finally{ut=t}}function X(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Rt in e)Kn(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&Rt in r&&Kn(r)}}}function Kn(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let a in e)try{Kn(e[a],t)}catch{}const r=An(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const a=ha(r);for(let s in a){const i=a[s].get;if(i)try{i.call(e)}catch{}}}}}const dl=["touchstart","touchmove"];function vl(e){return dl.includes(e)}const pn=Symbol("events"),_l=new Set,cs=new Set;function pl(e,t,r,a={}){function s(i){if(a.capture||Qn.call(t,i),!i.cancelBubble)return dn(()=>r?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?At(()=>{t.addEventListener(e,s,a)}):t.addEventListener(e,s,a),s}function ee(e,t,r,a,s){var i={capture:a,passive:s},c=pl(e,t,r,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&vn(()=>{t.removeEventListener(e,c,i)})}let fs=null;function Qn(e){var t=this,r=t.ownerDocument,a=e.type,s=e.composedPath?.()||[],i=s[0]||e.target;fs=e;var c=0,l=fs===e&&e[pn];if(l){var o=s.indexOf(l);if(o!==-1&&(t===document||t===window)){e[pn]=t;return}var v=s.indexOf(t);if(v===-1)return;o<=v&&(c=o)}if(i=s[c]||e.target,i!==t){ni(e,"currentTarget",{configurable:!0,get(){return i||r}});var h=W,w=Z;Ke(null),ht(null);try{for(var g,k=[];i!==null;){var x=i.assignedSlot||i.parentNode||i.host||null;try{var C=i[pn]?.[a];C!=null&&(!i.disabled||e.target===i)&&C.call(i,e)}catch(m){g?k.push(m):g=m}if(e.cancelBubble||x===t||x===null)break;i=x}if(g){for(let m of k)queueMicrotask(()=>{throw m});throw g}}finally{e[pn]=t,delete e.currentTarget,Ke(h),ht(w)}}}const hl=globalThis?.window?.trustedTypes&&globalThis.window.trustedTypes.createPolicy("svelte-trusted-html",{createHTML:e=>e});function gl(e){return hl?.createHTML(e)??e}function ml(e){var t=el("template");return t.innerHTML=gl(e.replaceAll("<!>","<!---->")),t.content}function hn(e,t){var r=Z;r.nodes===null&&(r.nodes={start:e,end:t,a:null,t:null})}function z(e,t){var r=(t&Pi)!==0,a=(t&Ri)!==0,s,i=!e.startsWith("<!>");return()=>{s===void 0&&(s=ml(i?e:"<!>"+e),r||(s=fn(s)));var c=a||Ba?document.importNode(s,!0):s.cloneNode(!0);if(r){var l=fn(c),o=c.lastChild;hn(l,o)}else hn(c,c);return c}}function bl(e=""){{var t=Lt(e+"");return hn(t,t),t}}function Ze(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Lt();return e.append(t,r),hn(t,r),e}function I(e,t){e!==null&&e.before(t)}function E(e,t){var r=t==null?"":typeof t=="object"?`${t}`:t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=`${r}`)}function yl(e,t){return wl(e,t)}const gn=new Map;function wl(e,{target:t,anchor:r,props:a={},events:s,context:i,intro:c=!0,transformError:l}){Zi();var o=void 0,v=al(()=>{var h=r??t.appendChild(Lt());Vi(h,{pending:()=>{}},k=>{Ct({});var x=se;i&&(x.c=i),s&&(a.$$events=s),o=e(k,a)||{},It()},l);var w=new Set,g=k=>{for(var x=0;x<k.length;x++){var C=k[x];if(!w.has(C)){w.add(C);var m=vl(C);for(const R of[t,document]){var $=gn.get(R);$===void 0&&($=new Map,gn.set(R,$));var D=$.get(C);D===void 0?(R.addEventListener(C,Qn,{passive:m}),$.set(C,1)):$.set(C,D+1)}}}};return g(sn(_l)),cs.add(g),()=>{for(var k of w)for(const m of[t,document]){var x=gn.get(m),C=x.get(k);--C==0?(m.removeEventListener(k,Qn),x.delete(k),x.size===0&&gn.delete(m)):x.set(k,C)}cs.delete(g),h!==r&&h.parentNode?.removeChild(h)}});return xl.set(o,v),o}let xl=new WeakMap;class Sl{anchor;#t=new Map;#l=new Map;#e=new Map;#i=new Set;#n=!0;constructor(t,r=!0){this.anchor=t,this.#n=r}#s=()=>{var t=Y;if(this.#t.has(t)){var r=this.#t.get(t),a=this.#l.get(r);if(a)Wn(a),this.#i.delete(r);else{var s=this.#e.get(r);s&&(this.#l.set(r,s.effect),this.#e.delete(r),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),a=s.effect)}for(const[i,c]of this.#t){if(this.#t.delete(i),i===t)break;const l=this.#e.get(c);l&&(Ie(l.effect),this.#e.delete(c))}for(const[i,c]of this.#l){if(i===r||this.#i.has(i))continue;const l=()=>{if(Array.from(this.#t.values()).includes(i)){var v=document.createDocumentFragment();ts(c,v),v.append(Lt()),this.#e.set(i,{effect:c,fragment:v})}else Ie(c);this.#i.delete(i),this.#l.delete(i)};this.#n||!a?(this.#i.add(i),dr(c,l,!1)):l()}}};#r=t=>{this.#t.delete(t);const r=Array.from(this.#t.values());for(const[a,s]of this.#e)r.includes(a)||(Ie(s.effect),this.#e.delete(a))};ensure(t,r){var a=Y,s=Ja();if(r&&!this.#l.has(t)&&!this.#e.has(t))if(s){var i=document.createDocumentFragment(),c=Lt();i.append(c),this.#e.set(t,{effect:We(()=>r(c)),fragment:i})}else this.#l.set(t,We(()=>r(this.anchor)));if(this.#t.set(a,t),s){for(const[l,o]of this.#l)l===t?a.unskip_effect(o):a.skip_effect(o);for(const[l,o]of this.#e)l===t?a.unskip_effect(o.effect):a.skip_effect(o.effect);a.oncommit(this.#s),a.ondiscard(this.#r)}else this.#s()}}function oe(e,t,r=!1){var a=new Sl(e),s=r?xr:0;function i(c,l){a.ensure(c,l)}Hn(()=>{var c=!1;t((l,o=0)=>{c=!0,i(o,l)}),c||i(!1,null)},s)}function Xe(e,t){return t}function kl(e,t,r){for(var a=[],s=t.length,i,c=t.length,l=0;l<s;l++){let w=t[l];dr(w,()=>{if(i){if(i.pending.delete(w),i.done.add(w),i.pending.size===0){var g=e.outrogroups;Yn(sn(i.done)),g.delete(i),g.size===0&&(e.outrogroups=null)}}else c-=1},!1)}if(c===0){var o=a.length===0&&r!==null;if(o){var v=r,h=v.parentNode;Xi(h),h.append(v),e.items.clear()}Yn(t,!o)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function Yn(e,t=!0){for(var r=0;r<e.length;r++)Ie(e[r],t)}var ds;function et(e,t,r,a,s,i=null){var c=e,l=new Map,o=(t&Sa)!==0;if(o){var v=e;c=v.appendChild(Lt())}var h=null,w=Ce(()=>{var $=r();return an($)?$:$==null?[]:sn($)}),g,k=!0;function x(){m.fallback=h,El(m,g,c,t,a),h!==null&&(g.length===0?(h.f&Pt)===0?Wn(h):(h.f^=Pt,Hr(h,null,c)):dr(h,()=>{h=null}))}var C=Hn(()=>{g=n(w);for(var $=g.length,D=new Set,R=Y,J=Ja(),j=0;j<$;j+=1){var P=g[j],A=a(P,j),F=k?null:l.get(A);F?(F.v&&$r(F.v,P),F.i&&$r(F.i,j),J&&R.unskip_effect(F.e)):(F=$l(l,k?c:ds??=Lt(),P,A,j,s,t,r),k||(F.e.f|=Pt),l.set(A,F)),D.add(A)}if($===0&&i&&!h&&(k?h=We(()=>i(c)):(h=We(()=>i(ds??=Lt())),h.f|=Pt)),$>D.size&&ci(),!k)if(J){for(const[ie,V]of l)D.has(ie)||R.skip_effect(V.e);R.oncommit(x),R.ondiscard(()=>{})}else x();n(w)}),m={effect:C,items:l,outrogroups:null,fallback:h};k=!1}function Jr(e){for(;e!==null&&(e.f&it)===0;)e=e.next;return e}function El(e,t,r,a,s){var i=(a&xi)!==0,c=t.length,l=e.items,o=Jr(e.effect.first),v,h=null,w,g=[],k=[],x,C,m,$;if(i)for($=0;$<c;$+=1)x=t[$],C=s(x,$),m=l.get(C).e,(m.f&Pt)===0&&(m.nodes?.a?.measure(),(w??=new Set).add(m));for($=0;$<c;$+=1){if(x=t[$],C=s(x,$),m=l.get(C).e,e.outrogroups!==null)for(const V of e.outrogroups)V.pending.delete(m),V.done.delete(m);if((m.f&Pt)!==0)if(m.f^=Pt,m===o)Hr(m,null,r);else{var D=h?h.next:o;m===e.effect.last&&(e.effect.last=m.prev),m.prev&&(m.prev.next=m.next),m.next&&(m.next.prev=m.prev),Yt(e,h,m),Yt(e,m,D),Hr(m,D,r),h=m,g=[],k=[],o=Jr(h.next);continue}if((m.f&Oe)!==0&&(Wn(m),i&&(m.nodes?.a?.unfix(),(w??=new Set).delete(m))),m!==o){if(v!==void 0&&v.has(m)){if(g.length<k.length){var R=k[0],J;h=R.prev;var j=g[0],P=g[g.length-1];for(J=0;J<g.length;J+=1)Hr(g[J],R,r);for(J=0;J<k.length;J+=1)v.delete(k[J]);Yt(e,j.prev,P.next),Yt(e,h,j),Yt(e,P,R),o=R,h=P,$-=1,g=[],k=[]}else v.delete(m),Hr(m,o,r),Yt(e,m.prev,m.next),Yt(e,m,h===null?e.effect.first:h.next),Yt(e,h,m),h=m;continue}for(g=[],k=[];o!==null&&o!==m;)(v??=new Set).add(o),k.push(o),o=Jr(o.next);if(o===null)continue}(m.f&Pt)===0&&g.push(m),h=m,o=Jr(m.next)}if(e.outrogroups!==null){for(const V of e.outrogroups)V.pending.size===0&&(Yn(sn(V.done)),e.outrogroups?.delete(V));e.outrogroups.size===0&&(e.outrogroups=null)}if(o!==null||v!==void 0){var A=[];if(v!==void 0)for(m of v)(m.f&Oe)===0&&A.push(m);for(;o!==null;)(o.f&Oe)===0&&o!==e.fallback&&A.push(o),o=Jr(o.next);var F=A.length;if(F>0){var ie=(a&Sa)!==0&&c===0?r:null;if(i){for($=0;$<F;$+=1)A[$].nodes?.a?.measure();for($=0;$<F;$+=1)A[$].nodes?.a?.fix()}kl(e,A,ie)}}i&&At(()=>{if(w!==void 0)for(m of w)m.nodes?.a?.apply()})}function $l(e,t,r,a,s,i,c,l){var o=(c&yi)!==0?(c&Si)===0?N(r,!1,!1):fr(r):null,v=(c&wi)!==0?fr(s):null;return{v:o,i:v,e:We(()=>(i(t,o??r,v??s,l),()=>{e.delete(a)}))}}function Hr(e,t,r){if(e.nodes)for(var a=e.nodes.start,s=e.nodes.end,i=t&&(t.f&Pt)===0?t.nodes.start:r;a!==null;){var c=Br(a);if(i.before(a),a===s)return;a=c}}function Yt(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}function vs(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=vs(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function Tl(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=vs(e))&&(a&&(a+=" "),a+=t);return a}function _s(e){return typeof e=="object"?Tl(e):e??""}function Nl(e,t,r){var a=e==null?"":""+e;return a===""?null:a}function Pl(e,t){return e==null?null:String(e)}function tt(e,t,r,a,s,i){var c=e.__className;if(c!==r||c===void 0){var l=Nl(r);l==null?e.removeAttribute("class"):e.className=l,e.__className=r}return i}function Rl(e,t,r,a){var s=e.__style;if(s!==t){var i=Pl(t);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}return a}function ps(e,t,r=!1){if(e.multiple){if(t==null)return;if(!an(t))return Ci();for(var a of e.options)a.selected=t.includes(Gr(a));return}for(a of e.options){var s=Gr(a);if(Yi(s,t)){a.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Cl(e){var t=new MutationObserver(()=>{ps(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),vn(()=>{t.disconnect()})}function mn(e,t,r=t){var a=new WeakSet,s=!0;Ga(e,"change",i=>{var c=i?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(c),Gr);else{var o=e.querySelector(c)??e.querySelector("option:not([disabled])");l=o&&Gr(o)}r(l),Y!==null&&a.add(Y)}),Qa(()=>{var i=t();if(e===document.activeElement){var c=on??Y;if(a.has(c))return}if(ps(e,i,s),s&&i===void 0){var l=e.querySelector(":checked");l!==null&&(i=Gr(l),r(i))}e.__value=i,s=!1}),Cl(e)}function Gr(e){return"__value"in e?e.__value:e.value}const Il=Symbol("is custom element"),Al=Symbol("is html");function hs(e,t,r,a){var s=Ml(e);s[t]!==(s[t]=r)&&(r==null?e.removeAttribute(t):typeof r!="string"&&Ll(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Ml(e){return e.__attributes??={[Il]:e.nodeName.includes("-"),[Al]:e.namespaceURI===ka}}var gs=new Map;function Ll(e){var t=e.getAttribute("is")||e.nodeName,r=gs.get(t);if(r)return r;gs.set(t,r=[]);for(var a,s=e,i=Element.prototype;i!==s;){a=ha(s);for(var c in a)a[c].set&&r.push(c);s=An(s)}return r}function ms(e,t,r=t){var a=new WeakSet;Ga(e,"input",async s=>{var i=s?e.defaultValue:e.value;if(i=Zn(e)?Xn(i):i,r(i),Y!==null&&a.add(Y),await fl(),i!==(i=t())){var c=e.selectionStart,l=e.selectionEnd,o=e.value.length;if(e.value=i??"",l!==null){var v=e.value.length;c===l&&l===o&&v>o?(e.selectionStart=v,e.selectionEnd=v):(e.selectionStart=c,e.selectionEnd=Math.min(l,v))}}}),y(t)==null&&e.value&&(r(Zn(e)?Xn(e.value):e.value),Y!==null&&a.add(Y)),Ur(()=>{var s=t();if(e===document.activeElement){var i=on??Y;if(a.has(i))return}Zn(e)&&s===Xn(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function Zn(e){var t=e.type;return t==="number"||t==="range"}function Xn(e){return e===""?null:+e}function bs(e,t,r){var a=sr(e,t);a&&a.set&&(e[t]=r,vn(()=>{e[t]=null}))}function ys(e,t){return e===t||e?.[Rt]===t}function Rr(e={},t,r,a){return Qa(()=>{var s,i;return Ur(()=>{s=i,i=[],y(()=>{e!==r(...i)&&(t(e,...i),s&&ys(r(...s),e)&&t(null,...s))})}),()=>{At(()=>{i&&ys(r(...i),e)&&t(null,...i)})}}),e}function Zt(e=!1){const t=se,r=t.l.u;if(!r)return;let a=()=>X(t.s);if(e){let s=0,i={};const c=cn(()=>{let l=!1;const o=t.s;for(const v in o)o[v]!==i[v]&&(i[v]=o[v],l=!0);return l&&s++,s});a=()=>n(c)}r.b.length&&nl(()=>{ws(t,a),Mn(r.b)}),Jn(()=>{const s=y(()=>r.m.map(li));return()=>{for(const i of s)typeof i=="function"&&i()}}),r.a.length&&Jn(()=>{ws(t,a),Mn(r.a)})}function ws(e,t){if(e.l.s)for(const r of e.l.s)n(r);t()}let bn=!1;function Fl(e){var t=bn;try{return bn=!1,[e(),bn]}finally{bn=t}}function ke(e,t,r,a){var s=!kr||(r&Ei)!==0,i=(r&Ti)!==0,c=(r&Ni)!==0,l=a,o=!0,v=()=>(o&&(o=!1,l=c?y(a):a),l),h;if(i){var w=Rt in e||oi in e;h=sr(e,t)?.set??(w&&t in e?R=>e[t]=R:void 0)}var g,k=!1;i?[g,k]=Fl(()=>e[t]):g=e[t],g===void 0&&a!==void 0&&(g=v(),h&&(s&&pi(),h(g)));var x;if(s?x=()=>{var R=e[t];return R===void 0?v():(o=!0,R)}:x=()=>{var R=e[t];return R!==void 0&&(l=void 0),R===void 0?l:R},s&&(r&$i)===0)return x;if(h){var C=e.$$legacy;return(function(R,J){return arguments.length>0?((!s||!J||C||k)&&h(J?x():R),R):x()})}var m=!1,$=((r&ki)!==0?cn:Ce)(()=>(m=!1,x()));i&&n($);var D=Z;return(function(R,J){if(arguments.length>0){const j=J?n($):s&&i?Tr(R):R;return f($,j),m=!0,l!==void 0&&(l=j),R}return Qt&&m||(D.f&Nt)!==0?$.v:n($)})}function hr(e){se===null&&jn(),kr&&se.l!==null?Dl(se).m.push(e):Jn(()=>{const t=y(e);if(typeof t=="function")return t})}function xs(e){se===null&&jn(),hr(()=>()=>y(e))}function Ol(e,t,{bubbles:r=!1,cancelable:a=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:a})}function jl(){const e=se;return e===null&&jn(),(t,r,a)=>{const s=e.s.$$events?.[t];if(s){const i=an(s)?s.slice():[s],c=Ol(t,r,a);for(const l of i)l.call(e.x,c);return!c.defaultPrevented}return!0}}function Dl(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const zl="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(zl),Mi();const Vl=(e,t,r)=>r&&typeof r=="object"?typeof r.message=="string"?r.message:typeof r.code=="string"?r.code:JSON.stringify(r):typeof r=="string"&&r.trim()?r:`${e} ${t}`,ue=async(e,t={})=>{const r=await fetch(e,t),a=await r.text(),s=a?JSON.parse(a):{};if(!r.ok)throw new Error(Vl(r.status,r.statusText,s?.detail));return s},Bl=()=>ue("/api/v1/capabilities"),Ul=()=>ue("/api/v1/version"),ql=()=>ue("/api/v1/playground/files"),Jl=e=>ue(`/api/v1/playground/files/${io(e)}`),Hl=e=>ue("/api/v1/playground/symbols",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({program:e})}),Gl=e=>ue("/api/v1/playground/jobs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({program:e,execute:!0,execution_strategy:"dask"})}),Wl=()=>ue("/api/v1/playground/jobs"),Ss=e=>ue(`/api/v1/playground/jobs/${encodeURIComponent(e)}`),ks=e=>ue(`/api/v1/playground/jobs/${encodeURIComponent(e)}`,{method:"DELETE"}),Kl=({program:e,nodeId:t="",variable:r="",path:a="",enqueue:s=!0})=>{const i={program:e,execution_strategy:"dask",variable:r,path:a,enqueue:s};return!r&&t&&(i.node_id=t),ue("/api/v1/playground/value",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})},Ql=({program:e,nodeId:t="",variable:r="",path:a="",offset:s=0,limit:i=64,enqueue:c=!0})=>{const l={program:e,execution_strategy:"dask",variable:r,path:a,offset:Math.max(0,Number(s||0)),limit:Math.max(1,Number(i||64)),enqueue:c};return!r&&t&&(l.node_id=t),ue("/api/v1/playground/value/page",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})},Yl=({limit:e=200,statusFilter:t="",nodeFilter:r=""}={})=>{const a=new URLSearchParams;return a.set("limit",`${e}`),t&&a.set("status_filter",t),r&&a.set("node_filter",r),ue(`/api/v1/results/store?${a.toString()}`)},Zl=(e,t="")=>{const r=t?`?path=${encodeURIComponent(t)}`:"";return ue(`/api/v1/results/store/${encodeURIComponent(e)}${r}`)},Xl=({nodeId:e,path:t="",offset:r=0,limit:a=64})=>{const s=new URLSearchParams;return t&&s.set("path",t),s.set("offset",`${Math.max(0,Number(r||0))}`),s.set("limit",`${Math.max(1,Number(a||64))}`),ue(`/api/v1/results/store/${encodeURIComponent(e)}/page?${s.toString()}`)},eo=()=>ue("/api/v1/docs/gallery"),to=()=>ue("/api/v1/testing/report"),ro=()=>ue("/api/v1/testing/jobs"),no=e=>ue(`/api/v1/testing/jobs/${encodeURIComponent(e)}`),ao=({profile:e,includePerf:t})=>ue("/api/v1/testing/jobs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:e,include_perf:t})}),Es=e=>ue(`/api/v1/testing/jobs/${encodeURIComponent(e)}`,{method:"DELETE"}),so=()=>ue("/api/v1/storage/stats"),io=e=>String(e||"").split("/").map(t=>encodeURIComponent(t)).join("/"),rt=e=>Number.isFinite(e)?e<.001?`${(e*1e3).toFixed(2)} ms`:`${e.toFixed(3)} s`:"-",$s=e=>Number.isFinite(e)?`${(e*100).toFixed(1)}%`:"-",Ee=e=>{if(!Number.isFinite(e)||e<0)return"-";const t=["B","KB","MB","GB","TB"];let r=e,a=0;for(;r>=1024&&a<t.length-1;)r/=1024,a+=1;return`${r.toFixed(a===0?0:2)} ${t[a]}`},ea=e=>{const t=e.filter(a=>Number.isFinite(a)).sort((a,s)=>a-s);if(!t.length)return NaN;const r=Math.floor(t.length/2);return t.length%2===1?t[r]:(t[r-1]+t[r])/2},Ts=e=>{const t=String(e||"idle").toLowerCase();return["running","completed","failed","killed"].includes(t)?t:"neutral"},Ns=e=>{const t=[],r=String(e||"").split(/\r?\n/).map(a=>a.trim()).filter(Boolean);for(const a of r){try{const s=JSON.parse(a);if(s&&typeof s=="object"){t.push(s);continue}}catch{}t.push({event:"raw",message:a})}return t},lo=(e,t)=>{const r=Array.isArray(e)?e:[],a={queued:0,running:0,completed:0,failed:0,killed:0,other:0,total:r.length};for(const l of r){const o=String(l?.status||"").toLowerCase();o in a?a[o]+=1:o==="success"?a.completed+=1:a.other+=1}const i=Ns(t?.log_tail||"").filter(l=>l&&l.event==="playground.node").slice(-360).map(l=>({status:String(l.status||"unknown"),cache_source:String(l.cache_source||"-"),duration_s:Number(l.duration_s||0),operator:String(l.operator||"-"),node_id:String(l.node_id||"")})),c=r.slice(0,36).map(l=>({id:String(l.job_id||""),status:String(l.status||"unknown"),created_at:String(l.created_at||""),started_at:String(l.started_at||""),finished_at:String(l.finished_at||""),wall_time_s:Number(l?.metrics?.wall_time_s||0),strategy:String(l?.request?.execution_strategy||"dask"),kind:String(l?.request?.job_kind||"run")}));return{generated_at:Date.now(),counts:a,jobs:c,node_events:i,active_job_id:t?.job_id?String(t.job_id):""}},ta=e=>{const a=((e?.result||{})?.execution||{}).cache_summary||{},s=String(e?.log_tail||""),i=Ns(s),c=i.filter(v=>v.event==="playground.node"),l=c.length?c:i.filter(v=>v.event!=="raw"),o=`computed ${Number(a.computed||0)} | cached(store) ${Number(a.cached_store||0)} | cached(local) ${Number(a.cached_local||0)} | failed ${Number(a.failed||0)} | events ${Number(a.events_stored||c.length)}/${Number(a.events_total||c.length)}`;return{raw:s,summaryText:o,rows:l.slice(-220).reverse()}},oo=({precomputedPrintTargets:e=[],latestGoalResults:t=[],precomputedSymbolTable:r={},latestSymbolTable:a={}})=>{const s=[],i=new Set,c=o=>{const v=`${o.kind}:${o.label}:${o.nodeId}`;i.has(v)||(i.add(v),s.push(o))};for(const o of e)o?.node_id&&c({kind:"print",label:String(o.name||"print"),nodeId:String(o.node_id)});for(const o of t)!o||o.operation!=="print"||!o.node_id||c({kind:"print",label:String(o.name||"print"),nodeId:String(o.node_id)});const l=Object.keys(r||{}).length>0?r:a;for(const[o,v]of Object.entries(l||{}))!v||typeof v!="string"||c({kind:"variable",label:String(o),nodeId:v});return s},Ps=e=>{const t=e&&typeof e=="object"?e.execution_errors:null;if(t&&typeof t=="object")return t;const r=e?.diagnostics?.execution_errors;return r&&typeof r=="object"?r:{}},uo=e=>{const t=e&&typeof e=="object"?e.execution_error_details:null;if(t&&typeof t=="object")return t;const r=e?.diagnostics?.execution_error_details;return r&&typeof r=="object"?r:{}},Rs=e=>{const t=Object.entries(e||{});return t.length?t.map(([r,a])=>`${String(r).slice(0,12)}: ${String(a)}`).join(`
`):"none"},co=(e,t)=>{const r=Object.entries(e||{});if(!r.length)return"";const a=(s,i=120)=>{const c=String(s??"");return c.length<=i?c:`${c.slice(0,i)}...`};return r.map(([s,i])=>{const c=i?.operator?String(i.operator):"unknown",l=Array.isArray(i?.args)?i.args.map(m=>a(m)).join(", "):"",o=i&&typeof i.kwargs=="object"&&i.kwargs?Object.entries(i.kwargs).map(([m,$])=>`${String(m)}=${a($)}`).join(", "):"",v=i&&typeof i.attrs=="object"&&i.attrs?a(JSON.stringify(i.attrs)):"",h=i?.kind?` kind=${String(i.kind)}`:"",w=i?.output_kind?` output=${String(i.output_kind)}`:"",g=t?.[s]?String(t[s]):"",k=o?`${c}(${l}${l?", ":""}${o})`:`${c}(${l})`,x=v&&v!=="{}"?` attrs=${v}`:"",C=g?` error=${g}`:"";return`${String(s).slice(0,12)}: ${k}${x}${h}${w}${C}`}).join(`
`)},fo=(e,t)=>{const r=String(e.node_id||t.nodeId||""),a=e.path||t.path||"",s=String(e.compute_status||e.status||"failed"),i=[`node: ${r||"-"}`,`path: ${a||"/"}`,`status: ${s}`],c=String(e.store_status||e?.diagnostics?.store_status||"missing");i.push(`store: ${c}`),e.error&&i.push(`error: ${String(e.error)}`),e.job_error&&i.push(`job_error: ${String(e.job_error)}`),e.store_error&&i.push(`store_error: ${String(e.store_error)}`);const l=e?.diagnostics;l&&typeof l=="object"&&(l.job_error&&!e.job_error&&i.push(`job_error: ${String(l.job_error)}`),l.store_error&&!e.store_error&&i.push(`store_error: ${String(l.store_error)}`));const o=Ps(e);Object.keys(o).length&&(i.push("execution_errors:"),i.push(Rs(o)));const v=co(uo(e),o);return v&&(i.push("failed_operations:"),i.push(v)),i.join(`
`)},vo=e=>{if(!e||typeof e!="object")return"value available";const t=String(e.vox_type||"value"),r=e.summary&&typeof e.summary=="object"?e.summary:{};return["integer","number","boolean"].includes(t)?`${t}: ${r.value}`:t==="string"?`string(${r.length||0}): ${r?.value||""}`:t==="ndarray"?`ndarray ${(r.shape||[]).join("x")} ${r.dtype||""}`.trim():["image2d","volume3d"].includes(t)?`${t} ${(r.size||[]).join("x")} ${r.pixel_id||""}`.trim():t==="sequence"?`sequence length=${r.length||0}`:t==="mapping"?`mapping length=${r.length||0}`:t},yn=/[A-Za-z0-9_.$+\-*/<>=!?~^%:&|]/,_o=(e,t)=>{if(!e||!Number.isInteger(t)||t<0)return"";const r=Math.max(0,Math.min(t,e.length));let a=r,s=r;for(;a>0&&yn.test(e[a-1]);)a-=1;for(;s<e.length&&yn.test(e[s]);)s+=1;return e.slice(a,s).trim().replace(/^[^A-Za-z0-9_.$+\-*/<>=!?~^%:&|]+|[^A-Za-z0-9_.$+\-*/<>=!?~^%:&|]+$/g,"")},po=(e,t)=>{if(!e||!Number.isInteger(t)||t<0)return{token:"",start:0,end:0};const r=Math.max(0,Math.min(t,e.length));let a=r,s=r;for(;a>0&&yn.test(e[a-1]);)a-=1;for(;s<e.length&&yn.test(e[s]);)s+=1;return{token:e.slice(a,s).trim().replace(/^[^A-Za-z0-9_.$+\-*/<>=!?~^%:&|]+|[^A-Za-z0-9_.$+\-*/<>=!?~^%:&|]+$/g,""),start:a,end:s}},ho=e=>e?!/[A-Za-z0-9_$]/.test(e):!1,go=(e,t)=>{const r=Math.max(0,Math.min(Number(t||0),e.length));let a=r,s=r;for(;a>0&&e[a-1]!==`
`;)a-=1;for(;s<e.length&&e[s]!==`
`;)s+=1;const i=e.slice(a,s).trim();return i?i.length<=140?i:`${i.slice(0,137)}...`:""},mo=(e,t,r)=>{const a=e.value||"",s=e.getBoundingClientRect();if(t<s.left||t>s.right||r<s.top||r>s.bottom)return null;const i=window.getComputedStyle(e),c=i.font||`${i.fontSize} ${i.fontFamily}`,l=Number.parseFloat(i.lineHeight)||Number.parseFloat(i.fontSize)*1.5,o=Number.parseFloat(i.paddingLeft)||0,v=Number.parseFloat(i.paddingTop)||0,h=document.createElement("span");h.style.position="absolute",h.style.visibility="hidden",h.style.whiteSpace="pre",h.style.font=c,h.textContent="MMMMMMMMMM",document.body.appendChild(h);const w=Math.max(1,h.getBoundingClientRect().width/10);h.remove();const g=t-s.left+e.scrollLeft-o,k=r-s.top+e.scrollTop-v,x=Math.max(0,Math.floor(k/l)),C=Math.max(0,Math.floor(g/w)),m=a.split(`
`),$=Math.min(x,Math.max(0,m.length-1));let D=0;for(let R=0;R<$;R+=1)D+=m[R].length+1;return D+=Math.min(C,m[$].length),Math.min(D,a.length)},bo=(e,t,r,a)=>{if(!e)return"";const s=[];let i=0;for(;i<e.length;){const c=e[i];if(/[A-Za-z_.$]/.test(c)){let l=i+1;for(;l<e.length&&/[A-Za-z0-9_.$]/.test(e[l]);)l+=1;const o=e.slice(i,l);if(t(o)){const v=encodeURIComponent(o);s.push(`<button type="button" class="editor-token-hit" data-token="${a(v)}" tabindex="-1" title="Inspect ${a(o)}">${r(o)}</button>`)}else s.push(r(o));i=l;continue}s.push(r(c)),i+=1}return s.join("")},yo=e=>String(e).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;"),wo=e=>String(e).replaceAll("&","&amp;").replaceAll('"',"&quot;").replaceAll("'","&#39;").replaceAll("<","&lt;").replaceAll(">","&gt;");var xo=z("<span> </span>");function Cs(e,t){Ct(t,!1);let r=ke(t,"value",8,"idle"),a=ke(t,"extraClass",8,"");Zt();var s=xo(),i=d(s);H((c,l)=>{tt(s,1,c),E(i,l)},[()=>_s((X(Ts),X(r()),X(a()),y(()=>`chip ${Ts(r())} ${a()}`.trim()))),()=>(X(r()),y(()=>String(r()||"idle").toLowerCase()))]),I(e,s),It()}var So=z("<option> </option>"),ko=z("<option> </option>"),Eo=z('<div id="programDiagnostics" class="inline-error"> </div>'),$o=z('<div id="runError" class="inline-error"> </div>'),To=z('<div class="muted"> </div>'),No=z('<div class="muted">No jobs executed yet.</div>'),Po=z('<button type="button"> </button>'),Ro=z("<span> </span>"),Co=z('<button class="btn btn-danger btn-small" type="button">Kill</button>'),Io=z('<article class="job-item"><div class="job-row"><strong> </strong> <!></div> <div class="job-row"><span> </span> <span> </span></div> <div class="job-row"><span> </span> <div class="row gap-s"><button class="btn btn-ghost btn-small" type="button">Open</button> <!></div></div></article>'),Ao=z("<option>No print labels or variables available</option>"),Mo=z("<option> </option>"),Lo=z('<div class="muted">No node events available yet. Raw log is shown below.</div>'),Fo=z('<article class="table-like-row"><div class="name"><span class="mini-chip"> </span> </div> <div class="detail"> <!></div></article>'),Oo=z('<article class="table-like-row"><div class="name"> </div> <div class="detail"> </div></article>'),jo=z(`<section id="tab-playground"><div class="grid-two"><article class="card editor-card"><div class="card-header"><h2>Interactive Playground</h2> <div class="row gap-s"><label class="inline-control" for="executionStrategy">Strategy</label> <select id="executionStrategy" class="select" disabled=""><option selected="">dask</option></select></div></div> <div id="editorShell" class="editor-shell"><textarea id="programInput" class="code-input" spellcheck="false"></textarea> <pre class="editor-token-overlay" aria-hidden="true"></pre></div> <div class="row controls"><label class="inline-control" for="programLibrarySelect">Program Library</label> <select id="programLibrarySelect" class="select"><!></select> <button id="loadProgramFileBtn" class="btn btn-ghost btn-small" type="button">Load from Library</button></div> <p id="programLibraryMeta" class="muted"> </p> <p class="muted">Variables are directly clickable in the editor. Hover changes appearance, click resolves on demand with
        priority even when no full run has been launched.</p> <div id="editorHoverPreview" class="editor-hover-preview muted"> </div> <!> <div class="row controls"><button id="runProgramBtn" class="btn btn-primary hidden" type="button">Run Program</button> <button id="killProgramBtn" class="btn btn-danger" type="button">Kill Running Job</button> <button id="clearOutputBtn" class="btn btn-ghost" type="button">Clear Output</button> <!></div> <!></article> <article class="card telemetry-card"><div class="card-header"><h2>Runtime Telemetry</h2> <button id="refreshJobsBtn" class="btn btn-ghost btn-small" type="button">Refresh</button></div> <div class="stats-grid"><div class="stat"><span class="label">Wall Time</span><strong id="metricWall"> </strong></div> <div class="stat"><span class="label">CPU Time</span><strong id="metricCpu"> </strong></div> <div class="stat"><span class="label">CPU Util.</span><strong id="metricCpuUtil"> </strong></div> <div class="stat"><span class="label">Peak Python Heap</span><strong id="metricHeapPeak"> </strong></div> <div class="stat"><span class="label">RSS Delta</span><strong id="metricRssDelta"> </strong></div> <div class="stat"><span class="label">Current Job</span><strong id="metricJobId"> </strong></div></div> <h3 class="subheading">Recent Jobs</h3> <div id="recentJobs" class="job-list"><!></div> <h3 class="subheading">Dask Queue Flux</h3> <div id="daskQueueViz" class="dask-queue-viz"></div> <h3 class="subheading">Focused Result</h3> <div class="row gap-s controls"><label class="inline-control" for="playResultSelector">Target</label> <select id="playResultSelector" class="select"><!></select></div> <p id="playResultMeta" class="muted"> </p> <div id="playResultInspector" class="result-inspector compact"></div> <h3 class="subheading">Execution Log</h3> <p id="playExecSummary" class="muted"> </p> <div id="playExecLog" class="table-like muted"><!></div> <pre id="playExecRaw" class="mono-scroll compact-log"> </pre></article></div> <div class="grid-two"><article class="card"><h2>Execution Result</h2> <pre id="executionOutput" class="mono-scroll"> </pre></article> <article class="card"><h2>Task Graph (Text)</h2> <pre id="taskGraphOutput" class="mono-scroll"> </pre></article></div></section>`);function Do(e,t){Ct(t,!1);const r=N();let a=ke(t,"active",8,!1),s=ke(t,"capabilities",24,()=>({}));const i="threshold_sweep.imgql";let l=N(`// Paste or load an example.
import "simpleitk"
x = 2 + 3
y = x * 4`),o=N([]),v=N(""),h=N(""),w=!1,g=N([]),k={},x=[],C=[],m={},$=0,D=null,R=N(""),J=N("idle"),j="",P=null,A=N([]),F=N("-"),ie=N("-"),V=N("-"),be=N("-"),Me=N("-"),Le=N("-"),ye=N(""),$e=N(""),we=N("Click inspect on a variable to resolve it on demand."),te=N([]),ne=N(-1),Te=N("No execution trace yet."),xe=N(""),ve=N([]),Fe=N(""),ze=N("Hover a variable to see cached value status, or hover an operator to inspect expression context."),L="",O="",B=0,ae=N(""),K=N(null),Se=N(),re=N(),_e=N(),gt=N(),pe=null,Ve=null,mt=null,bt=null,nt=null,Ft=null;const Wr=u=>{const p=Array.isArray(u)?u:[];return p.length?p.map(b=>{const M=b?.code?`[${b.code}] `:"",S=b?.message?String(b.message):"Static error",U=b?.symbol?` (symbol: ${b.symbol})`:"",G=b?.location?` @ ${b.location}`:"";return`${M}${S}${U}${G}`}).join(`
`):""},yt=u=>{const p=u?.metrics||{};f(F,rt(Number(p.wall_time_s))),f(ie,rt(Number(p.cpu_time_s))),f(V,$s(Number(p.cpu_utilization))),f(be,Ee(Number(p.python_heap_peak_bytes))),f(Me,Ee(Number(p.ru_maxrss_delta_bytes))),f(Le,u?.job_id?String(u.job_id).slice(0,12):"-")},at=u=>{f(J,String(u||"idle").toLowerCase())},Cr=()=>{f(R,"")},ct=()=>{mt&&(clearInterval(mt),mt=null)},Be=()=>{bt&&(clearInterval(bt),bt=null),nt=null},Ot=()=>{const u=n(te)[n(ne)];if(f(te,oo({precomputedPrintTargets:x,latestGoalResults:C,precomputedSymbolTable:k,latestSymbolTable:m})),!n(te).length){f(ne,-1);return}if(u){const p=n(te).findIndex(b=>b.kind===u.kind&&b.label===u.label&&b.nodeId===u.nodeId);f(ne,p>=0?p:0);return}f(ne,0)},Kr=()=>{if(pe||!n(_e))return;const u=window.VoxResultViewer?.ResultViewer;if(typeof u=="function"){pe=new u(n(_e),{onNavigate:p=>{const b=n(te)[n(ne)];b?.nodeId&&Ir(b.nodeId,p||"",{variable:b.kind==="variable"?b.label:""})},fetchPage:({nodeId:p,path:b,offset:M,limit:S})=>{const U=n(te)[n(ne)],G=U?.kind==="variable"?U.label:"";return Ql({program:n(l),nodeId:p||U?.nodeId||"",variable:G,path:b||"",offset:Number(M||0),limit:Number(S||64),enqueue:!0})},onStatusClick:p=>{!p||p.status!=="failed"&&p.status!=="killed"||Xr(p,{nodeId:p.node_id||"",path:p.path||""})}});return}pe={setLoading:p=>{vt(_e,n(_e).textContent=p||"Loading...")},setError:p=>{vt(_e,n(_e).textContent=p||"Viewer error")},renderRecord:p=>{vt(_e,n(_e).textContent=JSON.stringify(p||{},null,2))}}},xn=()=>{if(Ve||!n(gt))return;const u=window.VoxDaskQueueViz?.DaskQueueVisualizer;if(typeof u=="function"){Ve=new u(n(gt));return}Ve={render:p=>{const b=p?.counts||{};vt(gt,n(gt).textContent=`queue: queued ${Number(b.queued||0)} | running ${Number(b.running||0)} | completed ${Number(b.completed||0)} | failed ${Number(b.failed||0)}`)}}},Xt=()=>{xn(),Ve&&Ve.render(lo(n(A),P))},Qr=async u=>{const p=u?.result||{};f(ye,JSON.stringify(p,null,2)),f($e,p.task_graph||"(no task graph in payload)"),Array.isArray(p.goal_results)&&(C=p.goal_results),p.symbol_table&&typeof p.symbol_table=="object"&&(m=p.symbol_table);const{raw:b,summaryText:M,rows:S}=ta(u);if(f(xe,b),f(Te,M),f(ve,S),Ot(),n(te).length&&n(ne)>=0){const U=n(te)[n(ne)];await Ir(U.nodeId,"",{variable:U.kind==="variable"?U.label:""})}Xt()},ra=async()=>{if(s().playground_program_library===!1){f(o,[]),f(v,""),f(h,"Program library endpoint unavailable on this backend.");return}try{const u=await ql();if(!u.available){f(o,[]),f(v,""),f(h,u.error||"Program library unavailable.");return}if(f(o,u.files||[]),!n(o).length){f(v,""),f(h,`${u.load_dir} | 0 files`);return}if(!n(v)||!n(o).some(p=>p.path===n(v))){const p=n(o).find(b=>{const M=String(b?.path||"");return M===i||M.endsWith(`/${i}`)});f(v,p?.path||n(o)[0].path)}f(h,`${u.load_dir} | ${n(o).length} file(s)`)}catch(u){f(o,[]),f(v,""),f(h,`Unable to load library: ${u.message}`)}},Yr=async()=>{if(n(v))try{const u=await Jl(n(v));f(l,u.content||""),f(h,`${u.path} | ${Ee(Number(u.bytes||0))}`),C=[],m={},Vt(),await wt(),Cr()}catch(u){f(h,`Unable to load ${n(v)}: ${u.message}`)}},wt=async()=>{if(s().playground_symbols===!1)return;const u=$+1;if($=u,!String(n(l)||"").trim()){k={},x=[],f(g,[]),Ot(),Vt();return}try{const p=await Hl(n(l));if(u!==$)return;const b=p?.available!==!1;k=b?p.symbol_table||{}:{},x=b?p.print_targets||[]:[],f(g,p?.diagnostics||[]),Ot(),Vt()}catch(p){if(u!==$)return;k={},x=[],f(g,[{code:"E_SYMBOLS",message:`Unable to refresh symbols: ${p.message}`}]),Ot(),Vt()}},Sn=()=>{D&&clearTimeout(D),D=setTimeout(()=>{wt()},260)},Zr=({nodeId:u="",variable:p="",path:b="",enqueue:M=!0})=>Kl({program:n(l),nodeId:u,variable:p,path:b,enqueue:M}),Xr=(u,p)=>{const b=String(u.node_id||p.nodeId||""),M=u.path||p.path||"",U=String(u.compute_status||u.status||"failed").toLowerCase()==="killed"?"killed":"failed",G=fo(u,p),Pe=String(u.error||"Value inspection failed.");if(pe.renderRecord({available:!1,node_id:b,status:U,runtime_version:u.runtime_version||"runtime",updated_at:u.updated_at||new Date().toISOString(),path:M,error:Pe,log_tail:u.log_tail||"",execution_errors:Ps(u),descriptor:{vox_type:"string",format_version:"voxpod/1",summary:{value:G,length:G.length,truncated:!1},navigation:{path:M||"",pageable:!1,can_descend:!1,default_page_size:64,max_page_size:512}},diagnostics:u.diagnostics||{}}),f(we,`Unable to inspect ${b.slice(0,12)}${M?` @ ${M}`:""}: ${Pe}`),u.log_tail){const{raw:kt,summaryText:qe,rows:Et}=ta({log_tail:u.log_tail,result:{execution:{cache_summary:u?.cache_summary||u?.diagnostics?.cache_summary||{}}}});f(xe,kt),f(Te,qe),f(ve,Et);return}f(xe,""),f(Te,"No execution log available for this failure."),f(ve,[])},kn=(u,p)=>{const b=String(u.materialization||""),M=String(u.compute_status||""),S=String(u.status||""),U=String(u.node_id||p.nodeId||""),G=u.path||p.path||"",Pe=u.job_id?String(u.job_id):"",kt=u?.descriptor&&typeof u.descriptor=="object"?String(u.descriptor.vox_type||""):"",qe=u?.descriptor&&kt&&kt!=="unavailable"&&kt!=="error";if((b==="cached"||b==="computed"||S==="materialized")&&qe){Be(),pe.renderRecord(u),f(we,`Inspecting ${U.slice(0,12)}${G?` @ ${G}`:""} | ${b||"materialized"} | status=${M||"materialized"}`);return}if(b==="failed"||M==="failed"||M==="killed"||S==="failed"){Be(),Xr(u,p);return}if(b==="pending"||M==="queued"||M==="running"||M==="persisting"){pe.setLoading(`Value ${U.slice(0,12)} ${G||""} is ${M||"pending"}...`),f(we,`Waiting for ${U.slice(0,12)}${G?` @ ${G}`:""} | ${M||"pending"}${Pe?` | job ${Pe.slice(0,12)}`:""}`),bt||(nt={nodeId:U,variable:p.variable||"",path:G},bt=setInterval(async()=>{if(nt)try{const $t=await Zr({nodeId:nt.nodeId,variable:nt.variable,path:nt.path,enqueue:!1});kn($t,nt)}catch($t){pe.setError(`Polling value failed: ${$t.message}`),Be()}},900));return}Be();const qt=u.error||(b==="missing"?"Value is not materialized yet.":`Unable to inspect value (${b||M||"unknown"}).`);Xr({...u,error:qt,compute_status:M||"failed",status:u.status||"failed"},p)},Ir=async(u,p="",b={})=>{Kr(),Be();const M=String(b.variable||"");pe.setLoading(`Loading value for ${u} ...`);try{const S=await Zr({nodeId:u,variable:M,path:p,enqueue:b.enqueue!==!1});kn(S,{nodeId:u,variable:M,path:p})}catch(S){Be(),pe.setError(`Value lookup failed: ${S.message}`),f(we,`Unable to inspect ${u.slice(0,12)}: ${S.message}`)}},er=async()=>{try{const u=await Wl();f(A,u.jobs||[]),f(Fe,""),!P&&n(A).length&&(P=n(A)[0]),Xt()}catch(u){f(A,[]),f(Fe,`Failed to load jobs: ${u.message}`),Xt()}},en=async u=>{P=u||null,at(u?.status),yt(u),await Qr(u),f(R,u?.error||""),await er()},gr=async()=>{if(j)try{const u=await Ss(j);P=u||null,at(u.status),yt(u);const{raw:p,summaryText:b,rows:M}=ta(u);if(f(xe,p),f(Te,b),f(ve,M),Xt(),u.status==="running")return;ct(),await en(u)}catch(u){ct(),at("failed"),f(R,`Polling failed: ${u.message}`)}},Ar=async()=>{if(Cr(),await wt(),n(g).length){f(R,"Static diagnostics must be fixed before execution can start.");return}try{at("running"),Be(),f(ye,""),f($e,""),f(xe,""),f(ve,[]),f(Te,"Execution started. Waiting for log events..."),yt(null);const u=await Gl(n(l));j=u.job_id,f(Le,String(u.job_id||"").slice(0,12)),ct(),mt=setInterval(gr,800),await gr()}catch(u){at("failed"),f(R,u.message)}},na=()=>{f(ye,""),f($e,""),f(R,""),yt(null),f(Te,"No execution log yet."),f(xe,""),f(ve,[]),C=[],m={},P=null,Be(),f(we,"Click inspect on a variable to resolve it on demand."),Kr(),pe.renderRecord(null),Ot(),f(ne,n(te).length?0:-1),Xt()},aa=async()=>{if(j)try{const u=await ks(j);ct(),await en(u)}catch(u){f(R,`Kill failed: ${u.message}`)}},En=async u=>{if(u)try{const p=await Ss(u);j=u,P=p||null,at(p.status),yt(p),await Qr(p),p.status==="running"&&(ct(),mt=setInterval(gr,800));const b=p?.result?.execution?.errors;(p.status==="failed"||p.status==="killed")&&b&&typeof b=="object"?f(R,[p.error||"Execution failed",Rs(b)].filter(Boolean).join(`
`)):f(R,p.error||"")}catch(p){f(R,`Unable to open ${u}: ${p.message}`)}},sa=async u=>{try{await ks(u),j===u&&(ct(),at("killed")),await er()}catch(p){f(R,`Unable to kill ${u}: ${p.message}`)}},ia=async()=>{const u=Number(n(ne));if(!Number.isFinite(u)||(f(ne,u),n(ne)<0||n(ne)>=n(te).length))return;const p=n(te)[n(ne)];await Ir(p.nodeId,"",{variable:p.kind==="variable"?p.label:""})},jt=u=>k[u]||m[u]||"",$n=()=>{!n(re)||!n(Se)||(vt(re,n(re).scrollTop=n(Se).scrollTop),vt(re,n(re).scrollLeft=n(Se).scrollLeft))},tn=u=>{if(!n(re))return;const p=encodeURIComponent(String(u||""));n(re).querySelectorAll(".editor-token-hit").forEach(b=>{b instanceof HTMLElement&&(u&&b.dataset.token===p?b.classList.add("is-active"):b.classList.remove("is-active"))})},Dt=u=>{f(ze,u||"")},zt=()=>{L="",O="",tn(""),Dt("Hover a variable to see cached value status, or hover an operator to inspect expression context.")},rn=u=>{L=u||"",tn(u||"")},Vt=()=>{n(re)&&(vt(re,n(re).innerHTML=bo(String(n(l)||""),jt,yo,wo)),$n(),L&&tn(L))},la=async u=>{const p=jt(u);if(!p)return;zt();const b=n(te).findIndex(M=>M.kind==="variable"&&M.label===u);b>=0&&f(ne,b),await Ir(p,"",{variable:u})},Tn=async u=>{const p=B+1;B=p,Dt(`var ${u}: checking cache...`);try{const b=await Zr({variable:u,enqueue:!1});if(p!==B||L!==u)return;const M=String(b.materialization||"");if(b.descriptor&&(M==="cached"||M==="computed")){Dt(`var ${u}: ${vo(b.descriptor)} (${M})`);return}if(M==="pending"||b.compute_status==="running"||b.compute_status==="queued"||b.compute_status==="persisting"){Dt(`var ${u}: running (${b.compute_status}). Click to focus/inspect.`);return}Dt(`var ${u}: not materialized yet. Click to compute on demand.`)}catch{if(p!==B||L!==u)return;Dt(`var ${u}: click to compute on demand.`)}},oa=u=>{a()&&(n(K)&&(clearTimeout(n(K)),f(K,null)),f(K,setTimeout(()=>{const p=mo(n(Se),u.clientX,u.clientY);if(!Number.isInteger(p)){zt();return}const b=po(n(l)||"",p);if(!b.token){zt();return}const M=jt(b.token);if(!M&&!ho(b.token)){zt();return}if(f(ae,b.token),M){rn(b.token),O!==b.token&&(O=b.token,Tn(b.token));return}rn(""),O=b.token;const S=go(n(l)||"",b.start);Dt(S?`operator '${b.token}' in: ${S}`:`operator '${b.token}'`)},140)))},ua=async u=>{if(!u)return!1;let p=jt(u)?u:"";if(!p){await wt();const b=_o(n(l)||"",Number(n(Se)?.selectionStart||0));p=jt(u)?u:jt(b)?b:"",!p&&n(ae)&&jt(n(ae))&&(p=n(ae))}return p?(f(ae,p),await la(p),!0):!1},T=()=>{m={},C=[],Vt(),Sn(),zt()},q=()=>{if(!n(re))return;const u=S=>{S.target instanceof Element&&S.target.closest(".editor-token-hit")&&S.preventDefault()},p=S=>{const U=S.target instanceof Element?S.target.closest(".editor-token-hit"):null;if(!U)return;const G=decodeURIComponent(String(U.getAttribute("data-token")||""));G&&(f(ae,G),rn(G),O!==G&&(O=G,Tn(G)))},b=S=>{!(S.target instanceof Element&&S.target.closest(".editor-token-hit"))||S.relatedTarget instanceof Element&&S.relatedTarget.closest(".editor-token-hit")||(f(ae,""),zt())},M=async S=>{const U=S.target instanceof Element?S.target.closest(".editor-token-hit"):null;if(!U)return;S.preventDefault();const G=decodeURIComponent(String(U.getAttribute("data-token")||""));G&&(await ua(G),n(Se)?.focus({preventScroll:!0}))};return n(re).addEventListener("mousedown",u),n(re).addEventListener("mouseover",p),n(re).addEventListener("mouseout",b),n(re).addEventListener("click",M),()=>{n(re).removeEventListener("mousedown",u),n(re).removeEventListener("mouseover",p),n(re).removeEventListener("mouseout",b),n(re).removeEventListener("click",M)}},ce=async u=>{await En(u)},fe=()=>{Ft||(Ft=setInterval(()=>{a()&&(er(),wt(),gr())},15e3))},Q=()=>{Ft&&(clearInterval(Ft),Ft=null)};async function Ne(u,p=!1){f(l,String(u||"")),m={},C=[],Vt(),await wt(),p&&await Ar()}async function Ue(){await Ar()}hr(()=>{Kr(),xn(),Xt();const u=q();return Vt(),(async()=>(await ra(),!w&&n(v)&&(w=!0,await Yr()),await Promise.all([er(),wt()])))(),()=>{u?.()}}),xs(()=>{ct(),Be(),Q(),D&&clearTimeout(D),n(K)&&clearTimeout(n(K)),Ve&&typeof Ve.destroy=="function"&&Ve.destroy(),pe&&typeof pe.destroy=="function"&&pe.destroy()}),pt(()=>n(g),()=>{f(r,Wr(n(g)))}),pt(()=>X(a()),()=>{a()?(er(),wt(),fe()):Q()}),pt(()=>X(s()),()=>{s().playground_program_library===!1&&f(h,"Program library endpoint unavailable on this backend.")}),Nr();var xt={loadProgram:Ne,runCurrentProgram:Ue};Zt();var ft=jo(),dt=d(ft),tr=d(dt),rr=d(tr),nr=_(d(rr),2),ar=_(d(nr),2),Bt=d(ar);Bt.value=Bt.__value="dask";var St=_(rr,2),Ut=d(St);Rr(Ut,u=>f(Se,u),()=>n(Se));var Nn=_(Ut,2);Rr(Nn,u=>f(re,u),()=>n(re));var Pn=_(St,2),Mr=_(d(Pn),2),ca=d(Mr);{var mr=u=>{var p=So(),b=d(p);p.value=p.__value="",H(()=>E(b,(X(s()),y(()=>s().playground_program_library===!1?"unavailable":"no .imgql files found")))),I(u,p)},Rn=u=>{var p=Ze(),b=je(p);et(b,1,()=>n(o),Xe,(M,S)=>{var U=ko(),G=d(U),Pe={};H(()=>{E(G,(n(S),y(()=>n(S).path))),Pe!==(Pe=(n(S),y(()=>n(S).path)))&&(U.value=(U.__value=(n(S),y(()=>n(S).path)))??"")}),I(M,U)}),I(u,p)};oe(ca,u=>{n(o),y(()=>!n(o).length)?u(mr):u(Rn,!1)})}var As=_(Mr,2),Ms=_(Pn,2),mu=d(Ms),Ls=_(Ms,4),bu=d(Ls),Fs=_(Ls,2);{var yu=u=>{var p=Eo(),b=d(p);H(()=>E(b,n(r))),I(u,p)};oe(Fs,u=>{n(r)&&u(yu)})}var Os=_(Fs,2),js=d(Os),fa=_(js,2),Ds=_(fa,2),wu=_(Ds,2);Cs(wu,{get value(){return n(J)}});var xu=_(Os,2);{var Su=u=>{var p=$o(),b=d(p);H(()=>E(b,n(R))),I(u,p)};oe(xu,u=>{n(R)&&u(Su)})}var ku=_(tr,2),zs=d(ku),Eu=_(d(zs),2),Vs=_(zs,2),Bs=d(Vs),$u=_(d(Bs)),Tu=d($u),Us=_(Bs,2),Nu=_(d(Us)),Pu=d(Nu),qs=_(Us,2),Ru=_(d(qs)),Cu=d(Ru),Js=_(qs,2),Iu=_(d(Js)),Au=d(Iu),Hs=_(Js,2),Mu=_(d(Hs)),Lu=d(Mu),Fu=_(Hs,2),Ou=_(d(Fu)),ju=d(Ou),Gs=_(Vs,4),Du=d(Gs);{var zu=u=>{var p=To(),b=d(p);H(()=>E(b,n(Fe))),I(u,p)},Vu=u=>{var p=No();I(u,p)},Bu=u=>{var p=Ze(),b=je(p);et(b,1,()=>n(A),Xe,(M,S)=>{const U=Ce(()=>(n(S),y(()=>String(n(S).status||"unknown")))),G=Ce(()=>n(U)==="failed"||n(U)==="killed");var Pe=Io(),kt=d(Pe),qe=d(kt),Et=d(qe),qt=_(qe,2);{var $t=st=>{var Je=Po(),pa=d(Je);H(()=>{tt(Je,1,`chip ${n(U)} chip-clickable`),E(pa,n(U))}),ee("click",Je,()=>ce(n(S).job_id)),I(st,Je)},nn=st=>{var Je=Ro(),pa=d(Je);H(()=>{tt(Je,1,`chip ${n(U)}`),E(pa,n(U))}),I(st,Je)};oe(qt,st=>{n(G)?st($t):st(nn,!1)})}var Lr=_(kt,2),Fr=d(Lr),In=d(Fr),da=_(Fr,2),va=d(da),br=_(Lr,2),yr=d(br),_a=d(yr),sc=_(yr,2),ti=d(sc),ic=_(ti,2);{var lc=st=>{var Je=Co();ee("click",Je,()=>sa(n(S).job_id)),I(st,Je)};oe(ic,st=>{n(U)==="running"&&st(lc)})}H((st,Je)=>{E(Et,st),E(In,(n(S),y(()=>n(S)?.request?.execution_strategy||"dask"))),E(va,Je),E(_a,(n(S),y(()=>n(S).created_at||"-")))},[()=>(n(S),y(()=>String(n(S).job_id||"").slice(0,12))),()=>(X(rt),n(S),y(()=>rt(Number(n(S)?.metrics?.wall_time_s))))]),ee("click",ti,()=>En(n(S).job_id)),I(M,Pe)}),I(u,p)};oe(Du,u=>{n(Fe)?u(zu):(n(A),y(()=>!n(A).length)?u(Vu,1):u(Bu,!1))})}var Ws=_(Gs,4);Rr(Ws,u=>f(gt,u),()=>n(gt));var Ks=_(Ws,4),Cn=_(d(Ks),2),Uu=d(Cn);{var qu=u=>{var p=Ao();p.value=p.__value="",I(u,p)},Ju=u=>{var p=Ze(),b=je(p);et(b,1,()=>n(te),Xe,(M,S,U)=>{var G=Mo(),Pe=d(G);G.value=G.__value=U,H(()=>E(Pe,(n(S),y(()=>n(S).kind==="print"?`print: ${n(S).label}`:`var: ${n(S).label}`)))),I(M,G)}),I(u,p)};oe(Uu,u=>{n(te),y(()=>!n(te).length)?u(qu):u(Ju,!1)})}var Qs=_(Ks,2),Hu=d(Qs),Ys=_(Qs,2);Rr(Ys,u=>f(_e,u),()=>n(_e));var Zs=_(Ys,4),Gu=d(Zs),Xs=_(Zs,2),Wu=d(Xs);{var Ku=u=>{var p=Lo();I(u,p)},Qu=u=>{var p=Ze(),b=je(p);et(b,1,()=>n(ve),Xe,(M,S)=>{var U=Ze(),G=je(U);{var Pe=qe=>{var Et=Fo(),qt=d(Et),$t=d(qt),nn=d($t),Lr=_($t),Fr=_(qt,2),In=d(Fr),da=_(In);{var va=br=>{var yr=bl();H(_a=>E(yr,`| ${_a??""}`),[()=>(n(S),y(()=>String(n(S).error)))]),I(br,yr)};oe(da,br=>{n(S),y(()=>n(S).error)&&br(va)})}H((br,yr)=>{E(nn,(n(S),y(()=>n(S).status||"unknown"))),E(Lr,` ${n(S),y(()=>n(S).operator||"-")??""}`),E(In,`node=${br??""} | source=${n(S),y(()=>n(S).cache_source||"-")??""} |
                  duration=${yr??""} ms `)},[()=>(n(S),y(()=>String(n(S).node_id||"").slice(0,12))),()=>(n(S),y(()=>(Number(n(S).duration_s||0)*1e3).toFixed(2)))]),I(qe,Et)},kt=qe=>{var Et=Oo(),qt=d(Et),$t=d(qt),nn=_(qt,2),Lr=d(nn);H(Fr=>{E($t,(n(S),y(()=>n(S).event||"event"))),E(Lr,Fr)},[()=>(n(S),y(()=>n(S).message||n(S).error||JSON.stringify(n(S)).slice(0,180)))]),I(qe,Et)};oe(G,qe=>{n(S),y(()=>n(S).event==="playground.node")?qe(Pe):qe(kt,!1)})}I(M,U)}),I(u,p)};oe(Wu,u=>{n(ve),y(()=>!n(ve).length)?u(Ku):u(Qu,!1)})}var Yu=_(Xs,2),Zu=d(Yu),Xu=_(dt,2),ei=d(Xu),ec=_(d(ei),2),tc=d(ec),rc=_(ei,2),nc=_(d(rc),2),ac=d(nc);return H(()=>{tt(ft,1,`panel ${a()?"active":""}`),Mr.disabled=(n(o),y(()=>!n(o).length)),As.disabled=(n(o),y(()=>!n(o).length)),E(mu,n(h)),E(bu,n(ze)),fa.disabled=n(J)!=="running",E(Tu,n(F)),E(Pu,n(ie)),E(Cu,n(V)),E(Au,n(be)),E(Lu,n(Me)),E(ju,n(Le)),Cn.disabled=(n(te),y(()=>!n(te).length)),E(Hu,n(we)),E(Gu,n(Te)),E(Zu,n(xe)),E(tc,n(ye)),E(ac,n($e))}),ms(Ut,()=>n(l),u=>f(l,u)),ee("input",Ut,T),ee("mousemove",Ut,oa),ee("mouseleave",Ut,()=>{f(ae,""),zt(),n(K)&&(clearTimeout(n(K)),f(K,null))}),ee("scroll",Ut,$n),mn(Mr,()=>n(v),u=>f(v,u)),ee("click",As,Yr),ee("click",js,Ar),ee("click",fa,aa),ee("click",Ds,na),ee("click",Eu,er),mn(Cn,()=>n(ne),u=>f(ne,u)),ee("change",Cn,ia),I(e,ft),bs(t,"loadProgram",Ne),bs(t,"runCurrentProgram",Ue),It(xt)}var zo=z('<div class="inline-error"> </div>'),Vo=z('<div class="muted">No stored results found for current runtime.</div>'),Bo=z('<article><div class="job-row"><strong> </strong> <span> </span></div> <div class="job-row"><span> </span> <span> </span></div> <div class="job-row"><span> </span> <button class="btn btn-ghost btn-small" type="button">Inspect</button></div></article>'),Uo=z('<section id="tab-results"><div class="grid-two"><article class="card"><div class="card-header"><h2>Stored Results</h2> <button id="refreshResultsBtn" class="btn btn-ghost btn-small" type="button">Refresh</button></div> <div class="row gap-s controls"><label class="inline-control" for="resultStatusFilter">Status</label> <select id="resultStatusFilter" class="select"><option>all</option><option>materialized</option><option>failed</option></select> <input id="resultSearchInput" class="input" type="search" placeholder="Filter by node id"/></div> <p id="resultListMeta" class="muted"> </p> <!> <div id="resultList" class="job-list"><!></div></article> <article class="card"><h2>Result Inspector</h2> <p class="muted">View values only from persisted store entries. Server-side save/export is intentionally disabled.</p> <div id="resultInspector" class="result-inspector"></div></article></div></section>');function qo(e,t){Ct(t,!1);let r=ke(t,"active",8,!1),a=ke(t,"capabilities",24,()=>({})),s=N(""),i=N(""),c=N([]),l=N(""),o=N(""),v=N(""),h="",w=N(),g=null,k=null;const x=()=>{if(g)return;const L=window.VoxResultViewer?.ResultViewer;if(typeof L=="function"){g=new L(n(w),{onNavigate:O=>{n(v)&&C(n(v),O||"")},fetchPage:({nodeId:O,path:B,offset:ae,limit:K})=>Xl({nodeId:O||n(v),path:B||"",offset:Number(ae||0),limit:Number(K||64)}),onStatusClick:O=>{if(!O||O.status!=="failed"&&O.status!=="killed")return;const B=[`node: ${O.node_id||"-"}`,`path: ${O.path||"/"}`,`status: ${O.status||"failed"}`,O.error?`error: ${O.error}`:""].filter(Boolean);g.setError(B.join(`
`))}});return}g={setLoading:O=>{vt(w,n(w).textContent=O||"Loading...")},setError:O=>{vt(w,n(w).textContent=O||"Viewer error")},renderRecord:O=>{vt(w,n(w).textContent=JSON.stringify(O||{},null,2))}}},C=async(L,O="")=>{x(),f(v,L),h=O,g.setLoading(`Loading ${L}${O||""} ...`);try{const B=await Zl(L,O);g.renderRecord(B),f(o,"")}catch(B){g.setError(`Failed loading result ${L}: ${B.message}`)}},m=async()=>{if(x(),a().store_results_viewer===!1){f(c,[]),f(l,"Store results viewer unavailable on this backend."),f(o,""),g.setError("Store results endpoint unavailable.");return}try{const L=await Yl({limit:200,statusFilter:n(s),nodeFilter:n(i).trim()});if(!L.available){f(c,[]),f(l,L.error||"Store results unavailable."),g.setError(L.error||"Store results unavailable.");return}f(c,L.records||[]);const O=L.summary||{};if(f(l,`${Number(O.total||0)} total | ${Number(O.materialized||0)} materialized | ${Number(O.failed||0)} failed`),f(o,""),n(v)&&n(c).some(B=>B.node_id===n(v))){await C(n(v),h);return}n(c).length?await C(n(c)[0].node_id,""):(f(v,""),h="",g.renderRecord(null))}catch(L){f(c,[]),f(l,`Unable to load results: ${L.message}`),f(o,""),g.setError(`Unable to load result list: ${L.message}`)}},$=()=>{k&&clearTimeout(k),k=setTimeout(()=>{m()},260)},D=L=>{L.key==="Enter"&&m()};hr(()=>(x(),m(),()=>{k&&clearTimeout(k),g&&typeof g.destroy=="function"&&g.destroy()})),pt(()=>X(r()),()=>{r()&&m()}),Nr(),Zt();var R=Uo(),J=d(R),j=d(J),P=d(j),A=_(d(P),2),F=_(P,2),ie=_(d(F),2),V=d(ie);V.value=V.__value="";var be=_(V);be.value=be.__value="materialized";var Me=_(be);Me.value=Me.__value="failed";var Le=_(ie,2),ye=_(F,2),$e=d(ye),we=_(ye,2);{var te=L=>{var O=zo(),B=d(O);H(()=>E(B,n(o))),I(L,O)};oe(we,L=>{n(o)&&L(te)})}var ne=_(we,2),Te=d(ne);{var xe=L=>{var O=Vo();I(L,O)},ve=L=>{var O=Ze(),B=je(O);et(B,1,()=>n(c),Xe,(ae,K)=>{var Se=Bo(),re=d(Se),_e=d(re),gt=d(_e),pe=_(_e,2),Ve=d(pe),mt=_(re,2),bt=d(mt),nt=d(bt),Ft=_(bt,2),Wr=d(Ft),yt=_(mt,2),at=d(yt),Cr=d(at),ct=_(at,2);H((Be,Ot)=>{tt(Se,1,(n(v),n(K),y(()=>`job-item result-item ${n(v)===n(K).node_id?"active":""}`))),E(gt,Be),tt(pe,1,(n(K),y(()=>`chip ${n(K).status}`))),E(Ve,(n(K),y(()=>n(K).status))),E(nt,(n(K),y(()=>n(K).runtime_version||"-"))),E(Wr,Ot),E(Cr,(n(K),y(()=>n(K).updated_at||"-")))},[()=>(n(K),y(()=>n(K).node_id.slice(0,16))),()=>(X(Ee),n(K),y(()=>Ee(Number(n(K).payload_bytes||0))))]),ee("click",ct,()=>C(n(K).node_id,"")),I(ae,Se)}),I(L,O)};oe(Te,L=>{n(c),y(()=>!n(c).length)?L(xe):L(ve,!1)})}var Fe=_(j,2),ze=_(d(Fe),4);Rr(ze,L=>f(w,L),()=>n(w)),H(()=>{tt(R,1,`panel ${r()?"active":""}`),E($e,n(l))}),ee("click",A,m),mn(ie,()=>n(s),L=>f(s,L)),ee("change",ie,m),ms(Le,()=>n(i),L=>f(i,L)),ee("input",Le,$),ee("keydown",Le,D),I(e,R),It()}var Jo=z("<option> </option>"),Ho=z('<div class="muted"> </div>'),Go=z('<div class="muted">No examples for selected module.</div>'),Wo=z('<article class="gallery-item"><h3> </h3> <div class="gallery-meta"><span class="mini-chip"> </span> <span class="mini-chip"> </span> <span class="mini-chip"> </span></div> <p class="muted"> </p> <pre class="gallery-code"> </pre> <div class="row gap-s"><button class="btn btn-primary btn-small" type="button">Load</button> <button class="btn btn-ghost btn-small" type="button">Run</button></div></article>'),Ko=z('<section id="tab-gallery"><article class="card"><div class="card-header"><h2>Progressive Example Gallery</h2> <div class="row gap-s"><label class="inline-control" for="moduleFilter">Module</label> <select id="moduleFilter" class="select"></select></div></div> <p class="muted">Gallery cards are generated from markdown directives in <code>doc/user/language-gallery.md</code> using <code>&lt;!-- vox:playground ... --&gt;</code> comments.</p> <div id="galleryCards" class="gallery-grid"><!></div></article></section>');function Qo(e,t){Ct(t,!1);const r=N();let a=ke(t,"active",8,!1);const s=jl();let i=N([]),c=N(["all"]),l=N("all"),o=N("");const v=async()=>{try{const P=await eo();f(i,P.examples||[]),f(c,["all",...P.modules||[]]),n(c).includes(n(l))||f(l,"all"),f(o,"")}catch(P){f(i,[]),f(c,["all"]),f(o,`Unable to load gallery: ${P.message}`)}},h=P=>{s("load",{code:P.code,run:!1})},w=P=>{s("load",{code:P.code,run:!0})};hr(()=>{v()}),pt(()=>(n(i),n(l)),()=>{f(r,n(i).filter(P=>n(l)==="all"||P.module===n(l)))}),pt(()=>X(a()),()=>{a()&&v()}),Nr(),Zt();var g=Ko(),k=d(g),x=d(k),C=_(d(x),2),m=_(d(C),2);et(m,5,()=>n(c),Xe,(P,A)=>{var F=Jo(),ie=d(F),V={};H(()=>{E(ie,n(A)),V!==(V=n(A))&&(F.value=(F.__value=n(A))??"")}),I(P,F)});var $=_(x,4),D=d($);{var R=P=>{var A=Ho(),F=d(A);H(()=>E(F,n(o))),I(P,A)},J=P=>{var A=Go();I(P,A)},j=P=>{var A=Ze(),F=je(A);et(F,1,()=>n(r),Xe,(ie,V)=>{var be=Wo(),Me=d(be),Le=d(Me),ye=_(Me,2),$e=d(ye),we=d($e),te=_($e,2),ne=d(te),Te=_(te,2),xe=d(Te),ve=_(ye,2),Fe=d(ve),ze=_(ve,2),L=d(ze),O=_(ze,2),B=d(O),ae=_(B,2);H(()=>{E(Le,(n(V),y(()=>n(V).title))),E(we,(n(V),y(()=>n(V).module))),E(ne,(n(V),y(()=>n(V).level))),E(xe,(n(V),y(()=>n(V).strategy||"dask"))),E(Fe,(n(V),y(()=>n(V).description||""))),E(L,(n(V),y(()=>n(V).code)))}),ee("click",B,()=>h(n(V))),ee("click",ae,()=>w(n(V))),I(ie,be)}),I(P,A)};oe(D,P=>{n(o)?P(R):(n(r),y(()=>!n(r).length)?P(J,1):P(j,!1))})}H(()=>tt(g,1,`panel ${a()?"active":""}`)),mn(m,()=>n(l),P=>f(l,P)),I(e,g),It()}var Yo=z('<div class="muted"> </div>'),Zo=z('<div class="bar-row"><div class="meta"><span> </span> <strong> </strong></div> <div class="bar-bg"><div class="bar-fill"></div></div></div>');function wn(e,t){Ct(t,!1);const r=N();let a=ke(t,"items",24,()=>[]),s=ke(t,"valueField",8,"value"),i=ke(t,"labelField",8,"label"),c=ke(t,"formatter",8,g=>`${g}`),l=ke(t,"emptyMessage",8,"No data yet.");pt(()=>(X(a()),X(s())),()=>{f(r,Math.max(1,...a().map(g=>Number(g?.[s()]||0))))}),Nr(),Zt();var o=Ze(),v=je(o);{var h=g=>{var k=Yo(),x=d(k);H(()=>E(x,l())),I(g,k)},w=g=>{var k=Ze(),x=je(k);et(x,1,a,Xe,(C,m)=>{const $=Ce(()=>(n(m),X(s()),y(()=>Number(n(m)?.[s()]||0)))),D=Ce(()=>n($)/n(r)*100);var R=Zo(),J=d(R),j=d(J),P=d(j),A=_(j,2),F=d(A),ie=_(J,2),V=d(ie);H((be,Me)=>{E(P,(n(m),X(i()),y(()=>n(m)?.[i()]))),E(F,be),Rl(V,Me)},[()=>(X(c()),X(n($)),y(()=>c()(n($)))),()=>(X(n(D)),y(()=>`width: ${n(D).toFixed(2)}%`))]),I(C,R)}),I(g,k)};oe(v,g=>{X(a()),y(()=>!a().length)?g(h):g(w,!1)})}I(e,o),It()}var Xo=z('<img id="perfChart" class="perf-chart" alt="Performance comparison chart"/>'),eu=z('<img id="primitivePerfChart" class="perf-chart" alt="Primitive benchmark histogram"/>'),tu=z('<div class="muted"> </div>'),ru=z('<div class="muted"> </div>'),nu=z('<div class="muted">No test jobs started from UI yet.</div>'),au=z('<button class="btn btn-danger btn-small" type="button">Kill</button>'),su=z('<article class="job-item"><div class="job-row"><strong> </strong> <span> </span></div> <div class="job-row"><span> </span> <span> </span></div> <div class="job-row"><span> </span> <!></div></article>'),iu=z('<div class="muted">No junit report loaded.</div>'),lu=z('<article class="table-like-row"><div class="name"> </div> <div class="detail"> </div></article>'),ou=z('<div class="muted">No failures in current report.</div>'),uu=z('<article class="table-like-row"><div class="name"> </div> <div class="detail"> </div></article>'),cu=z('<section id="tab-quality"><div class="grid-two"><article class="card"><div class="card-header"><h2>Test &amp; Coverage Overview</h2> <div class="row gap-s"><button id="refreshQualityBtn" class="btn btn-ghost btn-small" type="button">Refresh</button> <!></div></div> <div class="row controls"><button id="runQuickTestsBtn" class="btn btn-ghost btn-small" type="button">Run Quick</button> <button id="runFullTestsBtn" class="btn btn-primary btn-small" type="button">Run Full</button> <button id="runPerfTestsBtn" class="btn btn-ghost btn-small" type="button">Run Perf</button> <button id="killTestRunBtn" class="btn btn-danger btn-small" type="button">Kill Test Run</button></div> <div class="stats-grid"><div class="stat"><span class="label">Total Tests</span><strong id="qTotalTests"> </strong></div> <div class="stat"><span class="label">Passed</span><strong id="qPassed"> </strong></div> <div class="stat"><span class="label">Failed</span><strong id="qFailed"> </strong></div> <div class="stat"><span class="label">Skipped</span><strong id="qSkipped"> </strong></div> <div class="stat"><span class="label">Duration</span><strong id="qDuration"> </strong></div> <div class="stat"><span class="label">Line Coverage</span><strong id="qCoverage"> </strong></div></div> <h3 class="subheading">Lowest Coverage Packages</h3> <div id="coverageBars" class="bars"><!></div></article> <article class="card"><h2>VoxLogicA-1 vs VoxLogicA-2 Performance</h2> <!> <div id="perfSummary" class="muted"> </div> <h3 class="subheading">Primitive Benchmark Histogram</h3> <!> <div id="primitivePerfBars" class="bars"><!></div></article></div> <div class="grid-two"><article class="card"><h2>Test Run Logs</h2> <pre id="testRunLog" class="mono-scroll"> </pre> <h3 class="subheading">Recent Test Jobs</h3> <div id="recentTestJobs" class="job-list"><!></div></article> <article class="card"><h2>Test Titles</h2> <div id="testTitles" class="table-like muted"><!></div></article></div> <article class="card"><h2>Failing Test Cases</h2> <div id="failedCases" class="table-like muted"><!></div></article></section>');function fu(e,t){Ct(t,!1);let r=ke(t,"active",8,!1),a=ke(t,"capabilities",24,()=>({})),s=N("idle"),i=N(!1),c="",l=N(""),o=N([]),v=N(""),h=N({}),w=N({}),g=N([]),k=N([]),x=N([]),C=N("No performance report yet."),m=N(""),$=N(""),D=N([]),R=N("No primitive benchmark report yet."),J=null,j=null;const P=T=>{f(i,!1),f(s,"unavailable"),f(l,T)},A=async()=>{try{const T=await to(),q=T?.junit||{},ce=T?.coverage||{},fe=T?.performance||{};if(f(h,q.summary||{}),f(w,ce.summary||{}),f(g,ce.lowest_modules||[]),f(k,q.failed_cases||[]),f(x,q.test_cases||[]),fe.available){const Q=Number(fe.speed_ratio||0),Ne=Number(fe.vox1_median_s||0),Ue=Number(fe.vox2_median_s||0),xt=Number(fe.vox1_cpu_median_s||0),ft=Number(fe.vox2_cpu_median_s||0),dt=Number(fe.vox1_ru_maxrss_delta_median_bytes||0),tr=Number(fe.vox2_ru_maxrss_delta_median_bytes||0);let rr="";const nr=fe.test_metrics||{};if(nr.available){const Bt=nr.tests||[];rr=` | perf tests: ${Number(nr.count||Bt.length)} | median util: ${$s(ea(Bt.map(St=>Number(St.cpu_utilization))))} | median heap: ${Ee(ea(Bt.map(St=>Number(St.python_heap_peak_bytes))))} | median rss delta: ${Ee(ea(Bt.map(St=>Number(St.ru_maxrss_delta_bytes))))}`}f(C,`vox1 median: ${rt(Ne)} (cpu ${rt(xt)}, rss ${Ee(dt)}) | vox2 median: ${rt(Ue)} (cpu ${rt(ft)}, rss ${Ee(tr)}) | ratio vox1/vox2: ${Q.toFixed(2)}x${rr}`),f(m,`/api/v1/testing/performance/chart?t=${Date.now()}`);const ar=fe.primitive_benchmarks||{};ar.available?(f(D,ar.cases||[]),f(R,""),f($,ar.svg_available?`/api/v1/testing/performance/primitive-chart?t=${Date.now()}`:"")):(f(D,[]),f(R,ar.reason||"No primitive benchmark report yet."),f($,""))}else f(C,"No performance report yet. Run `./tests/run-tests.sh` with perf tests enabled."),f(m,""),f($,""),f(D,[]),f(R,"No primitive benchmark report yet.")}catch(T){f(C,`Failed loading report: ${T.message}`)}},F=async()=>{try{const T=await ro();f(o,T.jobs||[]),f(v,"")}catch(T){f(o,[]),f(v,`Failed to load test jobs: ${T.message}`)}},ie=async()=>{if(c)try{const T=await no(c);if(f(s,T.status),f(l,T.log_tail||""),T.status==="running")return;f(i,!1),j&&(clearInterval(j),j=null),await Promise.all([A(),F()])}catch(T){f(i,!1),f(s,"failed"),f(l,`Unable to poll test job: ${T.message}`),j&&(clearInterval(j),j=null)}},V=async(T,q)=>{if(a().testing_jobs===!1){P("Testing jobs API unavailable. Restart `./voxlogica serve` from latest code.");return}try{f(i,!0),f(s,"running"),f(l,"");const ce=await ao({profile:T,includePerf:q});c=ce.job_id,f(l,ce.log_tail||""),j&&clearInterval(j),j=setInterval(ie,1200),await Promise.all([ie(),F()])}catch(ce){f(i,!1),f(s,"failed"),f(l,`Unable to start test run: ${ce.message}`)}},be=async()=>{if(c)try{const T=await Es(c);f(i,!1),f(s,T.status),f(l,T.log_tail||""),j&&(clearInterval(j),j=null),await F()}catch(T){f(l,`Unable to kill current test job: ${T.message}`)}},Me=async T=>{try{await Es(T),c===T&&(c="",f(i,!1),f(s,"killed")),await F()}catch(q){f(v,`Unable to kill ${T}: ${q.message}`)}},Le=()=>{J&&(clearInterval(J),J=null),J=setInterval(()=>{r()&&(A(),F(),ie())},15e3)},ye=async()=>{await Promise.all([A(),F()])};hr(async()=>{await ye(),Le()}),xs(()=>{J&&clearInterval(J),j&&clearInterval(j)}),pt(()=>X(r()),()=>{r()&&(ye(),Le())}),pt(()=>X(a()),()=>{a().testing_jobs===!1&&P("This backend does not expose testing jobs. Restart server from latest commit.")}),Nr(),Zt();var $e=cu(),we=d($e),te=d(we),ne=d(te),Te=_(d(ne),2),xe=d(Te),ve=_(xe,2);Cs(ve,{get value(){return n(s)}});var Fe=_(ne,2),ze=d(Fe),L=_(ze,2),O=_(L,2),B=_(O,2),ae=_(Fe,2),K=d(ae),Se=_(d(K)),re=d(Se),_e=_(K,2),gt=_(d(_e)),pe=d(gt),Ve=_(_e,2),mt=_(d(Ve)),bt=d(mt),nt=_(Ve,2),Ft=_(d(nt)),Wr=d(Ft),yt=_(nt,2),at=_(d(yt)),Cr=d(at),ct=_(yt,2),Be=_(d(ct)),Ot=d(Be),Kr=_(ae,4),xn=d(Kr);wn(xn,{get items(){return n(g)},valueField:"line_percent",labelField:"name",formatter:T=>`${Number(T).toFixed(2)}%`});var Xt=_(te,2),Qr=_(d(Xt),2);{var ra=T=>{var q=Xo();H(()=>hs(q,"src",n(m))),I(T,q)};oe(Qr,T=>{n(m)&&T(ra)})}var Yr=_(Qr,2),wt=d(Yr),Sn=_(Yr,4);{var Zr=T=>{var q=eu();H(()=>hs(q,"src",n($))),I(T,q)};oe(Sn,T=>{n($)&&T(Zr)})}var Xr=_(Sn,2),kn=d(Xr);{var Ir=T=>{wn(T,{get items(){return n(D)},valueField:"speed_ratio",labelField:"name",formatter:q=>`${Number(q).toFixed(3)}x`})},er=T=>{var q=tu(),ce=d(q);H(()=>E(ce,n(R))),I(T,q)};oe(kn,T=>{n(D),y(()=>n(D).length)?T(Ir):T(er,!1)})}var en=_(we,2),gr=d(en),Ar=_(d(gr),2),na=d(Ar),aa=_(Ar,4),En=d(aa);{var sa=T=>{var q=ru(),ce=d(q);H(()=>E(ce,n(v))),I(T,q)},ia=T=>{var q=nu();I(T,q)},jt=T=>{var q=Ze(),ce=je(q);et(ce,1,()=>n(o),Xe,(fe,Q)=>{var Ne=su(),Ue=d(Ne),xt=d(Ue),ft=d(xt),dt=_(xt,2),tr=d(dt),rr=_(Ue,2),nr=d(rr),ar=d(nr),Bt=_(nr,2),St=d(Bt),Ut=_(rr,2),Nn=d(Ut),Pn=d(Nn),Mr=_(Nn,2);{var ca=mr=>{var Rn=au();ee("click",Rn,()=>Me(n(Q).job_id)),I(mr,Rn)};oe(Mr,mr=>{n(Q),y(()=>n(Q).status==="running")&&mr(ca)})}H(mr=>{E(ft,mr),tt(dt,1,(n(Q),y(()=>`chip ${n(Q).status}`))),E(tr,(n(Q),y(()=>n(Q).status))),E(ar,(n(Q),y(()=>n(Q).profile))),E(St,(n(Q),y(()=>n(Q).include_perf?"with perf":"no perf"))),E(Pn,(n(Q),y(()=>n(Q).created_at||"-")))},[()=>(n(Q),y(()=>String(n(Q).job_id||"").slice(0,12)))]),I(fe,Ne)}),I(T,q)};oe(En,T=>{n(v)?T(sa):(n(o),y(()=>!n(o).length)?T(ia,1):T(jt,!1))})}var $n=_(gr,2),tn=_(d($n),2),Dt=d(tn);{var zt=T=>{var q=iu();I(T,q)},rn=T=>{var q=Ze(),ce=je(q);et(ce,1,()=>(n(x),y(()=>n(x).slice(0,200))),Xe,(fe,Q)=>{var Ne=lu(),Ue=d(Ne),xt=d(Ue),ft=_(Ue,2),dt=d(ft);H(tr=>{E(xt,(n(Q),y(()=>n(Q).id))),E(dt,`status=${n(Q),y(()=>n(Q).status)??""} | time=${tr??""}`)},[()=>(X(rt),n(Q),y(()=>rt(Number(n(Q).time_s||0))))]),I(fe,Ne)}),I(T,q)};oe(Dt,T=>{n(x),y(()=>!n(x).length)?T(zt):T(rn,!1)})}var Vt=_(en,2),la=_(d(Vt),2),Tn=d(la);{var oa=T=>{var q=ou();I(T,q)},ua=T=>{var q=Ze(),ce=je(q);et(ce,1,()=>n(k),Xe,(fe,Q)=>{var Ne=uu(),Ue=d(Ne),xt=d(Ue),ft=_(Ue,2),dt=d(ft);H(()=>{E(xt,(n(Q),y(()=>n(Q).id))),E(dt,(n(Q),y(()=>n(Q).message||"Failure without message")))}),I(fe,Ne)}),I(T,q)};oe(Tn,T=>{n(k),y(()=>!n(k).length)?T(oa):T(ua,!1)})}H((T,q,ce,fe,Q,Ne)=>{tt($e,1,`panel ${r()?"active":""}`),ze.disabled=(n(i),X(a()),y(()=>n(i)||a().testing_jobs===!1)),L.disabled=(n(i),X(a()),y(()=>n(i)||a().testing_jobs===!1)),O.disabled=(n(i),X(a()),y(()=>n(i)||a().testing_jobs===!1)),B.disabled=!n(i),E(re,T),E(pe,q),E(bt,ce),E(Wr,fe),E(Cr,Q),E(Ot,`${Ne??""}%`),E(wt,n(C)),E(na,n(l))},[()=>(n(h),y(()=>Number(n(h).total||0))),()=>(n(h),y(()=>Number(n(h).passed||0))),()=>(n(h),y(()=>Number(n(h).failed||0))),()=>(n(h),y(()=>Number(n(h).skipped||0))),()=>(X(rt),n(h),y(()=>rt(Number(n(h).duration_s||0)))),()=>(n(w),y(()=>Number(n(w).line_percent||0).toFixed(2)))]),ee("click",xe,ye),ee("click",ze,()=>V("quick",!1)),ee("click",L,()=>V("full",!0)),ee("click",O,()=>V("perf",!0)),ee("click",B,be),I(e,$e),It()}var du=z('<div class="inline-error"> </div>'),vu=z('<section id="tab-storage"><div class="grid-two"><article class="card"><div class="card-header"><h2>Cache Footprint</h2> <button id="refreshStorageBtn" class="btn btn-ghost btn-small" type="button">Refresh</button></div> <div class="stats-grid"><div class="stat"><span class="label">Cached Records</span> <strong id="sTotal"> </strong></div> <div class="stat"><span class="label">Materialized</span> <strong id="sMaterialized"> </strong></div> <div class="stat"><span class="label">Failed</span> <strong id="sFailed"> </strong></div> <div class="stat"><span class="label">Average Payload</span> <strong id="sAvgPayload"> </strong></div> <div class="stat"><span class="label">Total Payload</span> <strong id="sTotalPayload"> </strong></div> <div class="stat"><span class="label">Database Size</span> <strong id="sDbSize"> </strong></div></div> <p id="storageMeta" class="muted"> </p> <!></article> <article class="card"><h2>Payload Size Distribution</h2> <div id="payloadBuckets" class="bars"><!></div> <h3 class="subheading">Runtime Versions</h3> <div id="runtimeVersions" class="bars"><!></div></article></div></section>');function _u(e,t){Ct(t,!1);let r=ke(t,"active",8,!1),a=N(null),s=N(null),i=N(null),c=N(""),l=N("");const o=async()=>{try{const B=await so();if(f(a,B),!B.available){f(l,B.error||"Storage stats unavailable."),f(c,n(l)),f(s,null),f(i,null);return}f(l,""),f(s,B.summary||{}),f(i,B.disk||{}),f(c,`${B.db_path} | last update ${n(s).last_update_at||"-"}`)}catch(B){f(l,`Failed loading storage stats: ${B.message}`),f(c,n(l)),f(s,null),f(i,null)}};hr(()=>{o()}),pt(()=>X(r()),()=>{r()&&o()}),Nr(),Zt();var v=vu(),h=d(v),w=d(h),g=d(w),k=_(d(g),2),x=_(g,2),C=d(x),m=_(d(C),2),$=d(m),D=_(C,2),R=_(d(D),2),J=d(R),j=_(D,2),P=_(d(j),2),A=d(P),F=_(j,2),ie=_(d(F),2),V=d(ie),be=_(F,2),Me=_(d(be),2),Le=d(Me),ye=_(be,2),$e=_(d(ye),2),we=d($e),te=_(x,2),ne=d(te),Te=_(te,2);{var xe=B=>{var ae=du(),K=d(ae);H(()=>E(K,n(l))),I(B,ae)};oe(Te,B=>{n(l)&&B(xe)})}var ve=_(w,2),Fe=_(d(ve),2),ze=d(Fe);{let B=Ce(()=>(n(a),y(()=>n(a)?.payload_buckets||[])));wn(ze,{get items(){return n(B)},valueField:"count",labelField:"bucket",formatter:ae=>`${ae}`})}var L=_(Fe,4),O=d(L);{let B=Ce(()=>(n(a),y(()=>n(a)?.runtime_versions||[])));wn(O,{get items(){return n(B)},valueField:"count",labelField:"runtime_version",formatter:ae=>`${ae}`})}H((B,ae,K,Se,re,_e)=>{tt(v,1,`panel ${r()?"active":""}`),E($,B),E(J,ae),E(A,K),E(V,Se),E(Le,re),E(we,_e),E(ne,n(c))},[()=>(n(s),y(()=>n(s)?Number(n(s).total_records||0):"-")),()=>(n(s),y(()=>n(s)?Number(n(s).materialized_records||0):"-")),()=>(n(s),y(()=>n(s)?Number(n(s).failed_records||0):"-")),()=>(n(s),X(Ee),y(()=>n(s)?Ee(Number(n(s).avg_payload_bytes||0)):"-")),()=>(n(s),X(Ee),y(()=>n(s)?Ee(Number(n(s).total_payload_bytes||0)):"-")),()=>(n(i),X(Ee),y(()=>n(i)?Ee(Number(n(i).db_bytes||0)+Number(n(i).wal_bytes||0)):"-"))]),ee("click",k,o),I(e,v),It()}var pu=z('<button type="button"> </button>'),hu=z('<div class="background-layer"></div> <div class="shell"><header class="topbar"><div><p class="eyebrow">VoxLogicA Serve</p> <h1>VoxLogicA Studio Console</h1></div> <div class="topbar-meta"><span id="buildStamp" class="chip"> </span></div></header> <nav class="tabbar" aria-label="Main pages"></nav> <main class="content"><!> <!> <!> <!> <!></main></div>',1);function gu(e,t){Ct(t,!1);const r=[{id:"playground",label:"Playground"},{id:"results",label:"Results Explorer"},{id:"gallery",label:"Example Gallery"},{id:"quality",label:"Test Intelligence"},{id:"storage",label:"Storage Stats"}];let a=N("playground"),s=N({}),i=N("Loading..."),c=N();const l=()=>{const P=window.location.protocol==="https:"?"wss":"ws",A=new WebSocket(`${P}://${window.location.host}/livereload`);A.onmessage=F=>{F.data==="reload"&&window.location.reload()},A.onclose=()=>{setTimeout(l,2e3)}},o=async P=>{const A=String(P.detail?.code||""),F=!!P.detail?.run;f(a,"playground"),n(c)&&typeof n(c).loadProgram=="function"&&await n(c).loadProgram(A,F)};hr(async()=>{try{const[P,A]=await Promise.all([Bl(),Ul()]);f(s,P||{}),f(i,`v${A.version||"unknown"}`)}catch{f(i,"version unavailable")}l()}),Zt();var v=hu(),h=_(je(v),2),w=d(h),g=_(d(w),2),k=d(g),x=d(k),C=_(w,2);et(C,5,()=>r,Xe,(P,A)=>{var F=pu(),ie=d(F);H(V=>{tt(F,1,V),E(ie,n(A).label)},[()=>_s(`tab ${n(a)===n(A).id?"active":""}`.trim())]),ee("click",F,()=>f(a,n(A).id)),I(P,F)});var m=_(C,2),$=d(m);{let P=Ce(()=>n(a)==="playground");Rr(Do($,{get active(){return n(P)},get capabilities(){return n(s)},$$legacy:!0}),A=>f(c,A),()=>n(c))}var D=_($,2);{let P=Ce(()=>n(a)==="results");qo(D,{get active(){return n(P)},get capabilities(){return n(s)}})}var R=_(D,2);{let P=Ce(()=>n(a)==="gallery");Qo(R,{get active(){return n(P)},$$events:{load:o}})}var J=_(R,2);{let P=Ce(()=>n(a)==="quality");fu(J,{get active(){return n(P)},get capabilities(){return n(s)}})}var j=_(J,2);{let P=Ce(()=>n(a)==="storage");_u(j,{get active(){return n(P)}})}H(()=>E(x,n(i))),I(e,v),It()}const Is=document.getElementById("app");if(!(Is instanceof HTMLElement))throw new Error("Missing #app root element.");yl(gu,{target:Is})})();
