(function(){"use strict";const Ds=globalThis.process?.env?.NODE_ENV,A=Ds&&!Ds.toLowerCase().startsWith("prod");var Jr=Array.isArray,Fi=Array.prototype.indexOf,dr=Array.prototype.includes,gn=Array.from,Gt=Object.defineProperty,Kt=Object.getOwnPropertyDescriptor,zs=Object.getOwnPropertyDescriptors,ji=Object.prototype,Di=Array.prototype,Yn=Object.getPrototypeOf,Bs=Object.isExtensible;const zi=()=>{};function Bi(e){return e()}function Qn(e){for(var t=0;t<e.length;t++)e[t]()}function qs(){var e,t,r=new Promise((n,s)=>{e=n,t=s});return{promise:r,resolve:e,reject:t}}const Oe=2,Ur=4,Vr=8,Js=1<<24,At=16,gt=32,vr=64,Zn=128,it=512,Ne=1024,Ie=2048,ot=4096,Ke=8192,Lt=16384,_r=32768,Pr=65536,mn=1<<17,Us=1<<18,Mr=1<<19,Vs=1<<20,Ot=1<<25,Yt=65536,Xn=1<<21,bn=1<<22,Qt=1<<23,It=Symbol("$state"),qi=Symbol("legacy props"),Ji=Symbol(""),Hs=Symbol("proxy path"),pr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function es(e){if(A){const t=new Error(`lifecycle_outside_component
\`${e}(...)\` can only be used during component initialisation
https://svelte.dev/e/lifecycle_outside_component`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ui(){if(A){const e=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ws(){if(A){const e=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function Vi(){if(A){const e=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/derived_references_self")}function Gs(e,t,r){if(A){const n=new Error(`each_key_duplicate
${r?`Keyed each block has duplicate key \`${r}\` at indexes ${e} and ${t}`:`Keyed each block has duplicate key at indexes ${e} and ${t}`}
https://svelte.dev/e/each_key_duplicate`);throw n.name="Svelte error",n}else throw new Error("https://svelte.dev/e/each_key_duplicate")}function Hi(e,t,r){if(A){const n=new Error(`each_key_volatile
Keyed each block has key that is not idempotent â€” the key for item at index ${e} was \`${t}\` but is now \`${r}\`. Keys must be the same each time for a given item
https://svelte.dev/e/each_key_volatile`);throw n.name="Svelte error",n}else throw new Error("https://svelte.dev/e/each_key_volatile")}function Wi(e){if(A){const t=new Error(`effect_in_teardown
\`${e}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function Gi(){if(A){const e=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ki(e){if(A){const t=new Error(`effect_orphan
\`${e}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_orphan")}function Yi(){if(A){const e=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Qi(e){if(A){const t=new Error(`props_invalid_value
Cannot do \`bind:${e}={undefined}\` when \`${e}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/props_invalid_value")}function Zi(e){if(A){const t=new Error(`rune_outside_svelte
The \`${e}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function Xi(){if(A){const e=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function eo(){if(A){const e=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function to(){if(A){const e=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ro(){if(A){const e=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const no=1,so=2,Ks=4,ao=8,io=16,oo=1,lo=2,co=4,uo=8,fo=16,vo=1,_o=2,Fe=Symbol(),po=Symbol("filename"),Ys="http://www.w3.org/1999/xhtml",ho="http://www.w3.org/2000/svg",go="http://www.w3.org/1998/Math/MathML";var ts="font-weight: bold",rs="font-weight: normal";function mo(){A?console.warn("%c[svelte] select_multiple_invalid_value\n%cThe `value` property of a `<select multiple>` element should be an array, but it received a non-array value. The selection will be kept as is.\nhttps://svelte.dev/e/select_multiple_invalid_value",ts,rs):console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function ns(e){A?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${e}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,ts,rs):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function bo(){A?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",ts,rs):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Qs(e){return e===this.v}function yo(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Zs(e){return!yo(e,this.v)}let Ar=!1,wo=!1;function xo(){Ar=!0}function kt(e,t){return e.label=t,Xs(e.v,t),e}function Xs(e,t){return e?.[Hs]?.(t),e}function So(e){const t=new Error,r=ko();return r.length===0?null:(r.unshift(`
`),Gt(t,"stack",{value:r.join(`
`)}),Gt(t,"name",{value:e}),t)}function ko(){const e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const t=new Error().stack;if(Error.stackTraceLimit=e,!t)return[];const r=t.split(`
`),n=[];for(let s=0;s<r.length;s++){const i=r[s],o=i.replaceAll("\\","/");if(i.trim()!=="Error"){if(i.includes("validate_each_keys"))return[];o.includes("svelte/src/internal")||o.includes("node_modules/.vite")||n.push(i)}}return n}let ve=null;function Lr(e){ve=e}let Hr=null;function yn(e){Hr=e}let Wr=null;function ea(e){Wr=e}function Et(e,t=!1,r){ve={p:ve,i:!1,c:null,e:null,s:e,x:null,l:Ar&&!t?{s:null,u:null,$:[]}:null},A&&(ve.function=r,Wr=r)}function Tt(e){var t=ve,r=t.e;if(r!==null){t.e=null;for(var n of r)ka(n)}return e!==void 0&&(t.x=e),t.i=!0,ve=t.p,A&&(Wr=ve?.function??null),e??{}}function Gr(){return!Ar||ve!==null&&ve.l===null}let hr=[];function ta(){var e=hr;hr=[],Qn(e)}function Ft(e){if(hr.length===0&&!Kr){var t=hr;queueMicrotask(()=>{t===hr&&ta()})}hr.push(e)}function Eo(){for(;hr.length>0;)ta()}const ss=new WeakMap;function ra(e){var t=se;if(t===null)return ie.f|=Qt,e;if(A&&e instanceof Error&&!ss.has(e)&&ss.set(e,To(e,t)),(t.f&_r)===0&&(t.f&Ur)===0)throw A&&!t.parent&&e instanceof Error&&na(e),e;Zt(e,t)}function Zt(e,t){for(;t!==null;){if((t.f&Zn)!==0){if((t.f&_r)===0)throw e;try{t.b.error(e);return}catch(r){e=r}}t=t.parent}throw A&&e instanceof Error&&na(e),e}function To(e,t){const r=Kt(e,"message");if(!(r&&!r.configurable)){for(var n=fs?"  ":"	",s=`
${n}in ${t.fn?.name||"<unknown>"}`,i=t.ctx;i!==null;)s+=`
${n}in ${i.function?.[po].split("/").pop()}`,i=i.p;return{message:e.message+`
${s}
`,stack:e.stack?.split(`
`).filter(o=>!o.includes("svelte/src/internal")).join(`
`)}}}function na(e){const t=ss.get(e);t&&(Gt(e,"message",{value:t.message}),Gt(e,"stack",{value:t.stack}))}const $o=-7169;function ye(e,t){e.f=e.f&$o|t}function as(e){(e.f&it)!==0||e.deps===null?ye(e,Ne):ye(e,ot)}function sa(e){if(e!==null)for(const t of e)(t.f&Oe)===0||(t.f&Yt)===0||(t.f^=Yt,sa(t.deps))}function aa(e,t,r){(e.f&Ie)!==0?t.add(e):(e.f&ot)!==0&&r.add(e),sa(e.deps),ye(e,Ne)}const wn=new Set;let ue=null,xn=null,mt=null,Je=[],Sn=null,is=!1,Kr=!1;class Xt{current=new Map;previous=new Map;#t=new Set;#o=new Set;#e=0;#i=0;#n=null;#a=new Set;#r=new Set;#s=new Map;is_fork=!1;#l=!1;#u(){return this.is_fork||this.#i>0}skip_effect(t){this.#s.has(t)||this.#s.set(t,{d:[],m:[]})}unskip_effect(t){var r=this.#s.get(t);if(r){this.#s.delete(t);for(var n of r.d)ye(n,Ie),bt(n);for(n of r.m)ye(n,ot),bt(n)}}process(t){Je=[],this.apply();var r=[],n=[];for(const s of t)this.#c(s,r,n);if(this.#u()){this.#d(n),this.#d(r);for(const[s,i]of this.#s)ua(s,i)}else{for(const s of this.#t)s();this.#t.clear(),this.#e===0&&this.#v(),xn=this,ue=null,oa(n),oa(r),this.#a.clear(),this.#r.clear(),xn=null,this.#n?.resolve()}mt=null}#c(t,r,n){t.f^=Ne;for(var s=t.first;s!==null;){var i=s.f,o=(i&(gt|vr))!==0,l=o&&(i&Ne)!==0,u=l||(i&Ke)!==0||this.#s.has(s);if(!u&&s.fn!==null){o?s.f^=Ne:(i&Ur)!==0?r.push(s):jr(s)&&((i&At)!==0&&this.#r.add(s),kr(s));var p=s.first;if(p!==null){s=p;continue}}for(;s!==null;){var h=s.next;if(h!==null){s=h;break}s=s.parent}}}#d(t){for(var r=0;r<t.length;r+=1)aa(t[r],this.#a,this.#r)}capture(t,r){r!==Fe&&!this.previous.has(t)&&this.previous.set(t,r),(t.f&Qt)===0&&(this.current.set(t,t.v),mt?.set(t,t.v))}activate(){ue=this,this.apply()}deactivate(){ue===this&&(ue=null,mt=null)}flush(){if(this.activate(),Je.length>0){if(ia(),ue!==null&&ue!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#o)t(this);this.#o.clear()}#v(){if(wn.size>1){this.previous.clear();var t=mt,r=!0;for(const s of wn){if(s===this){r=!1;continue}const i=[];for(const[l,u]of this.current){if(s.current.has(l))if(r&&u!==s.current.get(l))s.current.set(l,u);else continue;i.push(l)}if(i.length===0)continue;const o=[...s.current.keys()].filter(l=>!this.current.has(l));if(o.length>0){var n=Je;Je=[];const l=new Set,u=new Map;for(const p of i)la(p,o,l,u);if(Je.length>0){ue=s,s.apply();for(const p of Je)s.#c(p,[],[]);s.deactivate()}Je=n}}ue=null,mt=t}this.#s.clear(),wn.delete(this)}increment(t){this.#e+=1,t&&(this.#i+=1)}decrement(t){this.#e-=1,t&&(this.#i-=1),!this.#l&&(this.#l=!0,Ft(()=>{this.#l=!1,this.#u()?Je.length>0&&this.flush():this.revive()}))}revive(){for(const t of this.#a)this.#r.delete(t),ye(t,Ie),bt(t);for(const t of this.#r)ye(t,ot),bt(t);this.flush()}oncommit(t){this.#t.add(t)}ondiscard(t){this.#o.add(t)}settled(){return(this.#n??=qs()).promise}static ensure(){if(ue===null){const t=ue=new Xt;wn.add(ue),Kr||Ft(()=>{ue===t&&t.flush()})}return ue}apply(){}}function No(e){var t=Kr;Kr=!0;try{for(var r;;){if(Eo(),Je.length===0&&(ue?.flush(),Je.length===0))return Sn=null,r;ia()}}finally{Kr=t}}function ia(){is=!0;var e=A?new Set:null;try{for(var t=0;Je.length>0;){var r=Xt.ensure();if(t++>1e3){if(A){var n=new Map;for(const i of r.current.keys())for(const[o,l]of i.updated??[]){var s=n.get(o);s||(s={error:l.error,count:0},n.set(o,s)),s.count+=l.count}for(const i of n.values())i.error&&console.error(i.error)}Co()}if(r.process(Je),er.clear(),A)for(const i of r.current.keys())e.add(i)}}finally{if(Je=[],is=!1,Sn=null,A)for(const i of e)i.updated=null}}function Co(){try{Yi()}catch(e){A&&Gt(e,"stack",{value:""}),Zt(e,Sn)}}let jt=null;function oa(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(Lt|Ke))===0&&jr(n)&&(jt=new Set,kr(n),n.deps===null&&n.first===null&&n.nodes===null&&n.teardown===null&&n.ac===null&&Na(n),jt?.size>0)){er.clear();for(const s of jt){if((s.f&(Lt|Ke))!==0)continue;const i=[s];let o=s.parent;for(;o!==null;)jt.has(o)&&(jt.delete(o),i.push(o)),o=o.parent;for(let l=i.length-1;l>=0;l--){const u=i[l];(u.f&(Lt|Ke))===0&&kr(u)}}jt.clear()}}jt=null}}function la(e,t,r,n){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const s of e.reactions){const i=s.f;(i&Oe)!==0?la(s,t,r,n):(i&(bn|At))!==0&&(i&Ie)===0&&ca(s,t,n)&&(ye(s,Ie),bt(s))}}function ca(e,t,r){const n=r.get(e);if(n!==void 0)return n;if(e.deps!==null)for(const s of e.deps){if(dr.call(t,s))return!0;if((s.f&Oe)!==0&&ca(s,t,r))return r.set(s,!0),!0}return r.set(e,!1),!1}function bt(e){var t=Sn=e,r=t.b;if(r?.is_pending&&(e.f&(Ur|Vr|Js))!==0&&(e.f&_r)===0){r.defer_effect(e);return}for(;t.parent!==null;){t=t.parent;var n=t.f;if(is&&t===se&&(n&At)!==0&&(n&Us)===0&&(n&_r)!==0)return;if((n&(vr|gt))!==0){if((n&Ne)===0)return;t.f^=Ne}}Je.push(t)}function ua(e,t){if(!((e.f&gt)!==0&&(e.f&Ne)!==0)){(e.f&Ie)!==0?t.d.push(e):(e.f&ot)!==0&&t.m.push(e),ye(e,Ne);for(var r=e.first;r!==null;)ua(r,t),r=r.next}}function Ro(e){let t=0,r=gr(0),n;return A&&kt(r,"createSubscriber version"),()=>{ds()&&(a(r),Xr(()=>(t===0&&(n=S(()=>e(()=>Yr(r)))),t+=1,()=>{Ft(()=>{t-=1,t===0&&(n?.(),n=void 0,Yr(r))})})))}}var Po=Pr|Mr;function Mo(e,t,r,n){new Ao(e,t,r,n)}class Ao{parent;is_pending=!1;transform_error;#t;#o=null;#e;#i;#n;#a=null;#r=null;#s=null;#l=null;#u=0;#c=0;#d=!1;#v=new Set;#_=new Set;#f=null;#b=Ro(()=>(this.#f=gr(this.#u),A&&kt(this.#f,"$effect.pending()"),()=>{this.#f=null}));constructor(t,r,n,s){this.#t=t,this.#e=r,this.#i=i=>{var o=se;o.b=this,o.f|=Zn,n(i)},this.parent=se.b,this.transform_error=s??this.parent?.transform_error??(i=>i),this.#n=_s(()=>{this.#g()},Po)}#y(){try{this.#a=lt(()=>this.#i(this.#t))}catch(t){this.error(t)}}#w(t){const r=this.#e.failed;r&&(this.#s=lt(()=>{r(this.#t,()=>t,()=>()=>{})}))}#x(){const t=this.#e.pending;t&&(this.is_pending=!0,this.#r=lt(()=>t(this.#t)),Ft(()=>{var r=this.#l=document.createDocumentFragment(),n=Dt();r.append(n),this.#a=this.#h(()=>(Xt.ensure(),lt(()=>this.#i(n)))),this.#c===0&&(this.#t.before(r),this.#l=null,wr(this.#r,()=>{this.#r=null}),this.#p())}))}#g(){try{if(this.is_pending=this.has_pending_snippet(),this.#c=0,this.#u=0,this.#a=lt(()=>{this.#i(this.#t)}),this.#c>0){var t=this.#l=document.createDocumentFragment();Pa(this.#a,t);const r=this.#e.pending;this.#r=lt(()=>r(this.#t))}else this.#p()}catch(r){this.error(r)}}#p(){this.is_pending=!1;for(const t of this.#v)ye(t,Ie),bt(t);for(const t of this.#_)ye(t,ot),bt(t);this.#v.clear(),this.#_.clear()}defer_effect(t){aa(t,this.#v,this.#_)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#e.pending}#h(t){var r=se,n=ie,s=ve;xt(this.#n),ct(this.#n),Lr(this.#n.ctx);try{return t()}catch(i){return ra(i),null}finally{xt(r),ct(n),Lr(s)}}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#c+=t,this.#c===0&&(this.#p(),this.#r&&wr(this.#r,()=>{this.#r=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(t){this.#m(t),this.#u+=t,!(!this.#f||this.#d)&&(this.#d=!0,Ft(()=>{this.#d=!1,this.#f&&Ir(this.#f,this.#u)}))}get_effect_pending(){return this.#b(),a(this.#f)}error(t){var r=this.#e.onerror;let n=this.#e.failed;if(!r&&!n)throw t;this.#a&&(Ve(this.#a),this.#a=null),this.#r&&(Ve(this.#r),this.#r=null),this.#s&&(Ve(this.#s),this.#s=null);var s=!1,i=!1;const o=()=>{if(s){bo();return}s=!0,i&&ro(),this.#s!==null&&wr(this.#s,()=>{this.#s=null}),this.#h(()=>{Xt.ensure(),this.#g()})},l=u=>{try{i=!0,r?.(u,o),i=!1}catch(p){Zt(p,this.#n&&this.#n.parent)}n&&(this.#s=this.#h(()=>{Xt.ensure();try{return lt(()=>{var p=se;p.b=this,p.f|=Zn,n(this.#t,()=>u,()=>o)})}catch(p){return Zt(p,this.#n.parent),null}}))};Ft(()=>{var u;try{u=this.transform_error(t)}catch(p){Zt(p,this.#n&&this.#n.parent);return}u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(l,p=>Zt(p,this.#n&&this.#n.parent)):l(u)})}}function Lo(e,t,r,n){const s=Gr()?kn:Ue;var i=e.filter(m=>!m.settled);if(r.length===0&&i.length===0){n(t.map(s));return}var o=se,l=Oo(),u=i.length===1?i[0].promise:i.length>1?Promise.all(i.map(m=>m.promise)):null;function p(m){l();try{n(m)}catch(_){(o.f&Lt)===0&&Zt(_,o)}os()}if(r.length===0){u.then(()=>p(t.map(s)));return}function h(){l(),Promise.all(r.map(m=>jo(m))).then(m=>p([...t.map(s),...m])).catch(m=>Zt(m,o))}u?u.then(h):h()}function Oo(){var e=se,t=ie,r=ve,n=ue;if(A)var s=Hr;return function(o=!0){xt(e),ct(t),Lr(r),o&&n?.activate(),A&&yn(s)}}function os(e=!0){xt(null),ct(null),Lr(null),e&&ue?.deactivate(),A&&yn(null)}function Io(){var e=se.b,t=ue,r=e.is_rendered();return e.update_pending_count(1),t.increment(r),()=>{e.update_pending_count(-1),t.decrement(r)}}const Fo=new Set;function kn(e){var t=Oe|Ie,r=ie!==null&&(ie.f&Oe)!==0?ie:null;return se!==null&&(se.f|=Mr),{ctx:ve,deps:null,effects:null,equals:Qs,f:t,fn:e,reactions:null,rv:0,v:Fe,wv:0,parent:r??se,ac:null}}function jo(e,t,r){se===null&&Ui();var s=void 0,i=gr(Fe);A&&(i.label=t);var o=!ie,l=new Map;return Xo(()=>{var u=qs();s=u.promise;try{Promise.resolve(e()).then(u.resolve,u.reject).finally(os)}catch(_){u.reject(_),os()}var p=ue;if(o){var h=Io();l.get(p)?.reject(pr),l.delete(p),l.set(p,u)}const m=(_,y=void 0)=>{if(p.activate(),y)y!==pr&&(i.f|=Qt,Ir(i,y));else{(i.f&Qt)!==0&&(i.f^=Qt),Ir(i,_);for(const[w,k]of l){if(l.delete(w),w===p)break;k.reject(pr)}}h&&h()};u.promise.then(m,_=>m(null,_||"unknown"))}),$n(()=>{for(const u of l.values())u.reject(pr)}),A&&(i.f|=bn),new Promise(u=>{function p(h){function m(){h===s?u(i):p(s)}h.then(m,m)}p(s)})}function Ue(e){const t=kn(e);return t.equals=Zs,t}function fa(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)Ve(t[r])}}let ls=[];function Do(e){for(var t=e.parent;t!==null;){if((t.f&Oe)===0)return(t.f&Lt)===0?t:null;t=t.parent}return null}function cs(e){var t,r=se;if(xt(Do(e)),A){let n=Or;_a(new Set);try{dr.call(ls,e)&&Vi(),ls.push(e),e.f&=~Yt,fa(e),t=gs(e)}finally{xt(r),_a(n),ls.pop()}}else try{e.f&=~Yt,fa(e),t=gs(e)}finally{xt(r)}return t}function da(e){var t=cs(e);if(!e.equals(t)&&(e.wv=Oa(),(!ue?.is_fork||e.deps===null)&&(e.v=t,e.deps===null))){ye(e,Ne);return}rr||(mt!==null?(ds()||ue?.is_fork)&&mt.set(e,t):as(e))}function zo(e){if(e.effects!==null)for(const t of e.effects)(t.teardown||t.ac)&&(t.teardown?.(),t.ac?.abort(pr),t.teardown=zi,t.ac=null,en(t,0),ps(t))}function va(e){if(e.effects!==null)for(const t of e.effects)t.teardown&&kr(t)}let Or=new Set;const er=new Map;function _a(e){Or=e}let us=!1;function Bo(){us=!0}function gr(e,t){var r={f:0,v:e,reactions:null,equals:Qs,rv:0,wv:0};return r}function tr(e,t){const r=gr(e);return tl(r),r}function N(e,t=!1,r=!0){const n=gr(e);return t||(n.equals=Zs),Ar&&r&&ve!==null&&ve.l!==null&&(ve.l.s??=[]).push(n),n}function yt(e,t){return f(e,S(()=>a(e))),t}function f(e,t,r=!1){ie!==null&&(!wt||(ie.f&mn)!==0)&&Gr()&&(ie.f&(Oe|At|bn|mn))!==0&&(ut===null||!dr.call(ut,e))&&to();let n=r?Fr(t):t;return A&&Xs(n,e.label),Ir(e,n)}function Ir(e,t){if(!e.equals(t)){var r=e.v;rr?er.set(e,t):er.set(e,r),e.v=t;var n=Xt.ensure();if(n.capture(e,r),A){if(se!==null){e.updated??=new Map;const s=(e.updated.get("")?.count??0)+1;if(e.updated.set("",{error:null,count:s}),s>5){const i=So("updated at");if(i!==null){let o=e.updated.get(i.stack);o||(o={error:i,count:0},e.updated.set(i.stack,o)),o.count++}}}se!==null&&(e.set_during_effect=!0)}if((e.f&Oe)!==0){const s=e;(e.f&Ie)!==0&&cs(s),as(s)}e.wv=Oa(),ha(e,Ie),Gr()&&se!==null&&(se.f&Ne)!==0&&(se.f&(gt|vr))===0&&(ft===null?rl([e]):ft.push(e)),!n.is_fork&&Or.size>0&&!us&&pa()}return t}function pa(){us=!1;for(const e of Or)(e.f&Ne)!==0&&ye(e,ot),jr(e)&&kr(e);Or.clear()}function Yr(e){f(e,e.v+1)}function ha(e,t){var r=e.reactions;if(r!==null)for(var n=Gr(),s=r.length,i=0;i<s;i++){var o=r[i],l=o.f;if(!(!n&&o===se)){if(A&&(l&mn)!==0){Or.add(o);continue}var u=(l&Ie)===0;if(u&&ye(o,t),(l&Oe)!==0){var p=o;mt?.delete(p),(l&Yt)===0&&(l&it&&(o.f|=Yt),ha(p,ot))}else u&&((l&At)!==0&&jt!==null&&jt.add(o),bt(o))}}}const qo=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function Fr(e){if(typeof e!="object"||e===null||It in e)return e;const t=Yn(e);if(t!==ji&&t!==Di)return e;var r=new Map,n=Jr(e),s=tr(0),i=Sr,o=h=>{if(Sr===i)return h();var m=ie,_=Sr;ct(null),La(i);var y=h();return ct(m),La(_),y};n&&(r.set("length",tr(e.length)),A&&(e=Vo(e)));var l="";let u=!1;function p(h){if(!u){u=!0,l=h,kt(s,`${l} version`);for(const[m,_]of r)kt(_,mr(l,m));u=!1}}return new Proxy(e,{defineProperty(h,m,_){(!("value"in _)||_.configurable===!1||_.enumerable===!1||_.writable===!1)&&Xi();var y=r.get(m);return y===void 0?o(()=>{var w=tr(_.value);return r.set(m,w),A&&typeof m=="string"&&kt(w,mr(l,m)),w}):f(y,_.value,!0),!0},deleteProperty(h,m){var _=r.get(m);if(_===void 0){if(m in h){const y=o(()=>tr(Fe));r.set(m,y),Yr(s),A&&kt(y,mr(l,m))}}else f(_,Fe),Yr(s);return!0},get(h,m,_){if(m===It)return e;if(A&&m===Hs)return p;var y=r.get(m),w=m in h;if(y===void 0&&(!w||Kt(h,m)?.writable)&&(y=o(()=>{var b=Fr(w?h[m]:Fe),E=tr(b);return A&&kt(E,mr(l,m)),E}),r.set(m,y)),y!==void 0){var k=a(y);return k===Fe?void 0:k}return Reflect.get(h,m,_)},getOwnPropertyDescriptor(h,m){var _=Reflect.getOwnPropertyDescriptor(h,m);if(_&&"value"in _){var y=r.get(m);y&&(_.value=a(y))}else if(_===void 0){var w=r.get(m),k=w?.v;if(w!==void 0&&k!==Fe)return{enumerable:!0,configurable:!0,value:k,writable:!0}}return _},has(h,m){if(m===It)return!0;var _=r.get(m),y=_!==void 0&&_.v!==Fe||Reflect.has(h,m);if(_!==void 0||se!==null&&(!y||Kt(h,m)?.writable)){_===void 0&&(_=o(()=>{var k=y?Fr(h[m]):Fe,b=tr(k);return A&&kt(b,mr(l,m)),b}),r.set(m,_));var w=a(_);if(w===Fe)return!1}return y},set(h,m,_,y){var w=r.get(m),k=m in h;if(n&&m==="length")for(var b=_;b<w.v;b+=1){var E=r.get(b+"");E!==void 0?f(E,Fe):b in h&&(E=o(()=>tr(Fe)),r.set(b+"",E),A&&kt(E,mr(l,b)))}if(w===void 0)(!k||Kt(h,m)?.writable)&&(w=o(()=>tr(void 0)),A&&kt(w,mr(l,m)),f(w,Fr(_)),r.set(m,w));else{k=w.v!==Fe;var q=o(()=>Fr(_));f(w,q)}var $=Reflect.getOwnPropertyDescriptor(h,m);if($?.set&&$.set.call(y,_),!k){if(n&&typeof m=="string"){var I=r.get("length"),P=Number(m);Number.isInteger(P)&&P>=I.v&&f(I,P+1)}Yr(s)}return!0},ownKeys(h){a(s);var m=Reflect.ownKeys(h).filter(w=>{var k=r.get(w);return k===void 0||k.v!==Fe});for(var[_,y]of r)y.v!==Fe&&!(_ in h)&&m.push(_);return m},setPrototypeOf(){eo()}})}function mr(e,t){return typeof t=="symbol"?`${e}[Symbol(${t.description??""})]`:qo.test(t)?`${e}.${t}`:/^\d+$/.test(t)?`${e}[${t}]`:`${e}['${t}']`}function Qr(e){try{if(e!==null&&typeof e=="object"&&It in e)return e[It]}catch{}return e}function Jo(e,t){return Object.is(Qr(e),Qr(t))}const Uo=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function Vo(e){return new Proxy(e,{get(t,r,n){var s=Reflect.get(t,r,n);return Uo.has(r)?function(...i){Bo();var o=s.apply(this,i);return pa(),o}:s}})}function Ho(){const e=Array.prototype,t=Array.__svelte_cleanup;t&&t();const{indexOf:r,lastIndexOf:n,includes:s}=e;e.indexOf=function(i,o){const l=r.call(this,i,o);if(l===-1){for(let u=o??0;u<this.length;u+=1)if(Qr(this[u])===i){ns("array.indexOf(...)");break}}return l},e.lastIndexOf=function(i,o){const l=n.call(this,i,o??this.length-1);if(l===-1){for(let u=0;u<=(o??this.length-1);u+=1)if(Qr(this[u])===i){ns("array.lastIndexOf(...)");break}}return l},e.includes=function(i,o){const l=s.call(this,i,o);if(!l){for(let u=0;u<this.length;u+=1)if(Qr(this[u])===i){ns("array.includes(...)");break}}return l},Array.__svelte_cleanup=()=>{e.indexOf=r,e.lastIndexOf=n,e.includes=s}}var En,fs,ga,ma;function Wo(){if(En===void 0){En=window,fs=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;ga=Kt(t,"firstChild").get,ma=Kt(t,"nextSibling").get,Bs(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Bs(r)&&(r.__t=void 0),A&&(e.__svelte_meta=null,Ho())}}function Dt(e=""){return document.createTextNode(e)}function br(e){return ga.call(e)}function Zr(e){return ma.call(e)}function d(e,t){return br(e)}function Ye(e,t=!1){{var r=br(e);return r instanceof Comment&&r.data===""?Zr(r):r}}function g(e,t=1,r=!1){let n=e;for(;t--;)n=Zr(n);return n}function Go(e){e.textContent=""}function ba(){return!1}function ya(e,t,r){return document.createElementNS(t??Ys,e,void 0)}let wa=!1;function Ko(){wa||(wa=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Tn(e){var t=ie,r=se;ct(null),xt(null);try{return e()}finally{ct(t),xt(r)}}function xa(e,t,r,n=r){e.addEventListener(t,()=>Tn(r));const s=e.__on_r;s?e.__on_r=()=>{s(),n(!0)}:e.__on_r=()=>n(!0),Ko()}function Sa(e){se===null&&(ie===null&&Ki(e),Gi()),rr&&Wi(e)}function Yo(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function $t(e,t,r){var n=se;if(A)for(;n!==null&&(n.f&mn)!==0;)n=n.parent;n!==null&&(n.f&Ke)!==0&&(e|=Ke);var s={ctx:ve,deps:null,nodes:null,f:e|Ie|it,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(A&&(s.component_function=Wr),r)try{kr(s)}catch(l){throw Ve(s),l}else t!==null&&bt(s);var i=s;if(r&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&Mr)===0&&(i=i.first,(e&At)!==0&&(e&Pr)!==0&&i!==null&&(i.f|=Pr)),i!==null&&(i.parent=n,n!==null&&Yo(i,n),ie!==null&&(ie.f&Oe)!==0&&(e&vr)===0)){var o=ie;(o.effects??=[]).push(i)}return s}function ds(){return ie!==null&&!wt}function $n(e){const t=$t(Vr,null,!1);return ye(t,Ne),t.teardown=e,t}function vs(e){Sa("$effect"),A&&Gt(e,"name",{value:"$effect"});var t=se.f,r=!ie&&(t&gt)!==0&&(t&_r)===0;if(r){var n=ve;(n.e??=[]).push(e)}else return ka(e)}function ka(e){return $t(Ur|Vs,e,!1)}function Qo(e){return Sa("$effect.pre"),A&&Gt(e,"name",{value:"$effect.pre"}),$t(Vr|Vs,e,!0)}function Zo(e){Xt.ensure();const t=$t(vr|Mr,e,!0);return(r={})=>new Promise(n=>{r.outro?wr(t,()=>{Ve(t),n(void 0)}):(Ve(t),n(void 0))})}function Ea(e){return $t(Ur,e,!1)}function Qe(e,t){var r=ve,n={effect:null,ran:!1,deps:e};r.l.$.push(n),n.effect=Xr(()=>{e(),!n.ran&&(n.ran=!0,S(t))})}function yr(){var e=ve;Xr(()=>{for(var t of e.l.$){t.deps();var r=t.effect;(r.f&Ne)!==0&&r.deps!==null&&ye(r,ot),jr(r)&&kr(r),t.ran=!1}})}function Xo(e){return $t(bn|Mr,e,!0)}function Xr(e,t=0){return $t(Vr|t,e,!0)}function Y(e,t=[],r=[],n=[]){Lo(n,t,r,s=>{$t(Vr,()=>e(...s.map(a)),!0)})}function _s(e,t=0){var r=$t(At|t,e,!0);return A&&(r.dev_stack=Hr),r}function lt(e){return $t(gt|Mr,e,!0)}function Ta(e){var t=e.teardown;if(t!==null){const r=rr,n=ie;Ma(!0),ct(null);try{t.call(null)}finally{Ma(r),ct(n)}}}function ps(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const s=r.ac;s!==null&&Tn(()=>{s.abort(pr)});var n=r.next;(r.f&vr)!==0?r.parent=null:Ve(r,t),r=n}}function el(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&gt)===0&&Ve(t),t=r}}function Ve(e,t=!0){var r=!1;(t||(e.f&Us)!==0)&&e.nodes!==null&&e.nodes.end!==null&&($a(e.nodes.start,e.nodes.end),r=!0),ps(e,t&&!r),en(e,0),ye(e,Lt);var n=e.nodes&&e.nodes.t;if(n!==null)for(const i of n)i.stop();Ta(e);var s=e.parent;s!==null&&s.first!==null&&Na(e),A&&(e.component_function=null),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function $a(e,t){for(;e!==null;){var r=e===t?null:Zr(e);e.remove(),e=r}}function Na(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function wr(e,t,r=!0){var n=[];Ca(e,n,!0);var s=()=>{r&&Ve(e),t&&t()},i=n.length;if(i>0){var o=()=>--i||s();for(var l of n)l.out(o)}else s()}function Ca(e,t,r){if((e.f&Ke)===0){e.f^=Ke;var n=e.nodes&&e.nodes.t;if(n!==null)for(const l of n)(l.is_global||r)&&t.push(l);for(var s=e.first;s!==null;){var i=s.next,o=(s.f&Pr)!==0||(s.f&gt)!==0&&(e.f&At)!==0;Ca(s,t,o?r:!1),s=i}}}function hs(e){Ra(e,!0)}function Ra(e,t){if((e.f&Ke)!==0){e.f^=Ke,(e.f&Ne)===0&&(ye(e,Ie),bt(e));for(var r=e.first;r!==null;){var n=r.next,s=(r.f&Pr)!==0||(r.f&gt)!==0;Ra(r,s?t:!1),r=n}var i=e.nodes&&e.nodes.t;if(i!==null)for(const o of i)(o.is_global||t)&&o.in()}}function Pa(e,t){if(e.nodes)for(var r=e.nodes.start,n=e.nodes.end;r!==null;){var s=r===n?null:Zr(r);t.append(r),r=s}}let Nn=!1,rr=!1;function Ma(e){rr=e}let ie=null,wt=!1;function ct(e){ie=e}let se=null;function xt(e){se=e}let ut=null;function tl(e){ie!==null&&(ut===null?ut=[e]:ut.push(e))}let He=null,Ze=0,ft=null;function rl(e){ft=e}let Aa=1,xr=0,Sr=xr;function La(e){Sr=e}function Oa(){return++Aa}function jr(e){var t=e.f;if((t&Ie)!==0)return!0;if(t&Oe&&(e.f&=~Yt),(t&ot)!==0){for(var r=e.deps,n=r.length,s=0;s<n;s++){var i=r[s];if(jr(i)&&da(i),i.wv>e.wv)return!0}(t&it)!==0&&mt===null&&ye(e,Ne)}return!1}function Ia(e,t,r=!0){var n=e.reactions;if(n!==null&&!(ut!==null&&dr.call(ut,e)))for(var s=0;s<n.length;s++){var i=n[s];(i.f&Oe)!==0?Ia(i,t,!1):t===i&&(r?ye(i,Ie):(i.f&Ne)!==0&&ye(i,ot),bt(i))}}function gs(e){var t=He,r=Ze,n=ft,s=ie,i=ut,o=ve,l=wt,u=Sr,p=e.f;He=null,Ze=0,ft=null,ie=(p&(gt|vr))===0?e:null,ut=null,Lr(e.ctx),wt=!1,Sr=++xr,e.ac!==null&&(Tn(()=>{e.ac.abort(pr)}),e.ac=null);try{e.f|=Xn;var h=e.fn,m=h();e.f|=_r;var _=e.deps,y=ue?.is_fork;if(He!==null){var w;if(y||en(e,Ze),_!==null&&Ze>0)for(_.length=Ze+He.length,w=0;w<He.length;w++)_[Ze+w]=He[w];else e.deps=_=He;if(ds()&&(e.f&it)!==0)for(w=Ze;w<_.length;w++)(_[w].reactions??=[]).push(e)}else!y&&_!==null&&Ze<_.length&&(en(e,Ze),_.length=Ze);if(Gr()&&ft!==null&&!wt&&_!==null&&(e.f&(Oe|ot|Ie))===0)for(w=0;w<ft.length;w++)Ia(ft[w],e);if(s!==null&&s!==e){if(xr++,s.deps!==null)for(let k=0;k<r;k+=1)s.deps[k].rv=xr;if(t!==null)for(const k of t)k.rv=xr;ft!==null&&(n===null?n=ft:n.push(...ft))}return(e.f&Qt)!==0&&(e.f^=Qt),m}catch(k){return ra(k)}finally{e.f^=Xn,He=t,Ze=r,ft=n,ie=s,ut=i,Lr(o),wt=l,Sr=u}}function nl(e,t){let r=t.reactions;if(r!==null){var n=Fi.call(r,e);if(n!==-1){var s=r.length-1;s===0?r=t.reactions=null:(r[n]=r[s],r.pop())}}if(r===null&&(t.f&Oe)!==0&&(He===null||!dr.call(He,t))){var i=t;(i.f&it)!==0&&(i.f^=it,i.f&=~Yt),as(i),zo(i),en(i,0)}}function en(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)nl(e,r[n])}function kr(e){var t=e.f;if((t&Lt)===0){ye(e,Ne);var r=se,n=Nn;if(se=e,Nn=!0,A){var s=Wr;ea(e.component_function);var i=Hr;yn(e.dev_stack??Hr)}try{(t&(At|Js))!==0?el(e):ps(e),Ta(e);var o=gs(e);e.teardown=typeof o=="function"?o:null,e.wv=Aa;var l;A&&wo&&(e.f&Ie)!==0&&e.deps}finally{Nn=n,se=r,A&&(ea(s),yn(i))}}}async function Fa(){await Promise.resolve(),No()}function a(e){var t=e.f,r=(t&Oe)!==0;if(ie!==null&&!wt){var n=se!==null&&(se.f&Lt)!==0;if(!n&&(ut===null||!dr.call(ut,e))){var s=ie.deps;if((ie.f&Xn)!==0)e.rv<xr&&(e.rv=xr,He===null&&s!==null&&s[Ze]===e?Ze++:He===null?He=[e]:He.push(e));else{(ie.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[ie]:dr.call(i,ie)||i.push(ie)}}}if(A&&Fo.delete(e),rr&&er.has(e))return er.get(e);if(r){var o=e;if(rr){var l=o.v;return((o.f&Ne)===0&&o.reactions!==null||Da(o))&&(l=cs(o)),er.set(o,l),l}var u=(o.f&it)===0&&!wt&&ie!==null&&(Nn||(ie.f&it)!==0),p=(o.f&_r)===0;jr(o)&&(u&&(o.f|=it),da(o)),u&&!p&&(va(o),ja(o))}if(mt?.has(e))return mt.get(e);if((e.f&Qt)!==0)throw e.v;return e.v}function ja(e){if(e.f|=it,e.deps!==null)for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&Oe)!==0&&(t.f&it)===0&&(va(t),ja(t))}function Da(e){if(e.v===Fe)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(er.has(t)||(t.f&Oe)!==0&&Da(t))return!0;return!1}function S(e){var t=wt;try{return wt=!0,e()}finally{wt=t}}function oe(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(It in e)ms(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&It in r&&ms(r)}}}function ms(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{ms(e[n],t)}catch{}const r=Yn(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=zs(r);for(let s in n){const i=n[s].get;if(i)try{i.call(e)}catch{}}}}}const sl=["touchstart","touchmove"];function al(e){return sl.includes(e)}const Cn=Symbol("events"),il=new Set,za=new Set;function ol(e,t,r,n={}){function s(i){if(n.capture||bs.call(t,i),!i.cancelBubble)return Tn(()=>r?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Ft(()=>{t.addEventListener(e,s,n)}):t.addEventListener(e,s,n),s}function X(e,t,r,n,s){var i={capture:n,passive:s},o=ol(e,t,r,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&$n(()=>{t.removeEventListener(e,o,i)})}let Ba=null;function bs(e){var t=this,r=t.ownerDocument,n=e.type,s=e.composedPath?.()||[],i=s[0]||e.target;Ba=e;var o=0,l=Ba===e&&e[Cn];if(l){var u=s.indexOf(l);if(u!==-1&&(t===document||t===window)){e[Cn]=t;return}var p=s.indexOf(t);if(p===-1)return;u<=p&&(o=u)}if(i=s[o]||e.target,i!==t){Gt(e,"currentTarget",{configurable:!0,get(){return i||r}});var h=ie,m=se;ct(null),xt(null);try{for(var _,y=[];i!==null;){var w=i.assignedSlot||i.parentNode||i.host||null;try{var k=i[Cn]?.[n];k!=null&&(!i.disabled||e.target===i)&&k.call(i,e)}catch(b){_?y.push(b):_=b}if(e.cancelBubble||w===t||w===null)break;i=w}if(_){for(let b of y)queueMicrotask(()=>{throw b});throw _}}finally{e[Cn]=t,delete e.currentTarget,ct(h),xt(m)}}}const ll=globalThis?.window?.trustedTypes&&globalThis.window.trustedTypes.createPolicy("svelte-trusted-html",{createHTML:e=>e});function cl(e){return ll?.createHTML(e)??e}function ul(e){var t=ya("template");return t.innerHTML=cl(e.replaceAll("<!>","<!---->")),t.content}function tn(e,t){var r=se;r.nodes===null&&(r.nodes={start:e,end:t,a:null,t:null})}function B(e,t){var r=(t&vo)!==0,n=(t&_o)!==0,s,i=!e.startsWith("<!>");return()=>{s===void 0&&(s=ul(i?e:"<!>"+e),r||(s=br(s)));var o=n||fs?document.importNode(s,!0):s.cloneNode(!0);if(r){var l=br(o),u=o.lastChild;tn(l,u)}else tn(o,o);return o}}function fl(e=""){{var t=Dt(e+"");return tn(t,t),t}}function dt(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Dt();return e.append(t,r),tn(t,r),e}function L(e,t){e!==null&&e.before(t)}function T(e,t){var r=t==null?"":typeof t=="object"?`${t}`:t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=`${r}`)}function dl(e,t){return vl(e,t)}const Rn=new Map;function vl(e,{target:t,anchor:r,props:n={},events:s,context:i,intro:o=!0,transformError:l}){Wo();var u=void 0,p=Zo(()=>{var h=r??t.appendChild(Dt());Mo(h,{pending:()=>{}},y=>{Et({});var w=ve;i&&(w.c=i),s&&(n.$$events=s),u=e(y,n)||{},Tt()},l);var m=new Set,_=y=>{for(var w=0;w<y.length;w++){var k=y[w];if(!m.has(k)){m.add(k);var b=al(k);for(const $ of[t,document]){var E=Rn.get($);E===void 0&&(E=new Map,Rn.set($,E));var q=E.get(k);q===void 0?($.addEventListener(k,bs,{passive:b}),E.set(k,1)):E.set(k,q+1)}}}};return _(gn(il)),za.add(_),()=>{for(var y of m)for(const b of[t,document]){var w=Rn.get(b),k=w.get(y);--k==0?(b.removeEventListener(y,bs),w.delete(y),w.size===0&&Rn.delete(b)):w.set(y,k)}za.delete(_),h!==r&&h.parentNode?.removeChild(h)}});return _l.set(u,p),u}let _l=new WeakMap;class pl{anchor;#t=new Map;#o=new Map;#e=new Map;#i=new Set;#n=!0;constructor(t,r=!0){this.anchor=t,this.#n=r}#a=()=>{var t=ue;if(this.#t.has(t)){var r=this.#t.get(t),n=this.#o.get(r);if(n)hs(n),this.#i.delete(r);else{var s=this.#e.get(r);s&&(this.#o.set(r,s.effect),this.#e.delete(r),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),n=s.effect)}for(const[i,o]of this.#t){if(this.#t.delete(i),i===t)break;const l=this.#e.get(o);l&&(Ve(l.effect),this.#e.delete(o))}for(const[i,o]of this.#o){if(i===r||this.#i.has(i))continue;const l=()=>{if(Array.from(this.#t.values()).includes(i)){var p=document.createDocumentFragment();Pa(o,p),p.append(Dt()),this.#e.set(i,{effect:o,fragment:p})}else Ve(o);this.#i.delete(i),this.#o.delete(i)};this.#n||!n?(this.#i.add(i),wr(o,l,!1)):l()}}};#r=t=>{this.#t.delete(t);const r=Array.from(this.#t.values());for(const[n,s]of this.#e)r.includes(n)||(Ve(s.effect),this.#e.delete(n))};ensure(t,r){var n=ue,s=ba();if(r&&!this.#o.has(t)&&!this.#e.has(t))if(s){var i=document.createDocumentFragment(),o=Dt();i.append(o),this.#e.set(t,{effect:lt(()=>r(o)),fragment:i})}else this.#o.set(t,lt(()=>r(this.anchor)));if(this.#t.set(n,t),s){for(const[l,u]of this.#o)l===t?n.unskip_effect(u):n.skip_effect(u);for(const[l,u]of this.#e)l===t?n.unskip_effect(u.effect):n.skip_effect(u.effect);n.oncommit(this.#a),n.ondiscard(this.#r)}else this.#a()}}function pe(e,t,r=!1){var n=new pl(e),s=r?Pr:0;function i(o,l){n.ensure(o,l)}_s(()=>{var o=!1;t((l,u=0)=>{o=!0,i(u,l)}),o||i(!1,null)},s)}function Xe(e,t){return t}function hl(e,t,r){for(var n=[],s=t.length,i,o=t.length,l=0;l<s;l++){let m=t[l];wr(m,()=>{if(i){if(i.pending.delete(m),i.done.add(m),i.pending.size===0){var _=e.outrogroups;ys(gn(i.done)),_.delete(i),_.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var u=n.length===0&&r!==null;if(u){var p=r,h=p.parentNode;Go(h),h.append(p),e.items.clear()}ys(t,!u)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function ys(e,t=!0){for(var r=0;r<e.length;r++)Ve(e[r],t)}var qa;function et(e,t,r,n,s,i=null){var o=e,l=new Map,u=(t&Ks)!==0;if(u){var p=e;o=p.appendChild(Dt())}var h=null,m=Ue(()=>{var E=r();return Jr(E)?E:E==null?[]:gn(E)}),_,y=!0;function w(){b.fallback=h,gl(b,_,o,t,n),h!==null&&(_.length===0?(h.f&Ot)===0?hs(h):(h.f^=Ot,nn(h,null,o)):wr(h,()=>{h=null}))}var k=_s(()=>{_=a(m);for(var E=_.length,q=new Set,$=ue,I=ba(),P=0;P<E;P+=1){var F=_[P],D=n(F,P);if(A){var U=n(F,P);D!==U&&Hi(String(P),String(D),String(U))}var K=y?null:l.get(D);K?(K.v&&Ir(K.v,F),K.i&&Ir(K.i,P),I&&$.unskip_effect(K.e)):(K=ml(l,y?o:qa??=Dt(),F,D,P,s,t,r),y||(K.e.f|=Ot),l.set(D,K)),q.add(D)}if(E===0&&i&&!h&&(y?h=lt(()=>i(o)):(h=lt(()=>i(qa??=Dt())),h.f|=Ot)),E>q.size&&(A?bl(_,n):Gs("","","")),!y)if(I){for(const[H,ge]of l)q.has(H)||$.skip_effect(ge.e);$.oncommit(w),$.ondiscard(()=>{})}else w();a(m)}),b={effect:k,items:l,outrogroups:null,fallback:h};y=!1}function rn(e){for(;e!==null&&(e.f&gt)===0;)e=e.next;return e}function gl(e,t,r,n,s){var i=(n&ao)!==0,o=t.length,l=e.items,u=rn(e.effect.first),p,h=null,m,_=[],y=[],w,k,b,E;if(i)for(E=0;E<o;E+=1)w=t[E],k=s(w,E),b=l.get(k).e,(b.f&Ot)===0&&(b.nodes?.a?.measure(),(m??=new Set).add(b));for(E=0;E<o;E+=1){if(w=t[E],k=s(w,E),b=l.get(k).e,e.outrogroups!==null)for(const H of e.outrogroups)H.pending.delete(b),H.done.delete(b);if((b.f&Ot)!==0)if(b.f^=Ot,b===u)nn(b,null,r);else{var q=h?h.next:u;b===e.effect.last&&(e.effect.last=b.prev),b.prev&&(b.prev.next=b.next),b.next&&(b.next.prev=b.prev),nr(e,h,b),nr(e,b,q),nn(b,q,r),h=b,_=[],y=[],u=rn(h.next);continue}if((b.f&Ke)!==0&&(hs(b),i&&(b.nodes?.a?.unfix(),(m??=new Set).delete(b))),b!==u){if(p!==void 0&&p.has(b)){if(_.length<y.length){var $=y[0],I;h=$.prev;var P=_[0],F=_[_.length-1];for(I=0;I<_.length;I+=1)nn(_[I],$,r);for(I=0;I<y.length;I+=1)p.delete(y[I]);nr(e,P.prev,F.next),nr(e,h,P),nr(e,F,$),u=$,h=F,E-=1,_=[],y=[]}else p.delete(b),nn(b,u,r),nr(e,b.prev,b.next),nr(e,b,h===null?e.effect.first:h.next),nr(e,h,b),h=b;continue}for(_=[],y=[];u!==null&&u!==b;)(p??=new Set).add(u),y.push(u),u=rn(u.next);if(u===null)continue}(b.f&Ot)===0&&_.push(b),h=b,u=rn(b.next)}if(e.outrogroups!==null){for(const H of e.outrogroups)H.pending.size===0&&(ys(gn(H.done)),e.outrogroups?.delete(H));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||p!==void 0){var D=[];if(p!==void 0)for(b of p)(b.f&Ke)===0&&D.push(b);for(;u!==null;)(u.f&Ke)===0&&u!==e.fallback&&D.push(u),u=rn(u.next);var U=D.length;if(U>0){var K=(n&Ks)!==0&&o===0?r:null;if(i){for(E=0;E<U;E+=1)D[E].nodes?.a?.measure();for(E=0;E<U;E+=1)D[E].nodes?.a?.fix()}hl(e,D,K)}}i&&Ft(()=>{if(m!==void 0)for(b of m)b.nodes?.a?.apply()})}function ml(e,t,r,n,s,i,o,l){var u=(o&no)!==0?(o&io)===0?N(r,!1,!1):gr(r):null,p=(o&so)!==0?gr(s):null;return A&&u&&(u.trace=()=>{l()[p?.v??s]}),{v:u,i:p,e:lt(()=>(i(t,u??r,p??s,l),()=>{e.delete(n)}))}}function nn(e,t,r){if(e.nodes)for(var n=e.nodes.start,s=e.nodes.end,i=t&&(t.f&Ot)===0?t.nodes.start:r;n!==null;){var o=Zr(n);if(i.before(n),n===s)return;n=o}}function nr(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}function bl(e,t){const r=new Map,n=e.length;for(let s=0;s<n;s++){const i=t(e[s],s);if(r.has(i)){const o=String(r.get(i)),l=String(s);let u=String(i);u.startsWith("[object ")&&(u=null),Gs(o,l,u)}r.set(i,s)}}function yl(e,t,r=!1,n=!1,s=!1){var i=e,o="";Y(()=>{var l=se;if(o!==(o=t()??"")&&(l.nodes!==null&&($a(l.nodes.start,l.nodes.end),l.nodes=null),o!=="")){var u=r?ho:n?go:void 0,p=ya(r?"svg":n?"math":"template",u);p.innerHTML=o;var h=r||n?p:p.content;if(tn(br(h),h.lastChild),r||n)for(;br(h);)i.before(br(h));else i.before(h)}})}function Ja(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=Ja(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function wl(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=Ja(e))&&(n&&(n+=" "),n+=t);return n}function Ua(e){return typeof e=="object"?wl(e):e??""}function xl(e,t,r){var n=e==null?"":""+e;return t&&(n=n?n+" "+t:t),n===""?null:n}function Sl(e,t){return e==null?null:String(e)}function tt(e,t,r,n,s,i){var o=e.__className;if(o!==r||o===void 0){var l=xl(r,n);l==null?e.removeAttribute("class"):e.className=l,e.__className=r}return i}function Va(e,t,r,n){var s=e.__style;if(s!==t){var i=Sl(t);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}return n}function Ha(e,t,r=!1){if(e.multiple){if(t==null)return;if(!Jr(t))return mo();for(var n of e.options)n.selected=t.includes(sn(n));return}for(n of e.options){var s=sn(n);if(Jo(s,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function kl(e){var t=new MutationObserver(()=>{Ha(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),$n(()=>{t.disconnect()})}function Pn(e,t,r=t){var n=new WeakSet,s=!0;xa(e,"change",i=>{var o=i?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(o),sn);else{var u=e.querySelector(o)??e.querySelector("option:not([disabled])");l=u&&sn(u)}r(l),ue!==null&&n.add(ue)}),Ea(()=>{var i=t();if(e===document.activeElement){var o=xn??ue;if(n.has(o))return}if(Ha(e,i,s),s&&i===void 0){var l=e.querySelector(":checked");l!==null&&(i=sn(l),r(i))}e.__value=i,s=!1}),kl(e)}function sn(e){return"__value"in e?e.__value:e.value}const El=Symbol("is custom element"),Tl=Symbol("is html");function an(e,t,r,n){var s=$l(e);s[t]!==(s[t]=r)&&(t==="loading"&&(e[Ji]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Nl(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function $l(e){return e.__attributes??={[El]:e.nodeName.includes("-"),[Tl]:e.namespaceURI===Ys}}var Wa=new Map;function Nl(e){var t=e.getAttribute("is")||e.nodeName,r=Wa.get(t);if(r)return r;Wa.set(t,r=[]);for(var n,s=e,i=Element.prototype;i!==s;){n=zs(s);for(var o in n)n[o].set&&r.push(o);s=Yn(s)}return r}function Ga(e,t,r=t){var n=new WeakSet;xa(e,"input",async s=>{A&&e.type==="checkbox"&&Ws();var i=s?e.defaultValue:e.value;if(i=ws(e)?xs(i):i,r(i),ue!==null&&n.add(ue),await Fa(),i!==(i=t())){var o=e.selectionStart,l=e.selectionEnd,u=e.value.length;if(e.value=i??"",l!==null){var p=e.value.length;o===l&&l===u&&p>u?(e.selectionStart=p,e.selectionEnd=p):(e.selectionStart=o,e.selectionEnd=Math.min(l,p))}}}),S(t)==null&&e.value&&(r(ws(e)?xs(e.value):e.value),ue!==null&&n.add(ue)),Xr(()=>{A&&e.type==="checkbox"&&Ws();var s=t();if(e===document.activeElement){var i=xn??ue;if(n.has(i))return}ws(e)&&s===xs(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function ws(e){var t=e.type;return t==="number"||t==="range"}function xs(e){return e===""?null:+e}function Ka(e,t,r){var n=Kt(e,t);n&&n.set&&(e[t]=r,$n(()=>{e[t]=null}))}function Ya(e,t){return e===t||e?.[It]===t}function Dr(e={},t,r,n){return Ea(()=>{var s,i;return Xr(()=>{s=i,i=[],S(()=>{e!==r(...i)&&(t(e,...i),s&&Ya(r(...s),e)&&t(null,...s))})}),()=>{Ft(()=>{i&&Ya(r(...i),e)&&t(null,...i)})}}),e}function Cl(e){return function(...t){var r=t[0];return r.preventDefault(),e?.apply(this,t)}}function zt(e=!1){const t=ve,r=t.l.u;if(!r)return;let n=()=>oe(t.s);if(e){let s=0,i={};const o=kn(()=>{let l=!1;const u=t.s;for(const p in u)u[p]!==i[p]&&(i[p]=u[p],l=!0);return l&&s++,s});n=()=>a(o)}r.b.length&&Qo(()=>{Qa(t,n),Qn(r.b)}),vs(()=>{const s=S(()=>r.m.map(Bi));return()=>{for(const i of s)typeof i=="function"&&i()}}),r.a.length&&vs(()=>{Qa(t,n),Qn(r.a)})}function Qa(e,t){if(e.l.s)for(const r of e.l.s)a(r);t()}function Rl(e,t){var r=e.$$events?.[t.type],n=Jr(r)?r.slice():r==null?[]:[r];for(var s of n)s.call(this,t)}let Mn=!1;function Pl(e){var t=Mn;try{return Mn=!1,[e(),Mn]}finally{Mn=t}}function he(e,t,r,n){var s=!Ar||(r&lo)!==0,i=(r&uo)!==0,o=(r&fo)!==0,l=n,u=!0,p=()=>(u&&(u=!1,l=o?S(n):n),l),h;if(i){var m=It in e||qi in e;h=Kt(e,t)?.set??(m&&t in e?$=>e[t]=$:void 0)}var _,y=!1;i?[_,y]=Pl(()=>e[t]):_=e[t],_===void 0&&n!==void 0&&(_=p(),h&&(s&&Qi(t),h(_)));var w;if(s?w=()=>{var $=e[t];return $===void 0?p():(u=!0,$)}:w=()=>{var $=e[t];return $!==void 0&&(l=void 0),$===void 0?l:$},s&&(r&co)===0)return w;if(h){var k=e.$$legacy;return(function($,I){return arguments.length>0?((!s||!I||k||y)&&h(I?w():$),$):w()})}var b=!1,E=((r&oo)!==0?kn:Ue)(()=>(b=!1,w()));A&&(E.label=t),i&&a(E);var q=se;return(function($,I){if(arguments.length>0){const P=I?a(E):s&&i?Fr($):$;return f(E,P),b=!0,l!==void 0&&(l=P),$}return rr&&b||(q.f&Lt)!==0?E.v:a(E)})}if(A){let e=function(t){if(!(t in globalThis)){let r;Object.defineProperty(globalThis,t,{configurable:!0,get:()=>{if(r!==void 0)return r;Zi(t)},set:n=>{r=n}})}};e("$state"),e("$effect"),e("$derived"),e("$inspect"),e("$props"),e("$bindable")}function Er(e){ve===null&&es("onMount"),Ar&&ve.l!==null?Al(ve).m.push(e):vs(()=>{const t=S(e);if(typeof t=="function")return t})}function Ss(e){ve===null&&es("onDestroy"),Er(()=>()=>S(e))}function Ml(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}function Za(){const e=ve;return e===null&&es("createEventDispatcher"),(t,r,n)=>{const s=e.s.$$events?.[t];if(s){const i=Jr(s)?s.slice():[s],o=Ml(t,r,n);for(const l of i)l.call(e.x,o);return!o.defaultPrevented}return!0}}function Al(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const Ll="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Ll),xo();const Ol=(e,t,r)=>r&&typeof r=="object"?typeof r.message=="string"?r.message:typeof r.code=="string"?r.code:JSON.stringify(r):typeof r=="string"&&r.trim()?r:`${e} ${t}`,we=async(e,t={})=>{const r=await fetch(e,t),n=await r.text(),s=n?JSON.parse(n):{};if(!r.ok)throw new Error(Ol(r.status,r.statusText,s?.detail));return s},Il=()=>we("/api/v1/capabilities"),Fl=()=>we("/api/v1/version"),jl=(e=[])=>we("/api/v1/log/client",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:Array.isArray(e)?e:[]})}),Dl=()=>we("/api/v1/playground/files"),zl=e=>we(`/api/v1/playground/files/${tc(e)}`),Bl=e=>we("/api/v1/playground/symbols",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({program:e})}),ql=e=>we("/api/v1/playground/jobs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({program:e,execute:!0,execution_strategy:"dask"})}),Jl=()=>we("/api/v1/playground/jobs"),Xa=e=>we(`/api/v1/playground/jobs/${encodeURIComponent(e)}`),ei=e=>we(`/api/v1/playground/jobs/${encodeURIComponent(e)}`,{method:"DELETE"}),Ul=({program:e,nodeId:t="",variable:r="",path:n="",enqueue:s=!0})=>{const i={program:e,execution_strategy:"dask",variable:r,path:n,enqueue:s};return!r&&t&&(i.node_id=t),we("/api/v1/playground/value",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})},Vl=({program:e,nodeId:t="",variable:r="",path:n="",offset:s=0,limit:i=64,enqueue:o=!0})=>{const l={program:e,execution_strategy:"dask",variable:r,path:n,offset:Math.max(0,Number(s||0)),limit:Math.max(1,Number(i||64)),enqueue:o};return!r&&t&&(l.node_id=t),we("/api/v1/playground/value/page",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})},Hl=({limit:e=200,statusFilter:t="",nodeFilter:r=""}={})=>{const n=new URLSearchParams;return n.set("limit",`${e}`),t&&n.set("status_filter",t),r&&n.set("node_filter",r),we(`/api/v1/results/store?${n.toString()}`)},Wl=(e,t="")=>{const r=t?`?path=${encodeURIComponent(t)}`:"";return we(`/api/v1/results/store/${encodeURIComponent(e)}${r}`)},Gl=({nodeId:e,path:t="",offset:r=0,limit:n=64})=>{const s=new URLSearchParams;return t&&s.set("path",t),s.set("offset",`${Math.max(0,Number(r||0))}`),s.set("limit",`${Math.max(1,Number(n||64))}`),we(`/api/v1/results/store/${encodeURIComponent(e)}/page?${s.toString()}`)},Kl=()=>we("/api/v1/docs/gallery"),Yl=()=>we("/api/v1/testing/report"),Ql=()=>we("/api/v1/testing/jobs"),Zl=e=>we(`/api/v1/testing/jobs/${encodeURIComponent(e)}`),Xl=({profile:e,includePerf:t})=>we("/api/v1/testing/jobs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:e,include_perf:t})}),ti=e=>we(`/api/v1/testing/jobs/${encodeURIComponent(e)}`,{method:"DELETE"}),ec=()=>we("/api/v1/storage/stats"),tc=e=>String(e||"").split("/").map(t=>encodeURIComponent(t)).join("/"),vt=e=>Number.isFinite(e)?e<.001?`${(e*1e3).toFixed(2)} ms`:`${e.toFixed(3)} s`:"-",ri=e=>Number.isFinite(e)?`${(e*100).toFixed(1)}%`:"-",ze=e=>{if(!Number.isFinite(e)||e<0)return"-";const t=["B","KB","MB","GB","TB"];let r=e,n=0;for(;r>=1024&&n<t.length-1;)r/=1024,n+=1;return`${r.toFixed(n===0?0:2)} ${t[n]}`},ks=e=>{const t=e.filter(n=>Number.isFinite(n)).sort((n,s)=>n-s);if(!t.length)return NaN;const r=Math.floor(t.length/2);return t.length%2===1?t[r]:(t[r-1]+t[r])/2},ni=e=>{const t=String(e||"idle").toLowerCase();return["running","completed","failed","killed"].includes(t)?t:"neutral"},si=e=>{const t=[],r=String(e||"").split(/\r?\n/).map(n=>n.trim()).filter(Boolean);for(const n of r){try{const s=JSON.parse(n);if(s&&typeof s=="object"){t.push(s);continue}}catch{}t.push({event:"raw",message:n})}return t},rc=(e,t)=>{const r=Array.isArray(e)?e:[],n={queued:0,running:0,completed:0,failed:0,killed:0,other:0,total:r.length};for(const l of r){const u=String(l?.status||"").toLowerCase();u in n?n[u]+=1:u==="success"?n.completed+=1:n.other+=1}const i=si(t?.log_tail||"").filter(l=>l&&l.event==="playground.node").slice(-360).map(l=>({status:String(l.status||"unknown"),cache_source:String(l.cache_source||"-"),duration_s:Number(l.duration_s||0),operator:String(l.operator||"-"),node_id:String(l.node_id||"")})),o=r.slice(0,36).map(l=>({id:String(l.job_id||""),status:String(l.status||"unknown"),created_at:String(l.created_at||""),started_at:String(l.started_at||""),finished_at:String(l.finished_at||""),wall_time_s:Number(l?.metrics?.wall_time_s||0),strategy:String(l?.request?.execution_strategy||"dask"),kind:String(l?.request?.job_kind||"run")}));return{generated_at:Date.now(),counts:n,jobs:o,node_events:i,active_job_id:t?.job_id?String(t.job_id):""}},An=e=>{const n=((e?.result||{})?.execution||{}).cache_summary||{},s=String(e?.log_tail||""),i=si(s),o=i.filter(p=>p.event==="playground.node"),l=o.length?o:i.filter(p=>p.event!=="raw"),u=`computed ${Number(n.computed||0)} | cached(store) ${Number(n.cached_store||0)} | cached(local) ${Number(n.cached_local||0)} | failed ${Number(n.failed||0)} | events ${Number(n.events_stored||o.length)}/${Number(n.events_total||o.length)}`;return{raw:s,summaryText:u,rows:l.slice(-220).reverse()}},nc=({precomputedPrintTargets:e=[],latestGoalResults:t=[],precomputedSymbolTable:r={},latestSymbolTable:n={}})=>{const s=[],i=new Set,o=u=>{const p=`${u.kind}:${u.label}:${u.nodeId}`;i.has(p)||(i.add(p),s.push(u))};for(const u of e)u?.node_id&&o({kind:"print",label:String(u.name||"print"),nodeId:String(u.node_id)});for(const u of t)!u||u.operation!=="print"||!u.node_id||o({kind:"print",label:String(u.name||"print"),nodeId:String(u.node_id)});const l=Object.keys(r||{}).length>0?r:n;for(const[u,p]of Object.entries(l||{}))!p||typeof p!="string"||o({kind:"variable",label:String(u),nodeId:p});return s},ai=e=>{const t=e&&typeof e=="object"?e.execution_errors:null;if(t&&typeof t=="object")return t;const r=e?.diagnostics?.execution_errors;return r&&typeof r=="object"?r:{}},sc=e=>{const t=e&&typeof e=="object"?e.execution_error_details:null;if(t&&typeof t=="object")return t;const r=e?.diagnostics?.execution_error_details;return r&&typeof r=="object"?r:{}},ii=e=>{const t=Object.entries(e||{});return t.length?t.map(([r,n])=>`${String(r).slice(0,12)}: ${String(n)}`).join(`
`):"none"},ac=(e,t)=>{const r=Object.entries(e||{});if(!r.length)return"";const n=(s,i=120)=>{const o=String(s??"");return o.length<=i?o:`${o.slice(0,i)}...`};return r.map(([s,i])=>{const o=i?.operator?String(i.operator):"unknown",l=Array.isArray(i?.args)?i.args.map(b=>n(b)).join(", "):"",u=i&&typeof i.kwargs=="object"&&i.kwargs?Object.entries(i.kwargs).map(([b,E])=>`${String(b)}=${n(E)}`).join(", "):"",p=i&&typeof i.attrs=="object"&&i.attrs?n(JSON.stringify(i.attrs)):"",h=i?.kind?` kind=${String(i.kind)}`:"",m=i?.output_kind?` output=${String(i.output_kind)}`:"",_=t?.[s]?String(t[s]):"",y=u?`${o}(${l}${l?", ":""}${u})`:`${o}(${l})`,w=p&&p!=="{}"?` attrs=${p}`:"",k=_?` error=${_}`:"";return`${String(s).slice(0,12)}: ${y}${w}${h}${m}${k}`}).join(`
`)},ic=(e,t)=>{const r=String(e.node_id||t.nodeId||""),n=e.path||t.path||"",s=String(e.compute_status||e.status||"failed"),i=[`node: ${r||"-"}`,`path: ${n||"/"}`,`status: ${s}`],o=String(e.store_status||e?.diagnostics?.store_status||"missing");i.push(`store: ${o}`),e.error&&i.push(`error: ${String(e.error)}`),e.job_error&&i.push(`job_error: ${String(e.job_error)}`),e.store_error&&i.push(`store_error: ${String(e.store_error)}`);const l=e?.diagnostics;l&&typeof l=="object"&&(l.job_error&&!e.job_error&&i.push(`job_error: ${String(l.job_error)}`),l.store_error&&!e.store_error&&i.push(`store_error: ${String(l.store_error)}`));const u=ai(e);Object.keys(u).length&&(i.push("execution_errors:"),i.push(ii(u)));const p=ac(sc(e),u);return p&&(i.push("failed_operations:"),i.push(p)),i.join(`
`)},oc=e=>{if(!e||typeof e!="object")return"value available";const t=String(e.vox_type||"value"),r=e.summary&&typeof e.summary=="object"?e.summary:{};return["integer","number","boolean"].includes(t)?`${t}: ${r.value}`:t==="string"?`string(${r.length||0}): ${r?.value||""}`:t==="ndarray"?`ndarray ${(r.shape||[]).join("x")} ${r.dtype||""}`.trim():["image2d","volume3d"].includes(t)?`${t} ${(r.size||[]).join("x")} ${r.pixel_id||""}`.trim():t==="sequence"?`sequence length=${r.length||0}`:t==="mapping"?`mapping length=${r.length||0}`:t},lc=e=>String(e).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;"),Es=e=>String(e).replaceAll("&","&amp;").replaceAll('"',"&quot;").replaceAll("'","&#39;").replaceAll("<","&lt;").replaceAll(">","&gt;"),Ts=["import","let","in","for","do","true","false"],cc=new Set(Ts),uc=/[A-Za-z_.$]/,fc=/[A-Za-z0-9_.$]/,dc=/[0-9]/,Ln=/[A-Za-z0-9_.$]/,vc=e=>{const t=String(e?.location||""),r=String(e?.message||""),n=`${t} ${r}`;let s=n.match(/line\s+(\d+)(?:\s*,\s*column\s+(\d+))?/i);return s?{line:Number(s[1]),column:s[2]?Number(s[2]):null}:(s=n.match(/(?:^|\s)(\d+):(\d+)(?:\s|$)/),s?{line:Number(s[1]),column:Number(s[2])}:null)},_c=e=>{const t=[];let r=0;for(;r<e.length;){const n=e[r];if(n==="/"&&e[r+1]==="/"){t.push({kind:"comment",text:e.slice(r)});break}if(n==='"'){let s=r+1;for(;s<e.length;){if(e[s]==='"'&&e[s-1]!=="\\"){s+=1;break}s+=1}t.push({kind:"string",text:e.slice(r,s)}),r=s;continue}if(dc.test(n)){let s=r+1;for(;s<e.length&&/[0-9.]/.test(e[s]);)s+=1;t.push({kind:"number",text:e.slice(r,s)}),r=s;continue}if(uc.test(n)){let s=r+1;for(;s<e.length&&fc.test(e[s]);)s+=1;const i=e.slice(r,s);t.push({kind:cc.has(i)?"keyword":"identifier",text:i}),r=s;continue}if(/\s/.test(n)){let s=r+1;for(;s<e.length&&/\s/.test(e[s]);)s+=1;t.push({kind:"space",text:e.slice(r,s)}),r=s;continue}t.push({kind:"operator",text:n}),r+=1}return t},pc=(e,t)=>{const r=String(e.text||""),n=lc(r);if(e.kind==="space")return n;if(e.kind==="identifier"&&t.has(r)){const i=encodeURIComponent(r);return`<button type="button" class="vx-editor__symbol" data-token="${Es(i)}" title="Inspect ${Es(r)}">${n}</button>`}return`<span class="${`vx-editor__token vx-editor__token--${Es(e.kind)}`}">${n}</span>`},hc=(e,t={},r=[])=>{const n=String(e||""),s=new Set(Object.keys(t||{})),i=new Set;for(const l of Array.isArray(r)?r:[]){const u=vc(l);u?.line&&Number.isFinite(u.line)&&u.line>0&&i.add(u.line)}return n.split(`
`).map((l,u)=>{const p=u+1,h=i.has(p)?"vx-editor__line vx-editor__line--error":"vx-editor__line",_=_c(l).map(y=>pc(y,s)).join("");return`<span class="${h}" data-line="${p}">${_||" "}</span>`}).join("")},gc=(e,t)=>{const r=String(e||""),n=Math.max(0,Math.min(Number(t||0),r.length));let s=n,i=n;for(;s>0&&r[s-1]!==`
`;)s-=1;for(;i<r.length&&r[i]!==`
`;)i+=1;const o=r.slice(s,i).trim();return o?o.length<=160?o:`${o.slice(0,157)}...`:""},mc=(e,t)=>{const r=String(e||"");if(!Number.isInteger(t)||t<0)return{token:"",start:0,end:0};const n=Math.max(0,Math.min(t,r.length));let s=n,i=n;for(;s>0&&Ln.test(r[s-1]);)s-=1;for(;i<r.length&&Ln.test(r[i]);)i+=1;return{token:r.slice(s,i).trim(),start:s,end:i}},bc=e=>!!e&&!/[A-Za-z0-9_$]/.test(e),yc=(e,t,r)=>{const n=String(e?.value||"");if(!e)return null;const s=e.getBoundingClientRect();if(t<s.left||t>s.right||r<s.top||r>s.bottom)return null;const i=window.getComputedStyle(e),o=i.font||`${i.fontSize} ${i.fontFamily}`,l=Number.parseFloat(i.lineHeight)||Number.parseFloat(i.fontSize)*1.5,u=Number.parseFloat(i.paddingLeft)||0,p=Number.parseFloat(i.paddingTop)||0,h=document.createElement("span");h.style.position="absolute",h.style.visibility="hidden",h.style.whiteSpace="pre",h.style.font=o,h.textContent="MMMMMMMMMM",document.body.appendChild(h);const m=Math.max(1,h.getBoundingClientRect().width/10);h.remove();const _=t-s.left+e.scrollLeft-u,y=r-s.top+e.scrollTop-p,w=Math.max(0,Math.floor(y/l)),k=Math.max(0,Math.floor(_/m)),b=n.split(`
`),E=Math.min(w,Math.max(0,b.length-1));let q=0;for(let $=0;$<E;$+=1)q+=b[$].length+1;return q+=Math.min(k,b[E].length),Math.min(q,n.length)},wc=(e,t)=>{const r=String(e||""),n=Math.max(0,Math.min(Number(t||0),r.length));let s=1,i=-1;for(let o=0;o<n;o+=1)r[o]===`
`&&(s+=1,i=o);return{line:s,column:n-i}},xc=(e,t)=>{const r=String(e||""),n=Math.max(0,Math.min(Number(t||0),r.length));let s=n;for(;s>0&&Ln.test(r[s-1]);)s-=1;let i=n;for(;i<r.length&&Ln.test(r[i]);)i+=1;const o=r.slice(s,n),l=r.slice(s,i),u=wc(r,n);return{text:r,cursor:n,from:s,to:i,prefix:o,token:l,line:u.line,column:u.column}},Sc=(e,{symbols:t={},keywords:r=Ts,builtins:n=[]}={})=>{const s=String(e?.prefix||""),i=s.toLowerCase(),o=new Map;for(const l of r)o.set(l,{label:l,insertText:l,kind:"keyword",detail:"language keyword"});for(const l of n){const u=String(l||"");u&&o.set(u,{label:u,insertText:u,kind:"primitive",detail:"known primitive"})}for(const l of Object.keys(t||{}))o.set(l,{label:l,insertText:l,kind:"symbol",detail:"declared symbol"});return Array.from(o.values()).filter(l=>s?String(l.label||"").toLowerCase().startsWith(i):!0).sort((l,u)=>{const p=String(l.label||""),h=String(u.label||""),m=p.toLowerCase()===i,_=h.toLowerCase()===i;return m&&!_?-1:!m&&_?1:p.localeCompare(h)})},kc=(e,t,r)=>{const n=String(e||""),s=String(r?.insertText||r?.label||""),i=Math.max(0,Math.min(Number(t?.from||0),n.length)),o=Math.max(i,Math.min(Number(t?.to||i),n.length)),l=`${n.slice(0,i)}${s}${n.slice(o)}`,u=i+s.length;return{text:l,cursor:u}},Ec=(e,t)=>{if(!e)return{left:0,top:0,height:0};const r=String(e.value||""),n=Math.max(0,Math.min(Number(t||0),r.length)),s=window.getComputedStyle(e),i=document.createElement("div");i.style.position="absolute",i.style.visibility="hidden",i.style.whiteSpace="pre-wrap",i.style.wordWrap="break-word",i.style.overflow="hidden",i.style.width=s.width,i.style.font=s.font,i.style.lineHeight=s.lineHeight,i.style.padding=s.padding,i.style.border=s.border,i.style.letterSpacing=s.letterSpacing,i.style.tabSize=s.tabSize;const o=r.slice(0,n),l=r.slice(n)||".";i.textContent=o;const u=document.createElement("span");u.textContent=l[0],i.appendChild(u),document.body.appendChild(i);const p=u.getBoundingClientRect(),h=i.getBoundingClientRect(),m=e.getBoundingClientRect(),_=Number.parseFloat(s.lineHeight)||Number.parseFloat(s.fontSize)*1.5,y=p.left-h.left-e.scrollLeft+m.left,w=p.top-h.top-e.scrollTop+m.top;return document.body.removeChild(i),{left:y,top:w,height:_}};var Tc=B('<span class="vx-editor__suggestion-kind svelte-9d6ed"> </span>'),$c=B('<span class="vx-editor__suggestion-detail svelte-9d6ed"> </span>'),Nc=B('<li role="option"><button type="button" class="vx-editor__suggestion-button svelte-9d6ed"><span class="vx-editor__suggestion-label svelte-9d6ed"> </span> <!> <!></button></li>'),Cc=B('<ul class="vx-editor__suggestions svelte-9d6ed" role="listbox" aria-label="Autocomplete suggestions" data-testid="completion-list"></ul>'),Rc=B('<div class="vx-editor svelte-9d6ed" data-testid="vox-code-editor"><div class="vx-editor__shell svelte-9d6ed"><textarea class="vx-editor__input svelte-9d6ed" spellcheck="false"></textarea> <pre class="vx-editor__overlay svelte-9d6ed" aria-hidden="true" role="presentation" tabindex="-1"><!></pre></div> <!></div>');function Pc(e,t){Et(t,!1);let r=he(t,"value",12,""),n=he(t,"symbols",24,()=>({})),s=he(t,"diagnostics",24,()=>[]),i=he(t,"autocompleteEnabled",8,!0),o=he(t,"completionProvider",8,null),l=he(t,"completionKeywords",8,Ts),u=he(t,"completionBuiltins",24,()=>[]),p=he(t,"ariaLabel",8,"Program editor"),h=he(t,"placeholder",8,""),m=he(t,"readonly",8,!1);const _=Za();let y=N(),w=N(),k=null,b=null,E=0,q=N(""),$=N([]),I=N(0),P=N(!1),F=null,D=N({left:0,top:0});const U=()=>{f($,[]),f(I,0),f(P,!1),F=null},K=()=>{!a(w)||!a(y)||(yt(w,a(w).scrollTop=a(y).scrollTop),yt(w,a(w).scrollLeft=a(y).scrollLeft))},H=()=>{!i()||m()||(b&&clearTimeout(b),b=setTimeout(()=>{Te(!1)},80))},ge=(O,le)=>{const ae=Array.isArray(O)?O:[],ee=String(le?.prefix||"").toLowerCase();return ae.map(ce=>typeof ce=="string"?{label:ce,insertText:ce,kind:"symbol",detail:""}:{label:String(ce?.label||""),insertText:String(ce?.insertText||ce?.label||""),kind:String(ce?.kind||"symbol"),detail:String(ce?.detail||"")}).filter(ce=>ce.label).filter(ce=>!ee||ce.label.toLowerCase().startsWith(ee))},Te=async O=>{if(!i()||m()||!a(y))return;const le=Number(a(y).selectionStart||0),ae=xc(r(),le);if(!O&&!ae.prefix){U();return}const ee=E+1;E=ee;let ce=[];if(typeof o()=="function")try{ce=await o()({...ae,symbols:{...n()||{}}})}catch{ce=[]}else ce=Sc(ae,{symbols:n(),keywords:l(),builtins:u()});if(ee!==E)return;const je=ge(ce,ae);if(!je.length){U();return}const ke=Ec(a(y),ae.cursor);f($,je),f(I,0),f(P,!0),F=ae,f(D,{left:Math.max(8,Math.round(ke.left+8)),top:Math.max(8,Math.round(ke.top+ke.height+6))}),_("completionstate",{open:!0,count:a($).length,prefix:ae.prefix})},Ce=async()=>{if(!a(P)||!a($).length||!F)return!1;const O=a($)[Math.max(0,Math.min(a(I),a($).length-1))],le=kc(r(),F,O);return r(le.text),_("change",{value:r()}),U(),await Fa(),a(y)&&(a(y).focus(),yt(y,a(y).selectionStart=le.cursor),yt(y,a(y).selectionEnd=le.cursor)),_("completionapply",{item:O,cursor:le.cursor}),!0},Re=()=>{_("change",{value:r()}),_("input",{value:r()}),H()},Me=async O=>{if((O.ctrlKey||O.metaKey)&&String(O.key||"").toLowerCase()===" "){O.preventDefault(),await Te(!0);return}if(a(P)){if(O.key==="ArrowDown"){O.preventDefault(),f(I,(a(I)+1)%a($).length);return}if(O.key==="ArrowUp"){O.preventDefault(),f(I,(a(I)-1+a($).length)%a($).length);return}if(O.key==="Escape"){O.preventDefault(),U();return}(O.key==="Enter"||O.key==="Tab")&&(O.preventDefault(),await Ce())}},W=O=>{const le=O.target instanceof Element?O.target.closest(".vx-editor__symbol"):null;if(!le)return;const ae=decodeURIComponent(String(le.getAttribute("data-token")||""));ae&&_("symbolhover",{token:ae})},j=O=>{!(O.target instanceof Element&&O.target.closest(".vx-editor__symbol"))||O.relatedTarget instanceof Element&&O.relatedTarget.closest(".vx-editor__symbol")||_("symbolleave")},re=()=>{},fe=()=>{_("symbolleave")},de=O=>{const le=O.target instanceof Element?O.target.closest(".vx-editor__symbol"):null;if(!le)return;O.preventDefault();const ae=decodeURIComponent(String(le.getAttribute("data-token")||""));ae&&(_("symbolclick",{token:ae}),a(y)?.focus({preventScroll:!0}))},Pe=O=>{k&&clearTimeout(k),k=setTimeout(()=>{const le=yc(a(y),O.clientX,O.clientY);if(!Number.isInteger(le)){_("hoverleave");return}const ae=mc(r(),le);if(!ae.token){_("hoverleave");return}if(!(n()&&n()[ae.token])){if(!bc(ae.token)){_("hoverleave");return}_("operatorhover",{token:ae.token,context:gc(r(),ae.start)})}},100)},$e=()=>{k&&(clearTimeout(k),k=null),_("hoverleave")},me=async O=>{f(I,Number(O||0)),await Ce()},z=()=>{k&&(clearTimeout(k),k=null),b&&(clearTimeout(b),b=null)};Ss(()=>{z()}),Qe(()=>(oe(r()),oe(n()),oe(s())),()=>{f(q,hc(r(),n(),s()))}),Qe(()=>(a(P),a($)),()=>{!a(P)&&a($).length&&f($,[])}),yr(),zt();var J=Rc();X("blur",En,U),X("beforeunload",En,z);var V=d(J),ne=d(V);Dr(ne,O=>f(y,O),()=>a(y));var G=g(ne,2),De=d(G);yl(De,()=>a(q)),Dr(G,O=>f(w,O),()=>a(w));var xe=g(V,2);{var Ae=O=>{var le=Cc();et(le,5,()=>a($),Xe,(ae,ee,ce)=>{var je=Nc(),ke=d(je),be=d(ke),rt=d(be),St=g(be,2);{var nt=Be=>{var We=Tc(),Ge=d(We);Y(()=>T(Ge,(a(ee),S(()=>a(ee).kind)))),L(Be,We)};pe(St,Be=>{a(ee),S(()=>a(ee).kind)&&Be(nt)})}var sr=g(St,2);{var Tr=Be=>{var We=$c(),Ge=d(We);Y(()=>T(Ge,(a(ee),S(()=>a(ee).detail)))),L(Be,We)};pe(sr,Be=>{a(ee),S(()=>a(ee).detail)&&Be(Tr)})}Y(()=>{an(je,"aria-selected",ce===a(I)),tt(je,1,`vx-editor__suggestion ${ce===a(I)?"is-selected":""}`,"svelte-9d6ed"),T(rt,(a(ee),S(()=>a(ee).label)))}),X("click",ke,()=>me(ce)),X("mousedown",je,Cl(function(Be){Rl.call(this,t,Be)})),L(ae,je)}),Y(()=>Va(le,(a(D),S(()=>`left:${a(D).left}px;top:${a(D).top}px`)))),L(O,le)};pe(xe,O=>{a(P),a($),S(()=>a(P)&&a($).length)&&O(Ae)})}Y(()=>{an(ne,"aria-label",p()),an(ne,"placeholder",h()),ne.readOnly=m()}),Ga(ne,r),X("input",ne,Re),X("keydown",ne,Me),X("mousemove",ne,Pe),X("mouseleave",ne,$e),X("scroll",ne,K),X("mouseover",G,W),X("mouseout",G,j),X("click",G,de),X("focus",G,re),X("blur",G,fe),L(e,J),Tt()}var Mc=B("<span> </span>");function oi(e,t){Et(t,!1);let r=he(t,"value",8,"idle"),n=he(t,"extraClass",8,"");zt();var s=Mc(),i=d(s);Y((o,l)=>{tt(s,1,o),T(i,l)},[()=>Ua((oe(ni),oe(r()),oe(n()),S(()=>`chip ${ni(r())} ${n()}`.trim()))),()=>(oe(r()),S(()=>String(r()||"idle").toLowerCase()))]),L(e,s),Tt()}var Ac=B("<option> </option>"),Lc=B("<option> </option>"),Oc=B('<div id="programDiagnostics" class="inline-error"> </div>'),Ic=B('<div id="runError" class="inline-error"> </div>'),Fc=B('<div class="muted"> </div>'),jc=B('<div class="muted">No jobs executed yet.</div>'),Dc=B('<button type="button"> </button>'),zc=B("<span> </span>"),Bc=B('<button class="btn btn-danger btn-small" type="button">Kill</button>'),qc=B('<article class="job-item"><div class="job-row"><strong> </strong> <!></div> <div class="job-row"><span> </span> <span> </span></div> <div class="job-row"><span> </span> <div class="row gap-s"><button class="btn btn-ghost btn-small" type="button">Open</button> <!></div></div></article>'),Jc=B("<option>No print labels or variables available</option>"),Uc=B("<option> </option>"),Vc=B('<div class="muted">No node events available yet. Raw log is shown below.</div>'),Hc=B('<article class="table-like-row"><div class="name"><span class="mini-chip"> </span> </div> <div class="detail"> <!></div></article>'),Wc=B('<article class="table-like-row"><div class="name"> </div> <div class="detail"> </div></article>'),Gc=B(`<section id="tab-playground"><div class="grid-two"><article class="card editor-card"><div class="card-header"><h2>Interactive Playground</h2> <div class="row gap-s"><label class="inline-control" for="executionStrategy">Strategy</label> <select id="executionStrategy" class="select" disabled=""><option selected="">dask</option></select></div></div> <div id="editorShell" class="editor-shell"><!></div> <div class="row controls"><label class="inline-control" for="programLibrarySelect">Program Library</label> <select id="programLibrarySelect" class="select"><!></select> <button id="loadProgramFileBtn" class="btn btn-ghost btn-small" type="button">Load from Library</button></div> <p id="programLibraryMeta" class="muted"> </p> <p class="muted">Variables are directly clickable in the editor. Hover changes appearance, click resolves on demand with
        priority even when no full run has been launched.</p> <div id="editorHoverPreview" class="editor-hover-preview muted"> </div> <!> <div class="row controls"><button id="runProgramBtn" class="btn btn-primary hidden" type="button">Run Program</button> <button id="killProgramBtn" class="btn btn-danger" type="button">Kill Running Job</button> <button id="clearOutputBtn" class="btn btn-ghost" type="button">Clear Output</button> <!></div> <!></article> <article class="card telemetry-card"><div class="card-header"><h2>Runtime Telemetry</h2> <button id="refreshJobsBtn" class="btn btn-ghost btn-small" type="button">Refresh</button></div> <div class="stats-grid"><div class="stat"><span class="label">Wall Time</span><strong id="metricWall"> </strong></div> <div class="stat"><span class="label">CPU Time</span><strong id="metricCpu"> </strong></div> <div class="stat"><span class="label">CPU Util.</span><strong id="metricCpuUtil"> </strong></div> <div class="stat"><span class="label">Peak Python Heap</span><strong id="metricHeapPeak"> </strong></div> <div class="stat"><span class="label">RSS Delta</span><strong id="metricRssDelta"> </strong></div> <div class="stat"><span class="label">Current Job</span><strong id="metricJobId"> </strong></div></div> <h3 class="subheading">Recent Jobs</h3> <div id="recentJobs" class="job-list"><!></div> <h3 class="subheading">Dask Queue Flux</h3> <div id="daskQueueViz" class="dask-queue-viz"></div> <h3 class="subheading">Focused Result</h3> <div class="row gap-s controls"><label class="inline-control" for="playResultSelector">Target</label> <select id="playResultSelector" class="select"><!></select></div> <p id="playResultMeta" class="muted"> </p> <div id="playResultInspector" class="result-inspector compact"></div> <h3 class="subheading">Execution Log</h3> <p id="playExecSummary" class="muted"> </p> <div id="playExecLog" class="table-like muted"><!></div> <pre id="playExecRaw" class="mono-scroll compact-log"> </pre></article></div> <div class="grid-two"><article class="card"><h2>Execution Result</h2> <pre id="executionOutput" class="mono-scroll"> </pre></article> <article class="card"><h2>Task Graph (Text)</h2> <pre id="taskGraphOutput" class="mono-scroll"> </pre></article></div></section>`);function Kc(e,t){Et(t,!1);const r=N(),n=N();let s=he(t,"active",8,!1),i=he(t,"capabilities",24,()=>({}));const o="brats_flair_mean_threshold.imgql";let u=N(`import "simpleitk"

dataset_root = "tests/data/datasets/BraTS_2019_HGG"

// Controls.
k = 10
hi_thr = 0.93
vi_thr_start = 83
vi_thr_stop = 92
vi_ticks = range(vi_thr_start, vi_thr_stop)
to_thr(tick) = tick / 100
vi_thresholds = map(to_thr, vi_ticks)

// Recursively discover BraTS FLAIR volumes and keep first k cases.
all_flair_paths = dir(dataset_root, "*_flair.nii.gz", true, true)
flair_paths = subsequence(all_flair_paths, 0, k)

// Paper method (simplified branch): lines 1-6 of the GBM specification.
// We sweep viThr in [0.83, 0.91] with step 0.01 while keeping hiThr fixed at 0.93.
read_image(path) = ReadImage(path)
to_intensity(img) = intensity(img)
preprocess_flair(flair) =
  let background = touch(leq_sv(0.1, flair), border) in
  let brain = not(background) in
  percentiles(flair, brain, 0)

sweep_case(pflair) =
  let hyper_intense = smoothen(geq_sv(hi_thr, pflair), 5.0) in
  for vi_thr in vi_thresholds do
    let very_intense = smoothen(geq_sv(vi_thr, pflair), 2.0) in
    grow(hyper_intense, very_intense)

// Debuggable sequence-of-maps pipeline.
flair_images = map(read_image, flair_paths)
flair_intensities = map(to_intensity, flair_images)
pflair_images = map(preprocess_flair, flair_intensities)

// Sequence of sequences: for each case, one mask per viThr value.
vi_sweep_masks = map(sweep_case, pflair_images)`),p=N([]),h=N(""),m=N(""),_=!1,y=!1,w=N([]),k=N({}),b=[],E=[],q=N({}),$=0,I=null,P=N(""),F=N("idle"),D="",U=null,K=N([]),H=N("-"),ge=N("-"),Te=N("-"),Ce=N("-"),Re=N("-"),Me=N("-"),W=N(""),j=N(""),re=N("Click inspect on a variable to resolve it on demand."),fe=N([]),de=N(-1),Pe=N("No execution trace yet."),$e=N(""),me=N([]),z=N(""),J=N("Hover a variable to see cached value status, or hover an operator to inspect expression context."),V=0,ne="",G=N(),De=N(),xe=null,Ae=null,O=null,le="",ae=null,ee=null,ce=null,je=0,ke=null,be=null,rt=null,St=0,nt="";const sr=["map","for","range","subsequence","dir","ReadImage","BinaryThreshold","intensity","percentiles","smoothen","grow","touch","not","leq_sv","geq_sv","index"],Tr=c=>{const v=Array.isArray(c)?c:[];return v.length?v.map(x=>{const R=x?.code?`[${x.code}] `:"",M=x?.message?String(x.message):"Static error",te=x?.symbol?` (symbol: ${x.symbol})`:"",_e=x?.location?` @ ${x.location}`:"";return`${R}${M}${te}${_e}`}).join(`
`):""},Be=({prefix:c=""})=>{const v=new Map;for(const R of["import","let","in","for","do","true","false"])v.set(R,{label:R,insertText:R,kind:"keyword",detail:"language keyword"});for(const R of sr)v.set(R,{label:R,insertText:R,kind:"primitive",detail:"known primitive"});for(const R of Object.keys(a(n)||{}))v.set(R,{label:R,insertText:R,kind:"symbol",detail:"declared symbol"});const x=String(c||"").toLowerCase();return Array.from(v.values()).filter(R=>!x||R.label.toLowerCase().startsWith(x)).sort((R,M)=>String(R.label).localeCompare(String(M.label)))},We=c=>{const v=c?.metrics||{};f(H,vt(Number(v.wall_time_s))),f(ge,vt(Number(v.cpu_time_s))),f(Te,ri(Number(v.cpu_utilization))),f(Ce,ze(Number(v.python_heap_peak_bytes))),f(Re,ze(Number(v.ru_maxrss_delta_bytes))),f(Me,c?.job_id?String(c.job_id).slice(0,12):"-")},Ge=c=>{f(F,String(c||"idle").toLowerCase())},In=()=>{f(P,"")},on=()=>`${window.location.protocol==="https:"?"wss":"ws"}://${window.location.host}`,Fn=c=>{const v=Math.min(8,Math.max(0,Number(c||0))),x=Math.min(5e3,250*2**v),R=Math.floor(Math.random()*180);return x+R},ln=()=>{ce&&(clearTimeout(ce),ce=null);const c=ee;if(ee=null,c)try{c.close()}catch{}},jn=()=>{rt&&(clearTimeout(rt),rt=null);const c=be;if(be=null,c)try{c.close()}catch{}},cn=()=>{ee&&(ee.readyState===WebSocket.OPEN||ee.readyState===WebSocket.CONNECTING)||(ln(),ee=new WebSocket(`${on()}/ws/playground/value`),ee.onopen=()=>{je=0,ke&&ee.send(JSON.stringify({type:"subscribe",request:{program:a(u),execution_strategy:"dask",node_id:ke.nodeId,variable:ke.variable||"",path:ke.path||"",enqueue:ke.enqueue!==!1}}))},ee.onmessage=c=>{try{const v=JSON.parse(String(c.data||"{}"));v?.type==="value"&&v?.payload&&ke&&Un(v.payload,ke)}catch{}},ee.onclose=()=>{if(ee=null,!ke)return;je+=1;const c=Fn(je);ce&&clearTimeout(ce),ce=setTimeout(()=>{cn()},c)},ee.onerror=()=>{try{ee?.close()}catch{}})},$s=({nodeId:c="",variable:v="",path:x="",enqueue:R=!0}={})=>"WebSocket"in window?(ke={nodeId:c,variable:v,path:x,enqueue:R},cn(),ee&&ee.readyState===WebSocket.OPEN&&ee.send(JSON.stringify({type:"subscribe",request:{program:a(u),execution_strategy:"dask",node_id:c,variable:v,path:x,enqueue:R}})),!0):!1,Dn=()=>{be&&(be.readyState===WebSocket.OPEN||be.readyState===WebSocket.CONNECTING)||(jn(),be=new WebSocket(`${on()}/ws/playground/jobs`),be.onopen=()=>{St=0,nt&&be.send(JSON.stringify({type:"subscribe",job_id:nt}))},be.onmessage=async c=>{try{const v=JSON.parse(String(c.data||"{}"));if(v?.type!=="job"&&v?.type!=="terminal")return;const x=v?.payload||null;if(!x)return;U=x||null,Ge(x.status),We(x);const{raw:R,summaryText:M,rows:te}=An(x);f($e,R),f(Pe,M),f(me,te),qt(),v.type==="terminal"&&(nt="",await dn(x))}catch{}},be.onclose=()=>{if(be=null,!nt)return;St+=1;const c=Fn(St);rt&&clearTimeout(rt),rt=setTimeout(()=>{Dn()},c)},be.onerror=()=>{try{be?.close()}catch{}})},zn=(c="")=>!c||!("WebSocket"in window)?!1:(nt=String(c),Dn(),be&&be.readyState===WebSocket.OPEN&&be.send(JSON.stringify({type:"subscribe",job_id:nt})),!0),Bt=()=>{O&&(clearInterval(O),O=null),nt="",jn()},Nt=()=>{ke=null,ln()},ar=()=>{const c=a(fe)[a(de)];if(f(fe,nc({precomputedPrintTargets:b,latestGoalResults:E,precomputedSymbolTable:a(k),latestSymbolTable:a(q)})),!a(fe).length){f(de,-1);return}if(c){const v=a(fe).findIndex(x=>x.kind===c.kind&&x.label===c.label&&x.nodeId===c.nodeId);f(de,v>=0?v:0);return}f(de,0)},zr=()=>{if(xe||!a(G))return;const c=window.VoxResultViewer?.ResultViewer;if(typeof c=="function"){xe=new c(a(G),{onNavigate:v=>{const x=a(fe)[a(de)];x?.nodeId&&Br(x.nodeId,v||"",{variable:x.kind==="variable"?x.label:""})},fetchPage:({nodeId:v,path:x,offset:R,limit:M})=>{const te=a(fe)[a(de)],_e=te?.kind==="variable"?te.label:"";return Vl({program:a(u),nodeId:v||te?.nodeId||"",variable:_e,path:x||"",offset:Number(R||0),limit:Number(M||64),enqueue:!0})},onStatusClick:v=>{!v||v.status!=="failed"&&v.status!=="killed"||fn(v,{nodeId:v.node_id||"",path:v.path||""})}});return}xe={setLoading:v=>{yt(G,a(G).textContent=v||"Loading...")},setError:v=>{yt(G,a(G).textContent=v||"Viewer error")},renderRecord:v=>{yt(G,a(G).textContent=JSON.stringify(v||{},null,2))}}},un=()=>{if(Ae||!a(De))return;const c=window.VoxDaskQueueViz?.DaskQueueVisualizer;if(typeof c=="function"){Ae=new c(a(De));return}Ae={render:v=>{const x=v?.counts||{};yt(De,a(De).textContent=`queue: queued ${Number(x.queued||0)} | running ${Number(x.running||0)} | completed ${Number(x.completed||0)} | failed ${Number(x.failed||0)}`)}}},qt=()=>{un(),Ae&&Ae.render(rc(a(K),U))},Bn=async c=>{const v=c?.result||{};f(W,JSON.stringify(v,null,2)),f(j,v.task_graph||"(no task graph in payload)"),Array.isArray(v.goal_results)&&(E=v.goal_results),v.symbol_table&&typeof v.symbol_table=="object"&&f(q,v.symbol_table);const{raw:x,summaryText:R,rows:M}=An(c);if(f($e,x),f(Pe,R),f(me,M),ar(),a(fe).length&&a(de)>=0){const te=a(fe)[a(de)];await Br(te.nodeId,"",{variable:te.kind==="variable"?te.label:""})}qt()},Ns=async()=>{if(i().playground_program_library===!1){f(p,[]),f(h,""),f(m,"Program library endpoint unavailable on this backend.");return}try{const c=await Dl();if(!c.available){f(p,[]),f(h,""),f(m,c.error||"Program library unavailable.");return}if(f(p,c.files||[]),!a(p).length){f(h,""),y=!0,f(m,`${c.load_dir} | 0 files`);return}const v=a(p).find(x=>{const R=String(x?.path||"");return R===o||R.endsWith(`/${o}`)});y?(!a(h)||!a(p).some(x=>x.path===a(h)))&&f(h,v?.path||a(p)[0].path):(f(h,v?.path||a(p)[0].path),y=!0),f(m,`${c.load_dir} | ${a(p).length} file(s)`)}catch(c){f(p,[]),f(h,""),f(m,`Unable to load library: ${c.message}`)}},qn=async()=>{if(a(h))try{const c=await zl(a(h));f(u,c.content||""),f(m,`${c.path} | ${ze(Number(c.bytes||0))}`),E=[],f(q,{}),await Ct(),In()}catch(c){f(m,`Unable to load ${a(h)}: ${c.message}`)}},Ct=async()=>{if(i().playground_symbols===!1)return;const c=$+1;if($=c,!String(a(u)||"").trim()){f(k,{}),b=[],f(w,[]),ar();return}try{const v=await Bl(a(u));if(c!==$)return;const x=v?.available!==!1;f(k,x?v.symbol_table||{}:{}),b=x?v.print_targets||[]:[],f(w,v?.diagnostics||[]),ar()}catch(v){if(c!==$)return;f(k,{}),b=[],f(w,[{code:"E_SYMBOLS",message:`Unable to refresh symbols: ${v.message}`}]),ar()}},Cs=()=>{I&&clearTimeout(I),I=setTimeout(()=>{Ct()},260)},Jn=({nodeId:c="",variable:v="",path:x="",enqueue:R=!0})=>Ul({program:a(u),nodeId:c,variable:v,path:x,enqueue:R}),fn=(c,v)=>{const x=String(c.node_id||v.nodeId||""),R=c.path||v.path||"",te=String(c.compute_status||c.status||"failed").toLowerCase()==="killed"?"killed":"failed",_e=ic(c,v),qe=String(c.error||"Value inspection failed.");if(xe.renderRecord({available:!1,node_id:x,status:te,runtime_version:c.runtime_version||"runtime",updated_at:c.updated_at||new Date().toISOString(),path:R,error:qe,log_tail:c.log_tail||"",execution_errors:ai(c),descriptor:{vox_type:"string",format_version:"voxpod/1",summary:{value:_e,length:_e.length,truncated:!1},navigation:{path:R||"",pageable:!1,can_descend:!1,default_page_size:64,max_page_size:512}},diagnostics:c.diagnostics||{}}),f(re,`Unable to inspect ${x.slice(0,12)}${R?` @ ${R}`:""}: ${qe}`),c.log_tail){const{raw:pt,summaryText:st,rows:Mt}=An({log_tail:c.log_tail,result:{execution:{cache_summary:c?.cache_summary||c?.diagnostics?.cache_summary||{}}}});f($e,pt),f(Pe,st),f(me,Mt);return}f($e,""),f(Pe,"No execution log available for this failure."),f(me,[])},Un=(c,v)=>{const x=String(c.materialization||""),R=String(c.compute_status||""),M=String(c.status||""),te=String(c.node_id||v.nodeId||""),_e=c.path||v.path||"",qe=c.job_id?String(c.job_id):"",pt=c?.descriptor&&typeof c.descriptor=="object"?String(c.descriptor.vox_type||""):"",st=c?.descriptor&&pt&&pt!=="unavailable"&&pt!=="error";if((x==="cached"||x==="computed"||M==="materialized")&&st){Nt(),le="",xe.renderRecord(c),f(re,`Inspecting ${te.slice(0,12)}${_e?` @ ${_e}`:""} | ${x||"materialized"} | status=${R||"materialized"}`);return}if(x==="failed"||R==="failed"||R==="killed"||M==="failed"){Nt(),le="",fn(c,v);return}if(x==="pending"||x==="missing"||R==="queued"||R==="running"||R==="persisting"){const Wt=`${te}|${_e||""}`,ur=(pt==="sequence"||pt==="mapping")&&c?.descriptor&&typeof c.descriptor=="object"?c.descriptor:{vox_type:"unavailable",format_version:"voxpod/1",summary:{reason:`status=${R||"pending"}`},navigation:{path:_e||"",pageable:!1,can_descend:!1,default_page_size:64,max_page_size:512}},fr={...c,available:!1,node_id:te,status:R||"running",runtime_version:c.runtime_version||"runtime",updated_at:c.updated_at||new Date().toISOString(),path:_e,descriptor:ur};le===Wt&&typeof xe.refreshPage=="function"?xe.refreshPage(te,_e):(xe.renderRecord(fr),le=Wt),f(re,`In progress ${te.slice(0,12)}${_e?` @ ${_e}`:""} | ${R||"pending"}${qe?` | job ${qe.slice(0,12)}`:""}`),$s({nodeId:te,variable:v.variable||"",path:_e,enqueue:!1});return}Nt();const Ht=c.error||(x==="missing"?"Value is not materialized yet.":`Unable to inspect value (${x||R||"unknown"}).`);fn({...c,error:Ht,compute_status:R||"failed",status:c.status||"failed"},v)},Br=async(c,v="",x={})=>{zr(),Nt();const R=String(x.variable||"");f(re,`Resolving ${c.slice(0,12)}${v?` @ ${v}`:""}...`);try{const M=await Jn({nodeId:c,variable:R,path:v,enqueue:x.enqueue!==!1});Un(M,{nodeId:c,variable:R,path:v})}catch(M){Nt(),xe.setError(`Value lookup failed: ${M.message}`),f(re,`Unable to inspect ${c.slice(0,12)}: ${M.message}`)}},ir=async()=>{try{const c=await Jl();f(K,c.jobs||[]),f(z,""),!U&&a(K).length&&(U=a(K)[0]),qt()}catch(c){f(K,[]),f(z,`Failed to load jobs: ${c.message}`),qt()}},dn=async c=>{U=c||null,Ge(c?.status),We(c),await Bn(c),f(P,c?.error||""),await ir()},vn=async()=>{if(D)try{const c=await Xa(D);U=c||null,Ge(c.status),We(c);const{raw:v,summaryText:x,rows:R}=An(c);if(f($e,v),f(Pe,x),f(me,R),qt(),c.status==="running")return;Bt(),await dn(c)}catch(c){Bt(),Ge("failed"),f(P,`Polling failed: ${c.message}`)}},_n=async()=>{if(In(),await Ct(),a(w).length){f(P,"Static diagnostics must be fixed before execution can start.");return}try{Ge("running"),Nt(),f(W,""),f(j,""),f($e,""),f(me,[]),f(Pe,"Execution started. Waiting for log events..."),We(null);const c=await ql(a(u));D=c.job_id,f(Me,String(c.job_id||"").slice(0,12)),Bt(),zn(String(D||""))||(O=setInterval(vn,800),await vn())}catch(c){Ge("failed"),f(P,c.message)}},Rs=()=>{f(W,""),f(j,""),f(P,""),We(null),f(Pe,"No execution log yet."),f($e,""),f(me,[]),E=[],f(q,{}),U=null,Nt(),le="",f(re,"Click inspect on a variable to resolve it on demand."),zr(),xe.renderRecord(null),ar(),f(de,a(fe).length?0:-1),qt()},Ps=async()=>{if(D)try{const c=await ei(D);Bt(),await dn(c)}catch(c){f(P,`Kill failed: ${c.message}`)}},C=async c=>{if(c)try{const v=await Xa(c);D=c,U=v||null,Ge(v.status),We(v),await Bn(v),v.status==="running"&&(Bt(),zn(String(c||""))||(O=setInterval(vn,800)));const x=v?.result?.execution?.errors;(v.status==="failed"||v.status==="killed")&&x&&typeof x=="object"?f(P,[v.error||"Execution failed",ii(x)].filter(Boolean).join(`
`)):f(P,v.error||"")}catch(v){f(P,`Unable to open ${c}: ${v.message}`)}},Q=async c=>{try{await ei(c),D===c&&(Bt(),Ge("killed")),await ir()}catch(v){f(P,`Unable to kill ${c}: ${v.message}`)}},Ee=async()=>{const c=Number(a(de));if(!Number.isFinite(c)||(f(de,c),a(de)<0||a(de)>=a(fe).length))return;const v=a(fe)[a(de)];await Br(v.nodeId,"",{variable:v.kind==="variable"?v.label:""})},Se=c=>a(k)[c]||a(q)[c]||"",Z=c=>{f(J,c||"")},Le=()=>{V+=1,ne="",Z("Hover a variable to see cached value status, or hover an operator to inspect expression context.")},_t=async c=>{const v=Se(c);if(!v)return;Le();const x=a(fe).findIndex(R=>R.kind==="variable"&&R.label===c);x>=0&&f(de,x),await Br(v,"",{variable:c})},Rt=async c=>{const v=V+1;V=v,Z(`var ${c}: checking cache...`);try{const x=await Jn({variable:c,enqueue:!1});if(v!==V||ne!==c)return;const R=String(x.materialization||"");if(x.descriptor&&(R==="cached"||R==="computed")){Z(`var ${c}: ${oc(x.descriptor)} (${R})`);return}if(R==="pending"||x.compute_status==="running"||x.compute_status==="queued"||x.compute_status==="persisting"){Z(`var ${c}: running (${x.compute_status}). Click to focus/inspect.`);return}Z(`var ${c}: not materialized yet. Click to compute on demand.`)}catch{if(v!==V||ne!==c)return;Z(`var ${c}: click to compute on demand.`)}},Jt=async c=>{if(!c)return!1;let v=Se(c)?c:"";return v||(await Ct(),v=Se(c)?c:""),v?(ne=v,await _t(v),!0):!1},Pt=c=>{f(u,String(c?.detail?.value??a(u)??"")),f(q,{}),E=[],Cs(),Le()},$r=async c=>{const v=String(c?.detail?.token||"");v&&(ne=v,await Rt(v))},Nr=()=>{Le()},or=async c=>{const v=String(c?.detail?.token||"");v&&(ne=v,await Jt(v))},lr=c=>{const v=String(c?.detail?.token||"");if(!v)return;const x=String(c?.detail?.context||"");Z(x?`operator '${v}' in: ${x}`:`operator '${v}'`)},cr=()=>{Le()},Ut=async c=>{await C(c)},Ms=()=>{ae||(ae=setInterval(()=>{s()&&(ir(),Ct())},15e3))},pn=()=>{ae&&(clearInterval(ae),ae=null)};async function Vn(c,v=!1){f(u,String(c||"")),f(q,{}),E=[],Le(),await Ct(),v&&await _n()}async function Hn(){await _n()}Er(()=>{zr(),un(),qt(),(async()=>(await Ns(),!_&&a(h)&&(_=!0,await qn()),await Promise.all([ir(),Ct()])))()}),Ss(()=>{Bt(),Nt(),pn(),I&&clearTimeout(I),Ae&&typeof Ae.destroy=="function"&&Ae.destroy(),xe&&typeof xe.destroy=="function"&&xe.destroy()}),Qe(()=>a(w),()=>{f(r,Tr(a(w)))}),Qe(()=>(a(k),a(q)),()=>{f(n,{...a(k)||{},...a(q)||{}})}),Qe(()=>oe(s()),()=>{s()?(ir(),Ct(),Ms()):pn()}),Qe(()=>oe(i()),()=>{i().playground_program_library===!1&&f(m,"Program library endpoint unavailable on this backend.")}),yr();var As={loadProgram:Vn,runCurrentProgram:Hn};zt();var Vt=Gc(),hn=d(Vt),ci=d(hn),ui=d(ci),Nu=g(d(ui),2),Cu=g(d(Nu),2),fi=d(Cu);fi.value=fi.__value="dask";var di=g(ui,2),Ru=d(di);Pc(Ru,{ariaLabel:"VoxLogicA program editor",get symbols(){return a(n)},get diagnostics(){return a(w)},autocompleteEnabled:!0,completionProvider:Be,get completionBuiltins(){return sr},get value(){return a(u)},set value(c){f(u,c)},$$events:{change:Pt,symbolhover:$r,symbolleave:Nr,symbolclick:or,operatorhover:lr,hoverleave:cr},$$legacy:!0});var vi=g(di,2),Wn=g(d(vi),2),Pu=d(Wn);{var Mu=c=>{var v=Ac(),x=d(v);v.value=v.__value="",Y(()=>T(x,(oe(i()),S(()=>i().playground_program_library===!1?"unavailable":"no .imgql files found")))),L(c,v)},Au=c=>{var v=dt(),x=Ye(v);et(x,1,()=>a(p),Xe,(R,M)=>{var te=Lc(),_e=d(te),qe={};Y(()=>{T(_e,(a(M),S(()=>a(M).path))),qe!==(qe=(a(M),S(()=>a(M).path)))&&(te.value=(te.__value=(a(M),S(()=>a(M).path)))??"")}),L(R,te)}),L(c,v)};pe(Pu,c=>{a(p),S(()=>!a(p).length)?c(Mu):c(Au,!1)})}var _i=g(Wn,2),pi=g(vi,2),Lu=d(pi),hi=g(pi,4),Ou=d(hi),gi=g(hi,2);{var Iu=c=>{var v=Oc(),x=d(v);Y(()=>T(x,a(r))),L(c,v)};pe(gi,c=>{a(r)&&c(Iu)})}var mi=g(gi,2),bi=d(mi),Ls=g(bi,2),yi=g(Ls,2),Fu=g(yi,2);oi(Fu,{get value(){return a(F)}});var ju=g(mi,2);{var Du=c=>{var v=Ic(),x=d(v);Y(()=>T(x,a(P))),L(c,v)};pe(ju,c=>{a(P)&&c(Du)})}var zu=g(ci,2),wi=d(zu),Bu=g(d(wi),2),xi=g(wi,2),Si=d(xi),qu=g(d(Si)),Ju=d(qu),ki=g(Si,2),Uu=g(d(ki)),Vu=d(Uu),Ei=g(ki,2),Hu=g(d(Ei)),Wu=d(Hu),Ti=g(Ei,2),Gu=g(d(Ti)),Ku=d(Gu),$i=g(Ti,2),Yu=g(d($i)),Qu=d(Yu),Zu=g($i,2),Xu=g(d(Zu)),ef=d(Xu),Ni=g(xi,4),tf=d(Ni);{var rf=c=>{var v=Fc(),x=d(v);Y(()=>T(x,a(z))),L(c,v)},nf=c=>{var v=jc();L(c,v)},sf=c=>{var v=dt(),x=Ye(v);et(x,1,()=>a(K),Xe,(R,M)=>{const te=Ue(()=>(a(M),S(()=>String(a(M).status||"unknown")))),_e=Ue(()=>a(te)==="failed"||a(te)==="killed");var qe=qc(),pt=d(qe),st=d(pt),Mt=d(st),Ht=g(st,2);{var Wt=ht=>{var at=Dc(),js=d(at);Y(()=>{tt(at,1,`chip ${a(te)} chip-clickable`),T(js,a(te))}),X("click",at,()=>Ut(a(M).job_id)),L(ht,at)},qr=ht=>{var at=zc(),js=d(at);Y(()=>{tt(at,1,`chip ${a(te)}`),T(js,a(te))}),L(ht,at)};pe(Ht,ht=>{a(_e)?ht(Wt):ht(qr,!1)})}var ur=g(pt,2),fr=d(ur),Kn=d(fr),Os=g(fr,2),Is=d(Os),Cr=g(ur,2),Rr=d(Cr),Fs=d(Rr),xf=g(Rr,2),Ii=d(xf),Sf=g(Ii,2);{var kf=ht=>{var at=Bc();X("click",at,()=>Q(a(M).job_id)),L(ht,at)};pe(Sf,ht=>{a(te)==="running"&&ht(kf)})}Y((ht,at)=>{T(Mt,ht),T(Kn,(a(M),S(()=>a(M)?.request?.execution_strategy||"dask"))),T(Is,at),T(Fs,(a(M),S(()=>a(M).created_at||"-")))},[()=>(a(M),S(()=>String(a(M).job_id||"").slice(0,12))),()=>(oe(vt),a(M),S(()=>vt(Number(a(M)?.metrics?.wall_time_s))))]),X("click",Ii,()=>C(a(M).job_id)),L(R,qe)}),L(c,v)};pe(tf,c=>{a(z)?c(rf):(a(K),S(()=>!a(K).length)?c(nf,1):c(sf,!1))})}var Ci=g(Ni,4);Dr(Ci,c=>f(De,c),()=>a(De));var Ri=g(Ci,4),Gn=g(d(Ri),2),af=d(Gn);{var of=c=>{var v=Jc();v.value=v.__value="",L(c,v)},lf=c=>{var v=dt(),x=Ye(v);et(x,1,()=>a(fe),Xe,(R,M,te)=>{var _e=Uc(),qe=d(_e);_e.value=_e.__value=te,Y(()=>T(qe,(a(M),S(()=>a(M).kind==="print"?`print: ${a(M).label}`:`var: ${a(M).label}`)))),L(R,_e)}),L(c,v)};pe(af,c=>{a(fe),S(()=>!a(fe).length)?c(of):c(lf,!1)})}var Pi=g(Ri,2),cf=d(Pi),Mi=g(Pi,2);Dr(Mi,c=>f(G,c),()=>a(G));var Ai=g(Mi,4),uf=d(Ai),Li=g(Ai,2),ff=d(Li);{var df=c=>{var v=Vc();L(c,v)},vf=c=>{var v=dt(),x=Ye(v);et(x,1,()=>a(me),Xe,(R,M)=>{var te=dt(),_e=Ye(te);{var qe=st=>{var Mt=Hc(),Ht=d(Mt),Wt=d(Ht),qr=d(Wt),ur=g(Wt),fr=g(Ht,2),Kn=d(fr),Os=g(Kn);{var Is=Cr=>{var Rr=fl();Y(Fs=>T(Rr,`| ${Fs??""}`),[()=>(a(M),S(()=>String(a(M).error)))]),L(Cr,Rr)};pe(Os,Cr=>{a(M),S(()=>a(M).error)&&Cr(Is)})}Y((Cr,Rr)=>{T(qr,(a(M),S(()=>a(M).status||"unknown"))),T(ur,` ${a(M),S(()=>a(M).operator||"-")??""}`),T(Kn,`node=${Cr??""} | source=${a(M),S(()=>a(M).cache_source||"-")??""} |
                  duration=${Rr??""} ms `)},[()=>(a(M),S(()=>String(a(M).node_id||"").slice(0,12))),()=>(a(M),S(()=>(Number(a(M).duration_s||0)*1e3).toFixed(2)))]),L(st,Mt)},pt=st=>{var Mt=Wc(),Ht=d(Mt),Wt=d(Ht),qr=g(Ht,2),ur=d(qr);Y(fr=>{T(Wt,(a(M),S(()=>a(M).event||"event"))),T(ur,fr)},[()=>(a(M),S(()=>a(M).message||a(M).error||JSON.stringify(a(M)).slice(0,180)))]),L(st,Mt)};pe(_e,st=>{a(M),S(()=>a(M).event==="playground.node")?st(qe):st(pt,!1)})}L(R,te)}),L(c,v)};pe(ff,c=>{a(me),S(()=>!a(me).length)?c(df):c(vf,!1)})}var _f=g(Li,2),pf=d(_f),hf=g(hn,2),Oi=d(hf),gf=g(d(Oi),2),mf=d(gf),bf=g(Oi,2),yf=g(d(bf),2),wf=d(yf);return Y(()=>{tt(Vt,1,`panel ${s()?"active":""}`),Wn.disabled=(a(p),S(()=>!a(p).length)),_i.disabled=(a(p),S(()=>!a(p).length)),T(Lu,a(m)),T(Ou,a(J)),Ls.disabled=a(F)!=="running",T(Ju,a(H)),T(Vu,a(ge)),T(Wu,a(Te)),T(Ku,a(Ce)),T(Qu,a(Re)),T(ef,a(Me)),Gn.disabled=(a(fe),S(()=>!a(fe).length)),T(cf,a(re)),T(uf,a(Pe)),T(pf,a($e)),T(mf,a(W)),T(wf,a(j))}),Pn(Wn,()=>a(h),c=>f(h,c)),X("click",_i,qn),X("click",bi,_n),X("click",Ls,Ps),X("click",yi,Rs),X("click",Bu,ir),Pn(Gn,()=>a(de),c=>f(de,c)),X("change",Gn,Ee),L(e,Vt),Ka(t,"loadProgram",Vn),Ka(t,"runCurrentProgram",Hn),Tt(As)}var Yc=B('<div class="inline-error"> </div>'),Qc=B('<div class="muted">No stored results found for current runtime.</div>'),Zc=B('<article><div class="job-row"><strong> </strong> <span> </span></div> <div class="job-row"><span> </span> <span> </span></div> <div class="job-row"><span> </span> <button class="btn btn-ghost btn-small" type="button">Inspect</button></div></article>'),Xc=B('<section id="tab-results"><div class="grid-two"><article class="card"><div class="card-header"><h2>Stored Results</h2> <button id="refreshResultsBtn" class="btn btn-ghost btn-small" type="button">Refresh</button></div> <div class="row gap-s controls"><label class="inline-control" for="resultStatusFilter">Status</label> <select id="resultStatusFilter" class="select"><option>all</option><option>materialized</option><option>failed</option></select> <input id="resultSearchInput" class="input" type="search" placeholder="Filter by node id"/></div> <p id="resultListMeta" class="muted"> </p> <!> <div id="resultList" class="job-list"><!></div></article> <article class="card"><h2>Result Inspector</h2> <p class="muted">View values only from persisted store entries. Server-side save/export is intentionally disabled.</p> <div id="resultInspector" class="result-inspector"></div></article></div></section>');function eu(e,t){Et(t,!1);let r=he(t,"active",8,!1),n=he(t,"capabilities",24,()=>({})),s=N(""),i=N(""),o=N([]),l=N(""),u=N(""),p=N(""),h="",m=N(),_=null,y=null;const w=()=>{if(_)return;const z=window.VoxResultViewer?.ResultViewer;if(typeof z=="function"){_=new z(a(m),{onNavigate:J=>{a(p)&&k(a(p),J||"")},fetchPage:({nodeId:J,path:V,offset:ne,limit:G})=>Gl({nodeId:J||a(p),path:V||"",offset:Number(ne||0),limit:Number(G||64)}),onStatusClick:J=>{if(!J||J.status!=="failed"&&J.status!=="killed")return;const V=[`node: ${J.node_id||"-"}`,`path: ${J.path||"/"}`,`status: ${J.status||"failed"}`,J.error?`error: ${J.error}`:""].filter(Boolean);_.setError(V.join(`
`))}});return}_={setLoading:J=>{yt(m,a(m).textContent=J||"Loading...")},setError:J=>{yt(m,a(m).textContent=J||"Viewer error")},renderRecord:J=>{yt(m,a(m).textContent=JSON.stringify(J||{},null,2))}}},k=async(z,J="")=>{w(),f(p,z),h=J,_.setLoading(`Loading ${z}${J||""} ...`);try{const V=await Wl(z,J);_.renderRecord(V),f(u,"")}catch(V){_.setError(`Failed loading result ${z}: ${V.message}`)}},b=async()=>{if(w(),n().store_results_viewer===!1){f(o,[]),f(l,"Store results viewer unavailable on this backend."),f(u,""),_.setError("Store results endpoint unavailable.");return}try{const z=await Hl({limit:200,statusFilter:a(s),nodeFilter:a(i).trim()});if(!z.available){f(o,[]),f(l,z.error||"Store results unavailable."),_.setError(z.error||"Store results unavailable.");return}f(o,z.records||[]);const J=z.summary||{};if(f(l,`${Number(J.total||0)} total | ${Number(J.materialized||0)} materialized | ${Number(J.failed||0)} failed`),f(u,""),a(p)&&a(o).some(V=>V.node_id===a(p))){await k(a(p),h);return}a(o).length?await k(a(o)[0].node_id,""):(f(p,""),h="",_.renderRecord(null))}catch(z){f(o,[]),f(l,`Unable to load results: ${z.message}`),f(u,""),_.setError(`Unable to load result list: ${z.message}`)}},E=()=>{y&&clearTimeout(y),y=setTimeout(()=>{b()},260)},q=z=>{z.key==="Enter"&&b()};Er(()=>(w(),b(),()=>{y&&clearTimeout(y),_&&typeof _.destroy=="function"&&_.destroy()})),Qe(()=>oe(r()),()=>{r()&&b()}),yr(),zt();var $=Xc(),I=d($),P=d(I),F=d(P),D=g(d(F),2),U=g(F,2),K=g(d(U),2),H=d(K);H.value=H.__value="";var ge=g(H);ge.value=ge.__value="materialized";var Te=g(ge);Te.value=Te.__value="failed";var Ce=g(K,2),Re=g(U,2),Me=d(Re),W=g(Re,2);{var j=z=>{var J=Yc(),V=d(J);Y(()=>T(V,a(u))),L(z,J)};pe(W,z=>{a(u)&&z(j)})}var re=g(W,2),fe=d(re);{var de=z=>{var J=Qc();L(z,J)},Pe=z=>{var J=dt(),V=Ye(J);et(V,1,()=>a(o),Xe,(ne,G)=>{var De=Zc(),xe=d(De),Ae=d(xe),O=d(Ae),le=g(Ae,2),ae=d(le),ee=g(xe,2),ce=d(ee),je=d(ce),ke=g(ce,2),be=d(ke),rt=g(ee,2),St=d(rt),nt=d(St),sr=g(St,2);Y((Tr,Be)=>{tt(De,1,(a(p),a(G),S(()=>`job-item result-item ${a(p)===a(G).node_id?"active":""}`))),T(O,Tr),tt(le,1,(a(G),S(()=>`chip ${a(G).status}`))),T(ae,(a(G),S(()=>a(G).status))),T(je,(a(G),S(()=>a(G).runtime_version||"-"))),T(be,Be),T(nt,(a(G),S(()=>a(G).updated_at||"-")))},[()=>(a(G),S(()=>a(G).node_id.slice(0,16))),()=>(oe(ze),a(G),S(()=>ze(Number(a(G).payload_bytes||0))))]),X("click",sr,()=>k(a(G).node_id,"")),L(ne,De)}),L(z,J)};pe(fe,z=>{a(o),S(()=>!a(o).length)?z(de):z(Pe,!1)})}var $e=g(P,2),me=g(d($e),4);Dr(me,z=>f(m,z),()=>a(m)),Y(()=>{tt($,1,`panel ${r()?"active":""}`),T(Me,a(l))}),X("click",D,b),Pn(K,()=>a(s),z=>f(s,z)),X("change",K,b),Ga(Ce,()=>a(i),z=>f(i,z)),X("input",Ce,E),X("keydown",Ce,q),L(e,$),Tt()}var tu=B("<option> </option>"),ru=B('<div class="muted"> </div>'),nu=B('<div class="muted">No examples for selected module.</div>'),su=B('<article class="gallery-item"><h3> </h3> <div class="gallery-meta"><span class="mini-chip"> </span> <span class="mini-chip"> </span> <span class="mini-chip"> </span></div> <p class="muted"> </p> <pre class="gallery-code"> </pre> <div class="row gap-s"><button class="btn btn-primary btn-small" type="button">Load</button> <button class="btn btn-ghost btn-small" type="button">Run</button></div></article>'),au=B('<section id="tab-gallery"><article class="card"><div class="card-header"><h2>Progressive Example Gallery</h2> <div class="row gap-s"><label class="inline-control" for="moduleFilter">Module</label> <select id="moduleFilter" class="select"></select></div></div> <p class="muted">Gallery cards are generated from markdown directives in <code>doc/user/language-gallery.md</code> using <code>&lt;!-- vox:playground ... --&gt;</code> comments.</p> <div id="galleryCards" class="gallery-grid"><!></div></article></section>');function iu(e,t){Et(t,!1);const r=N();let n=he(t,"active",8,!1);const s=Za();let i=N([]),o=N(["all"]),l=N("all"),u=N("");const p=async()=>{try{const F=await Kl();f(i,F.examples||[]),f(o,["all",...F.modules||[]]),a(o).includes(a(l))||f(l,"all"),f(u,"")}catch(F){f(i,[]),f(o,["all"]),f(u,`Unable to load gallery: ${F.message}`)}},h=F=>{s("load",{code:F.code,run:!1})},m=F=>{s("load",{code:F.code,run:!0})};Er(()=>{p()}),Qe(()=>(a(i),a(l)),()=>{f(r,a(i).filter(F=>a(l)==="all"||F.module===a(l)))}),Qe(()=>oe(n()),()=>{n()&&p()}),yr(),zt();var _=au(),y=d(_),w=d(y),k=g(d(w),2),b=g(d(k),2);et(b,5,()=>a(o),Xe,(F,D)=>{var U=tu(),K=d(U),H={};Y(()=>{T(K,a(D)),H!==(H=a(D))&&(U.value=(U.__value=a(D))??"")}),L(F,U)});var E=g(w,4),q=d(E);{var $=F=>{var D=ru(),U=d(D);Y(()=>T(U,a(u))),L(F,D)},I=F=>{var D=nu();L(F,D)},P=F=>{var D=dt(),U=Ye(D);et(U,1,()=>a(r),Xe,(K,H)=>{var ge=su(),Te=d(ge),Ce=d(Te),Re=g(Te,2),Me=d(Re),W=d(Me),j=g(Me,2),re=d(j),fe=g(j,2),de=d(fe),Pe=g(Re,2),$e=d(Pe),me=g(Pe,2),z=d(me),J=g(me,2),V=d(J),ne=g(V,2);Y(()=>{T(Ce,(a(H),S(()=>a(H).title))),T(W,(a(H),S(()=>a(H).module))),T(re,(a(H),S(()=>a(H).level))),T(de,(a(H),S(()=>a(H).strategy||"dask"))),T($e,(a(H),S(()=>a(H).description||""))),T(z,(a(H),S(()=>a(H).code)))}),X("click",V,()=>h(a(H))),X("click",ne,()=>m(a(H))),L(K,ge)}),L(F,D)};pe(q,F=>{a(u)?F($):(a(r),S(()=>!a(r).length)?F(I,1):F(P,!1))})}Y(()=>tt(_,1,`panel ${n()?"active":""}`)),Pn(b,()=>a(l),F=>f(l,F)),L(e,_),Tt()}var ou=B('<div class="muted"> </div>'),lu=B('<div class="bar-row"><div class="meta"><span> </span> <strong> </strong></div> <div class="bar-bg"><div class="bar-fill"></div></div></div>');function On(e,t){Et(t,!1);const r=N();let n=he(t,"items",24,()=>[]),s=he(t,"valueField",8,"value"),i=he(t,"labelField",8,"label"),o=he(t,"formatter",8,_=>`${_}`),l=he(t,"emptyMessage",8,"No data yet.");Qe(()=>(oe(n()),oe(s())),()=>{f(r,Math.max(1,...n().map(_=>Number(_?.[s()]||0))))}),yr(),zt();var u=dt(),p=Ye(u);{var h=_=>{var y=ou(),w=d(y);Y(()=>T(w,l())),L(_,y)},m=_=>{var y=dt(),w=Ye(y);et(w,1,n,Xe,(k,b)=>{const E=Ue(()=>(a(b),oe(s()),S(()=>Number(a(b)?.[s()]||0)))),q=Ue(()=>a(E)/a(r)*100);var $=lu(),I=d($),P=d(I),F=d(P),D=g(P,2),U=d(D),K=g(I,2),H=d(K);Y((ge,Te)=>{T(F,(a(b),oe(i()),S(()=>a(b)?.[i()]))),T(U,ge),Va(H,Te)},[()=>(oe(o()),oe(a(E)),S(()=>o()(a(E)))),()=>(oe(a(q)),S(()=>`width: ${a(q).toFixed(2)}%`))]),L(k,$)}),L(_,y)};pe(p,_=>{oe(n()),S(()=>!n().length)?_(h):_(m,!1)})}L(e,u),Tt()}var cu=B('<img id="perfChart" class="perf-chart" alt="Performance comparison chart"/>'),uu=B('<img id="primitivePerfChart" class="perf-chart" alt="Primitive benchmark histogram"/>'),fu=B('<div class="muted"> </div>'),du=B('<div class="muted"> </div>'),vu=B('<div class="muted">No test jobs started from UI yet.</div>'),_u=B('<button class="btn btn-danger btn-small" type="button">Kill</button>'),pu=B('<article class="job-item"><div class="job-row"><strong> </strong> <span> </span></div> <div class="job-row"><span> </span> <span> </span></div> <div class="job-row"><span> </span> <!></div></article>'),hu=B('<div class="muted">No junit report loaded.</div>'),gu=B('<article class="table-like-row"><div class="name"> </div> <div class="detail"> </div></article>'),mu=B('<div class="muted">No failures in current report.</div>'),bu=B('<article class="table-like-row"><div class="name"> </div> <div class="detail"> </div></article>'),yu=B('<section id="tab-quality"><div class="grid-two"><article class="card"><div class="card-header"><h2>Test &amp; Coverage Overview</h2> <div class="row gap-s"><button id="refreshQualityBtn" class="btn btn-ghost btn-small" type="button">Refresh</button> <!></div></div> <div class="row controls"><button id="runQuickTestsBtn" class="btn btn-ghost btn-small" type="button">Run Quick</button> <button id="runFullTestsBtn" class="btn btn-primary btn-small" type="button">Run Full</button> <button id="runPerfTestsBtn" class="btn btn-ghost btn-small" type="button">Run Perf</button> <button id="killTestRunBtn" class="btn btn-danger btn-small" type="button">Kill Test Run</button></div> <div class="stats-grid"><div class="stat"><span class="label">Total Tests</span><strong id="qTotalTests"> </strong></div> <div class="stat"><span class="label">Passed</span><strong id="qPassed"> </strong></div> <div class="stat"><span class="label">Failed</span><strong id="qFailed"> </strong></div> <div class="stat"><span class="label">Skipped</span><strong id="qSkipped"> </strong></div> <div class="stat"><span class="label">Duration</span><strong id="qDuration"> </strong></div> <div class="stat"><span class="label">Line Coverage</span><strong id="qCoverage"> </strong></div></div> <h3 class="subheading">Lowest Coverage Packages</h3> <div id="coverageBars" class="bars"><!></div></article> <article class="card"><h2>VoxLogicA-1 vs VoxLogicA-2 Performance</h2> <!> <div id="perfSummary" class="muted"> </div> <h3 class="subheading">Primitive Benchmark Histogram</h3> <!> <div id="primitivePerfBars" class="bars"><!></div></article></div> <div class="grid-two"><article class="card"><h2>Test Run Logs</h2> <pre id="testRunLog" class="mono-scroll"> </pre> <h3 class="subheading">Recent Test Jobs</h3> <div id="recentTestJobs" class="job-list"><!></div></article> <article class="card"><h2>Test Titles</h2> <div id="testTitles" class="table-like muted"><!></div></article></div> <article class="card"><h2>Failing Test Cases</h2> <div id="failedCases" class="table-like muted"><!></div></article></section>');function wu(e,t){Et(t,!1);let r=he(t,"active",8,!1),n=he(t,"capabilities",24,()=>({})),s=N("idle"),i=N(!1),o="",l=N(""),u=N([]),p=N(""),h=N({}),m=N({}),_=N([]),y=N([]),w=N([]),k=N("No performance report yet."),b=N(""),E=N(""),q=N([]),$=N("No primitive benchmark report yet."),I=null,P=null;const F=C=>{f(i,!1),f(s,"unavailable"),f(l,C)},D=async()=>{try{const C=await Yl(),Q=C?.junit||{},Ee=C?.coverage||{},Se=C?.performance||{};if(f(h,Q.summary||{}),f(m,Ee.summary||{}),f(_,Ee.lowest_modules||[]),f(y,Q.failed_cases||[]),f(w,Q.test_cases||[]),Se.available){const Z=Number(Se.speed_ratio||0),Le=Number(Se.vox1_median_s||0),_t=Number(Se.vox2_median_s||0),Rt=Number(Se.vox1_cpu_median_s||0),Jt=Number(Se.vox2_cpu_median_s||0),Pt=Number(Se.vox1_ru_maxrss_delta_median_bytes||0),$r=Number(Se.vox2_ru_maxrss_delta_median_bytes||0);let Nr="";const or=Se.test_metrics||{};if(or.available){const cr=or.tests||[];Nr=` | perf tests: ${Number(or.count||cr.length)} | median util: ${ri(ks(cr.map(Ut=>Number(Ut.cpu_utilization))))} | median heap: ${ze(ks(cr.map(Ut=>Number(Ut.python_heap_peak_bytes))))} | median rss delta: ${ze(ks(cr.map(Ut=>Number(Ut.ru_maxrss_delta_bytes))))}`}f(k,`vox1 median: ${vt(Le)} (cpu ${vt(Rt)}, rss ${ze(Pt)}) | vox2 median: ${vt(_t)} (cpu ${vt(Jt)}, rss ${ze($r)}) | ratio vox1/vox2: ${Z.toFixed(2)}x${Nr}`),f(b,`/api/v1/testing/performance/chart?t=${Date.now()}`);const lr=Se.primitive_benchmarks||{};lr.available?(f(q,lr.cases||[]),f($,""),f(E,lr.svg_available?`/api/v1/testing/performance/primitive-chart?t=${Date.now()}`:"")):(f(q,[]),f($,lr.reason||"No primitive benchmark report yet."),f(E,""))}else f(k,"No performance report yet. Run `./tests/run-tests.sh` with perf tests enabled."),f(b,""),f(E,""),f(q,[]),f($,"No primitive benchmark report yet.")}catch(C){f(k,`Failed loading report: ${C.message}`)}},U=async()=>{try{const C=await Ql();f(u,C.jobs||[]),f(p,"")}catch(C){f(u,[]),f(p,`Failed to load test jobs: ${C.message}`)}},K=async()=>{if(o)try{const C=await Zl(o);if(f(s,C.status),f(l,C.log_tail||""),C.status==="running")return;f(i,!1),P&&(clearInterval(P),P=null),await Promise.all([D(),U()])}catch(C){f(i,!1),f(s,"failed"),f(l,`Unable to poll test job: ${C.message}`),P&&(clearInterval(P),P=null)}},H=async(C,Q)=>{if(n().testing_jobs===!1){F("Testing jobs API unavailable. Restart `./voxlogica serve` from latest code.");return}try{f(i,!0),f(s,"running"),f(l,"");const Ee=await Xl({profile:C,includePerf:Q});o=Ee.job_id,f(l,Ee.log_tail||""),P&&clearInterval(P),P=setInterval(K,1200),await Promise.all([K(),U()])}catch(Ee){f(i,!1),f(s,"failed"),f(l,`Unable to start test run: ${Ee.message}`)}},ge=async()=>{if(o)try{const C=await ti(o);f(i,!1),f(s,C.status),f(l,C.log_tail||""),P&&(clearInterval(P),P=null),await U()}catch(C){f(l,`Unable to kill current test job: ${C.message}`)}},Te=async C=>{try{await ti(C),o===C&&(o="",f(i,!1),f(s,"killed")),await U()}catch(Q){f(p,`Unable to kill ${C}: ${Q.message}`)}},Ce=()=>{I&&(clearInterval(I),I=null),I=setInterval(()=>{r()&&(D(),U(),K())},15e3)},Re=async()=>{await Promise.all([D(),U()])};Er(async()=>{await Re(),Ce()}),Ss(()=>{I&&clearInterval(I),P&&clearInterval(P)}),Qe(()=>oe(r()),()=>{r()&&(Re(),Ce())}),Qe(()=>oe(n()),()=>{n().testing_jobs===!1&&F("This backend does not expose testing jobs. Restart server from latest commit.")}),yr(),zt();var Me=yu(),W=d(Me),j=d(W),re=d(j),fe=g(d(re),2),de=d(fe),Pe=g(de,2);oi(Pe,{get value(){return a(s)}});var $e=g(re,2),me=d($e),z=g(me,2),J=g(z,2),V=g(J,2),ne=g($e,2),G=d(ne),De=g(d(G)),xe=d(De),Ae=g(G,2),O=g(d(Ae)),le=d(O),ae=g(Ae,2),ee=g(d(ae)),ce=d(ee),je=g(ae,2),ke=g(d(je)),be=d(ke),rt=g(je,2),St=g(d(rt)),nt=d(St),sr=g(rt,2),Tr=g(d(sr)),Be=d(Tr),We=g(ne,4),Ge=d(We);On(Ge,{get items(){return a(_)},valueField:"line_percent",labelField:"name",formatter:C=>`${Number(C).toFixed(2)}%`});var In=g(j,2),on=g(d(In),2);{var Fn=C=>{var Q=cu();Y(()=>an(Q,"src",a(b))),L(C,Q)};pe(on,C=>{a(b)&&C(Fn)})}var ln=g(on,2),jn=d(ln),cn=g(ln,4);{var $s=C=>{var Q=uu();Y(()=>an(Q,"src",a(E))),L(C,Q)};pe(cn,C=>{a(E)&&C($s)})}var Dn=g(cn,2),zn=d(Dn);{var Bt=C=>{On(C,{get items(){return a(q)},valueField:"speed_ratio",labelField:"name",formatter:Q=>`${Number(Q).toFixed(3)}x`})},Nt=C=>{var Q=fu(),Ee=d(Q);Y(()=>T(Ee,a($))),L(C,Q)};pe(zn,C=>{a(q),S(()=>a(q).length)?C(Bt):C(Nt,!1)})}var ar=g(W,2),zr=d(ar),un=g(d(zr),2),qt=d(un),Bn=g(un,4),Ns=d(Bn);{var qn=C=>{var Q=du(),Ee=d(Q);Y(()=>T(Ee,a(p))),L(C,Q)},Ct=C=>{var Q=vu();L(C,Q)},Cs=C=>{var Q=dt(),Ee=Ye(Q);et(Ee,1,()=>a(u),Xe,(Se,Z)=>{var Le=pu(),_t=d(Le),Rt=d(_t),Jt=d(Rt),Pt=g(Rt,2),$r=d(Pt),Nr=g(_t,2),or=d(Nr),lr=d(or),cr=g(or,2),Ut=d(cr),Ms=g(Nr,2),pn=d(Ms),Vn=d(pn),Hn=g(pn,2);{var As=Vt=>{var hn=_u();X("click",hn,()=>Te(a(Z).job_id)),L(Vt,hn)};pe(Hn,Vt=>{a(Z),S(()=>a(Z).status==="running")&&Vt(As)})}Y(Vt=>{T(Jt,Vt),tt(Pt,1,(a(Z),S(()=>`chip ${a(Z).status}`))),T($r,(a(Z),S(()=>a(Z).status))),T(lr,(a(Z),S(()=>a(Z).profile))),T(Ut,(a(Z),S(()=>a(Z).include_perf?"with perf":"no perf"))),T(Vn,(a(Z),S(()=>a(Z).created_at||"-")))},[()=>(a(Z),S(()=>String(a(Z).job_id||"").slice(0,12)))]),L(Se,Le)}),L(C,Q)};pe(Ns,C=>{a(p)?C(qn):(a(u),S(()=>!a(u).length)?C(Ct,1):C(Cs,!1))})}var Jn=g(zr,2),fn=g(d(Jn),2),Un=d(fn);{var Br=C=>{var Q=hu();L(C,Q)},ir=C=>{var Q=dt(),Ee=Ye(Q);et(Ee,1,()=>(a(w),S(()=>a(w).slice(0,200))),Xe,(Se,Z)=>{var Le=gu(),_t=d(Le),Rt=d(_t),Jt=g(_t,2),Pt=d(Jt);Y($r=>{T(Rt,(a(Z),S(()=>a(Z).id))),T(Pt,`status=${a(Z),S(()=>a(Z).status)??""} | time=${$r??""}`)},[()=>(oe(vt),a(Z),S(()=>vt(Number(a(Z).time_s||0))))]),L(Se,Le)}),L(C,Q)};pe(Un,C=>{a(w),S(()=>!a(w).length)?C(Br):C(ir,!1)})}var dn=g(ar,2),vn=g(d(dn),2),_n=d(vn);{var Rs=C=>{var Q=mu();L(C,Q)},Ps=C=>{var Q=dt(),Ee=Ye(Q);et(Ee,1,()=>a(y),Xe,(Se,Z)=>{var Le=bu(),_t=d(Le),Rt=d(_t),Jt=g(_t,2),Pt=d(Jt);Y(()=>{T(Rt,(a(Z),S(()=>a(Z).id))),T(Pt,(a(Z),S(()=>a(Z).message||"Failure without message")))}),L(Se,Le)}),L(C,Q)};pe(_n,C=>{a(y),S(()=>!a(y).length)?C(Rs):C(Ps,!1)})}Y((C,Q,Ee,Se,Z,Le)=>{tt(Me,1,`panel ${r()?"active":""}`),me.disabled=(a(i),oe(n()),S(()=>a(i)||n().testing_jobs===!1)),z.disabled=(a(i),oe(n()),S(()=>a(i)||n().testing_jobs===!1)),J.disabled=(a(i),oe(n()),S(()=>a(i)||n().testing_jobs===!1)),V.disabled=!a(i),T(xe,C),T(le,Q),T(ce,Ee),T(be,Se),T(nt,Z),T(Be,`${Le??""}%`),T(jn,a(k)),T(qt,a(l))},[()=>(a(h),S(()=>Number(a(h).total||0))),()=>(a(h),S(()=>Number(a(h).passed||0))),()=>(a(h),S(()=>Number(a(h).failed||0))),()=>(a(h),S(()=>Number(a(h).skipped||0))),()=>(oe(vt),a(h),S(()=>vt(Number(a(h).duration_s||0)))),()=>(a(m),S(()=>Number(a(m).line_percent||0).toFixed(2)))]),X("click",de,Re),X("click",me,()=>H("quick",!1)),X("click",z,()=>H("full",!0)),X("click",J,()=>H("perf",!0)),X("click",V,ge),L(e,Me),Tt()}var xu=B('<div class="inline-error"> </div>'),Su=B('<section id="tab-storage"><div class="grid-two"><article class="card"><div class="card-header"><h2>Cache Footprint</h2> <button id="refreshStorageBtn" class="btn btn-ghost btn-small" type="button">Refresh</button></div> <div class="stats-grid"><div class="stat"><span class="label">Cached Records</span> <strong id="sTotal"> </strong></div> <div class="stat"><span class="label">Materialized</span> <strong id="sMaterialized"> </strong></div> <div class="stat"><span class="label">Failed</span> <strong id="sFailed"> </strong></div> <div class="stat"><span class="label">Average Payload</span> <strong id="sAvgPayload"> </strong></div> <div class="stat"><span class="label">Total Payload</span> <strong id="sTotalPayload"> </strong></div> <div class="stat"><span class="label">Database Size</span> <strong id="sDbSize"> </strong></div></div> <p id="storageMeta" class="muted"> </p> <!></article> <article class="card"><h2>Payload Size Distribution</h2> <div id="payloadBuckets" class="bars"><!></div> <h3 class="subheading">Runtime Versions</h3> <div id="runtimeVersions" class="bars"><!></div></article></div></section>');function ku(e,t){Et(t,!1);let r=he(t,"active",8,!1),n=N(null),s=N(null),i=N(null),o=N(""),l=N("");const u=async()=>{try{const V=await ec();if(f(n,V),!V.available){f(l,V.error||"Storage stats unavailable."),f(o,a(l)),f(s,null),f(i,null);return}f(l,""),f(s,V.summary||{}),f(i,V.disk||{}),f(o,`${V.db_path} | last update ${a(s).last_update_at||"-"}`)}catch(V){f(l,`Failed loading storage stats: ${V.message}`),f(o,a(l)),f(s,null),f(i,null)}};Er(()=>{u()}),Qe(()=>oe(r()),()=>{r()&&u()}),yr(),zt();var p=Su(),h=d(p),m=d(h),_=d(m),y=g(d(_),2),w=g(_,2),k=d(w),b=g(d(k),2),E=d(b),q=g(k,2),$=g(d(q),2),I=d($),P=g(q,2),F=g(d(P),2),D=d(F),U=g(P,2),K=g(d(U),2),H=d(K),ge=g(U,2),Te=g(d(ge),2),Ce=d(Te),Re=g(ge,2),Me=g(d(Re),2),W=d(Me),j=g(w,2),re=d(j),fe=g(j,2);{var de=V=>{var ne=xu(),G=d(ne);Y(()=>T(G,a(l))),L(V,ne)};pe(fe,V=>{a(l)&&V(de)})}var Pe=g(m,2),$e=g(d(Pe),2),me=d($e);{let V=Ue(()=>(a(n),S(()=>a(n)?.payload_buckets||[])));On(me,{get items(){return a(V)},valueField:"count",labelField:"bucket",formatter:ne=>`${ne}`})}var z=g($e,4),J=d(z);{let V=Ue(()=>(a(n),S(()=>a(n)?.runtime_versions||[])));On(J,{get items(){return a(V)},valueField:"count",labelField:"runtime_version",formatter:ne=>`${ne}`})}Y((V,ne,G,De,xe,Ae)=>{tt(p,1,`panel ${r()?"active":""}`),T(E,V),T(I,ne),T(D,G),T(H,De),T(Ce,xe),T(W,Ae),T(re,a(o))},[()=>(a(s),S(()=>a(s)?Number(a(s).total_records||0):"-")),()=>(a(s),S(()=>a(s)?Number(a(s).materialized_records||0):"-")),()=>(a(s),S(()=>a(s)?Number(a(s).failed_records||0):"-")),()=>(a(s),oe(ze),S(()=>a(s)?ze(Number(a(s).avg_payload_bytes||0)):"-")),()=>(a(s),oe(ze),S(()=>a(s)?ze(Number(a(s).total_payload_bytes||0)):"-")),()=>(a(i),oe(ze),S(()=>a(i)?ze(Number(a(i).db_bytes||0)+Number(a(i).wal_bytes||0)):"-"))]),X("click",y,u),L(e,p),Tt()}var Eu=B('<button type="button"> </button>'),Tu=B('<div class="background-layer"></div> <div class="shell"><header class="topbar"><div><p class="eyebrow">VoxLogicA Serve</p> <h1>VoxLogicA Studio Console</h1></div> <div class="topbar-meta"><span id="buildStamp" class="chip"> </span></div></header> <nav class="tabbar" aria-label="Main pages"></nav> <main class="content"><!> <!> <!> <!> <!></main></div>',1);function $u(e,t){Et(t,!1);const r=[{id:"playground",label:"Playground"},{id:"results",label:"Results Explorer"},{id:"gallery",label:"Example Gallery"},{id:"quality",label:"Test Intelligence"},{id:"storage",label:"Storage Stats"}];let n=N("playground"),s=N({}),i=N("Loading..."),o=!1,l=[],u=null,p=!1;const h=300,m=40;let _=N();const y=W=>W.map(j=>{if(j instanceof Error)return j.stack||j.message||String(j);if(typeof j=="string")return j;try{return JSON.stringify(j)}catch{return String(j)}}).join(" "),w=async()=>{if(p||!l.length)return;p=!0;const W=l.splice(0,m);try{await jl(W)}catch{l=[...W,...l].slice(-h)}finally{p=!1,l.length&&(u&&clearTimeout(u),u=setTimeout(w,800))}},k=(W,j,re=null)=>{l.push({level:W,message:y(j),source:"browser-console",url:window.location.href,ts:new Date().toISOString(),user_agent:navigator.userAgent,payload:re}),l.length>h&&(l=l.slice(-h)),u&&clearTimeout(u),u=setTimeout(w,250)},b=()=>{if(o||typeof window>"u"||typeof window.WebSocket>"u")return;o=!0;const W=["log","info","warn","error","debug"];for(const j of W){const re=console[j]?console[j].bind(console):console.log.bind(console);console[j]=(...fe)=>{re(...fe),k(j,fe)}}window.addEventListener("error",j=>{k("error",[j.message||"window error"],{filename:j.filename,lineno:j.lineno,colno:j.colno})}),window.addEventListener("unhandledrejection",j=>{const re=j.reason;k("error",["unhandledrejection",re instanceof Error?re.stack||re.message:re],null)})},E=()=>{const W=window.location.protocol==="https:"?"wss":"ws",j=new WebSocket(`${W}://${window.location.host}/livereload`);j.onmessage=re=>{re.data==="reload"&&window.location.reload()},j.onclose=()=>{setTimeout(E,2e3)}},q=async W=>{const j=String(W.detail?.code||""),re=!!W.detail?.run;f(n,"playground"),a(_)&&typeof a(_).loadProgram=="function"&&await a(_).loadProgram(j,re)};Er(async()=>{b();try{const[W,j]=await Promise.all([Il(),Fl()]);f(s,W||{}),f(i,`v${j.version||"unknown"}`)}catch{f(i,"version unavailable")}E()}),zt();var $=Tu(),I=g(Ye($),2),P=d(I),F=g(d(P),2),D=d(F),U=d(D),K=g(P,2);et(K,5,()=>r,Xe,(W,j)=>{var re=Eu(),fe=d(re);Y(de=>{tt(re,1,de),T(fe,a(j).label)},[()=>Ua(`tab ${a(n)===a(j).id?"active":""}`.trim())]),X("click",re,()=>f(n,a(j).id)),L(W,re)});var H=g(K,2),ge=d(H);{let W=Ue(()=>a(n)==="playground");Dr(Kc(ge,{get active(){return a(W)},get capabilities(){return a(s)},$$legacy:!0}),j=>f(_,j),()=>a(_))}var Te=g(ge,2);{let W=Ue(()=>a(n)==="results");eu(Te,{get active(){return a(W)},get capabilities(){return a(s)}})}var Ce=g(Te,2);{let W=Ue(()=>a(n)==="gallery");iu(Ce,{get active(){return a(W)},$$events:{load:q}})}var Re=g(Ce,2);{let W=Ue(()=>a(n)==="quality");wu(Re,{get active(){return a(W)},get capabilities(){return a(s)}})}var Me=g(Re,2);{let W=Ue(()=>a(n)==="storage");ku(Me,{get active(){return a(W)}})}Y(()=>T(U,a(i))),L(e,$),Tt()}const li=document.getElementById("app");if(!(li instanceof HTMLElement))throw new Error("Missing #app root element.");dl($u,{target:li})})();
